var Rp=Object.defineProperty;var Op=(s,n,r)=>n in s?Rp(s,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[n]=r;var lt=(s,n,r)=>Op(s,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();function fh(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ja={exports:{}},us={},Qa={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kd;function Ip(){if(kd)return ce;kd=1;var s=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),S=Symbol.iterator;function k(C){return C===null||typeof C!="object"?null:(C=S&&C[S]||C["@@iterator"],typeof C=="function"?C:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,P={};function T(C,D,le){this.props=C,this.context=D,this.refs=P,this.updater=le||w}T.prototype.isReactComponent={},T.prototype.setState=function(C,D){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,D,"setState")},T.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function L(){}L.prototype=T.prototype;function O(C,D,le){this.props=C,this.context=D,this.refs=P,this.updater=le||w}var b=O.prototype=new L;b.constructor=O,j(b,T.prototype),b.isPureReactComponent=!0;var I=Array.isArray,G=Object.prototype.hasOwnProperty,H={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function de(C,D,le){var ue,M={},ae=null,ge=null;if(D!=null)for(ue in D.ref!==void 0&&(ge=D.ref),D.key!==void 0&&(ae=""+D.key),D)G.call(D,ue)&&!Z.hasOwnProperty(ue)&&(M[ue]=D[ue]);var pe=arguments.length-2;if(pe===1)M.children=le;else if(1<pe){for(var we=Array(pe),ft=0;ft<pe;ft++)we[ft]=arguments[ft+2];M.children=we}if(C&&C.defaultProps)for(ue in pe=C.defaultProps,pe)M[ue]===void 0&&(M[ue]=pe[ue]);return{$$typeof:s,type:C,key:ae,ref:ge,props:M,_owner:H.current}}function Ee(C,D){return{$$typeof:s,type:C.type,key:D,ref:C.ref,props:C.props,_owner:C._owner}}function et(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function ht(C){var D={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(le){return D[le]})}var he=/\/+/g;function Me(C,D){return typeof C=="object"&&C!==null&&C.key!=null?ht(""+C.key):D.toString(36)}function He(C,D,le,ue,M){var ae=typeof C;(ae==="undefined"||ae==="boolean")&&(C=null);var ge=!1;if(C===null)ge=!0;else switch(ae){case"string":case"number":ge=!0;break;case"object":switch(C.$$typeof){case s:case n:ge=!0}}if(ge)return ge=C,M=M(ge),C=ue===""?"."+Me(ge,0):ue,I(M)?(le="",C!=null&&(le=C.replace(he,"$&/")+"/"),He(M,D,le,"",function(ft){return ft})):M!=null&&(et(M)&&(M=Ee(M,le+(!M.key||ge&&ge.key===M.key?"":(""+M.key).replace(he,"$&/")+"/")+C)),D.push(M)),1;if(ge=0,ue=ue===""?".":ue+":",I(C))for(var pe=0;pe<C.length;pe++){ae=C[pe];var we=ue+Me(ae,pe);ge+=He(ae,D,le,we,M)}else if(we=k(C),typeof we=="function")for(C=we.call(C),pe=0;!(ae=C.next()).done;)ae=ae.value,we=ue+Me(ae,pe++),ge+=He(ae,D,le,we,M);else if(ae==="object")throw D=String(C),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return ge}function Be(C,D,le){if(C==null)return C;var ue=[],M=0;return He(C,ue,"","",function(ae){return D.call(le,ae,M++)}),ue}function De(C){if(C._status===-1){var D=C._result;D=D(),D.then(function(le){(C._status===0||C._status===-1)&&(C._status=1,C._result=le)},function(le){(C._status===0||C._status===-1)&&(C._status=2,C._result=le)}),C._status===-1&&(C._status=0,C._result=D)}if(C._status===1)return C._result.default;throw C._result}var ye={current:null},V={transition:null},ee={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:V,ReactCurrentOwner:H};function W(){throw Error("act(...) is not supported in production builds of React.")}return ce.Children={map:Be,forEach:function(C,D,le){Be(C,function(){D.apply(this,arguments)},le)},count:function(C){var D=0;return Be(C,function(){D++}),D},toArray:function(C){return Be(C,function(D){return D})||[]},only:function(C){if(!et(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},ce.Component=T,ce.Fragment=r,ce.Profiler=l,ce.PureComponent=O,ce.StrictMode=o,ce.Suspense=m,ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,ce.act=W,ce.cloneElement=function(C,D,le){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var ue=j({},C.props),M=C.key,ae=C.ref,ge=C._owner;if(D!=null){if(D.ref!==void 0&&(ae=D.ref,ge=H.current),D.key!==void 0&&(M=""+D.key),C.type&&C.type.defaultProps)var pe=C.type.defaultProps;for(we in D)G.call(D,we)&&!Z.hasOwnProperty(we)&&(ue[we]=D[we]===void 0&&pe!==void 0?pe[we]:D[we])}var we=arguments.length-2;if(we===1)ue.children=le;else if(1<we){pe=Array(we);for(var ft=0;ft<we;ft++)pe[ft]=arguments[ft+2];ue.children=pe}return{$$typeof:s,type:C.type,key:M,ref:ae,props:ue,_owner:ge}},ce.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:u,_context:C},C.Consumer=C},ce.createElement=de,ce.createFactory=function(C){var D=de.bind(null,C);return D.type=C,D},ce.createRef=function(){return{current:null}},ce.forwardRef=function(C){return{$$typeof:f,render:C}},ce.isValidElement=et,ce.lazy=function(C){return{$$typeof:y,_payload:{_status:-1,_result:C},_init:De}},ce.memo=function(C,D){return{$$typeof:v,type:C,compare:D===void 0?null:D}},ce.startTransition=function(C){var D=V.transition;V.transition={};try{C()}finally{V.transition=D}},ce.unstable_act=W,ce.useCallback=function(C,D){return ye.current.useCallback(C,D)},ce.useContext=function(C){return ye.current.useContext(C)},ce.useDebugValue=function(){},ce.useDeferredValue=function(C){return ye.current.useDeferredValue(C)},ce.useEffect=function(C,D){return ye.current.useEffect(C,D)},ce.useId=function(){return ye.current.useId()},ce.useImperativeHandle=function(C,D,le){return ye.current.useImperativeHandle(C,D,le)},ce.useInsertionEffect=function(C,D){return ye.current.useInsertionEffect(C,D)},ce.useLayoutEffect=function(C,D){return ye.current.useLayoutEffect(C,D)},ce.useMemo=function(C,D){return ye.current.useMemo(C,D)},ce.useReducer=function(C,D,le){return ye.current.useReducer(C,D,le)},ce.useRef=function(C){return ye.current.useRef(C)},ce.useState=function(C){return ye.current.useState(C)},ce.useSyncExternalStore=function(C,D,le){return ye.current.useSyncExternalStore(C,D,le)},ce.useTransition=function(){return ye.current.useTransition()},ce.version="18.3.1",ce}var xd;function ks(){return xd||(xd=1,Qa.exports=Ip()),Qa.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd;function Lp(){if(bd)return us;bd=1;var s=ks(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,v){var y,S={},k=null,w=null;v!==void 0&&(k=""+v),m.key!==void 0&&(k=""+m.key),m.ref!==void 0&&(w=m.ref);for(y in m)o.call(m,y)&&!u.hasOwnProperty(y)&&(S[y]=m[y]);if(f&&f.defaultProps)for(y in m=f.defaultProps,m)S[y]===void 0&&(S[y]=m[y]);return{$$typeof:n,type:f,key:k,ref:w,props:S,_owner:l.current}}return us.Fragment=r,us.jsx=d,us.jsxs=d,us}var Ed;function Mp(){return Ed||(Ed=1,Ja.exports=Lp()),Ja.exports}var p=Mp(),oe=ks();const Dp=fh(oe);var Ii={},Ya={exports:{}},ut={},Xa={exports:{}},Za={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Td;function $p(){return Td||(Td=1,(function(s){function n(V,ee){var W=V.length;V.push(ee);e:for(;0<W;){var C=W-1>>>1,D=V[C];if(0<l(D,ee))V[C]=ee,V[W]=D,W=C;else break e}}function r(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var ee=V[0],W=V.pop();if(W!==ee){V[0]=W;e:for(var C=0,D=V.length,le=D>>>1;C<le;){var ue=2*(C+1)-1,M=V[ue],ae=ue+1,ge=V[ae];if(0>l(M,W))ae<D&&0>l(ge,M)?(V[C]=ge,V[ae]=W,C=ae):(V[C]=M,V[ue]=W,C=ue);else if(ae<D&&0>l(ge,W))V[C]=ge,V[ae]=W,C=ae;else break e}}return ee}function l(V,ee){var W=V.sortIndex-ee.sortIndex;return W!==0?W:V.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();s.unstable_now=function(){return d.now()-f}}var m=[],v=[],y=1,S=null,k=3,w=!1,j=!1,P=!1,T=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var ee=r(v);ee!==null;){if(ee.callback===null)o(v);else if(ee.startTime<=V)o(v),ee.sortIndex=ee.expirationTime,n(m,ee);else break;ee=r(v)}}function I(V){if(P=!1,b(V),!j)if(r(m)!==null)j=!0,De(G);else{var ee=r(v);ee!==null&&ye(I,ee.startTime-V)}}function G(V,ee){j=!1,P&&(P=!1,L(de),de=-1),w=!0;var W=k;try{for(b(ee),S=r(m);S!==null&&(!(S.expirationTime>ee)||V&&!ht());){var C=S.callback;if(typeof C=="function"){S.callback=null,k=S.priorityLevel;var D=C(S.expirationTime<=ee);ee=s.unstable_now(),typeof D=="function"?S.callback=D:S===r(m)&&o(m),b(ee)}else o(m);S=r(m)}if(S!==null)var le=!0;else{var ue=r(v);ue!==null&&ye(I,ue.startTime-ee),le=!1}return le}finally{S=null,k=W,w=!1}}var H=!1,Z=null,de=-1,Ee=5,et=-1;function ht(){return!(s.unstable_now()-et<Ee)}function he(){if(Z!==null){var V=s.unstable_now();et=V;var ee=!0;try{ee=Z(!0,V)}finally{ee?Me():(H=!1,Z=null)}}else H=!1}var Me;if(typeof O=="function")Me=function(){O(he)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Be=He.port2;He.port1.onmessage=he,Me=function(){Be.postMessage(null)}}else Me=function(){T(he,0)};function De(V){Z=V,H||(H=!0,Me())}function ye(V,ee){de=T(function(){V(s.unstable_now())},ee)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(V){V.callback=null},s.unstable_continueExecution=function(){j||w||(j=!0,De(G))},s.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<V?Math.floor(1e3/V):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_getFirstCallbackNode=function(){return r(m)},s.unstable_next=function(V){switch(k){case 1:case 2:case 3:var ee=3;break;default:ee=k}var W=k;k=ee;try{return V()}finally{k=W}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(V,ee){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var W=k;k=V;try{return ee()}finally{k=W}},s.unstable_scheduleCallback=function(V,ee,W){var C=s.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?C+W:C):W=C,V){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=W+D,V={id:y++,callback:ee,priorityLevel:V,startTime:W,expirationTime:D,sortIndex:-1},W>C?(V.sortIndex=W,n(v,V),r(m)===null&&V===r(v)&&(P?(L(de),de=-1):P=!0,ye(I,W-C))):(V.sortIndex=D,n(m,V),j||w||(j=!0,De(G))),V},s.unstable_shouldYield=ht,s.unstable_wrapCallback=function(V){var ee=k;return function(){var W=k;k=ee;try{return V.apply(this,arguments)}finally{k=W}}}})(Za)),Za}var jd;function Up(){return jd||(jd=1,Xa.exports=$p()),Xa.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cd;function Fp(){if(Cd)return ut;Cd=1;var s=ks(),n=Up();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function u(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},S={};function k(e){return m.call(S,e)?!0:m.call(y,e)?!1:v.test(e)?S[e]=!0:(y[e]=!0,!1)}function w(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function j(e,t,i,a){if(t===null||typeof t>"u"||w(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,i,a,c,h,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=g}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){T[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];T[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){T[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){T[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){T[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){T[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){T[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){T[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){T[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function O(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(L,O);T[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(L,O);T[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(L,O);T[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){T[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),T.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){T[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function b(e,t,i,a){var c=T.hasOwnProperty(t)?T[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(j(t,i,c,a)&&(i=null),a||c===null?k(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var I=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),H=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),de=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),et=Symbol.for("react.provider"),ht=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),Be=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),V=Symbol.iterator;function ee(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var W=Object.assign,C;function D(e){if(C===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);C=t&&t[1]||""}return`
`+C+e}var le=!1;function ue(e,t){if(!e||le)return"";le=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(R){var a=R}Reflect.construct(e,[],t)}else{try{t.call()}catch(R){a=R}e.call(t.prototype)}else{try{throw Error()}catch(R){a=R}e()}}catch(R){if(R&&a&&typeof R.stack=="string"){for(var c=R.stack.split(`
`),h=a.stack.split(`
`),g=c.length-1,_=h.length-1;1<=g&&0<=_&&c[g]!==h[_];)_--;for(;1<=g&&0<=_;g--,_--)if(c[g]!==h[_]){if(g!==1||_!==1)do if(g--,_--,0>_||c[g]!==h[_]){var x=`
`+c[g].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=g&&0<=_);break}}}finally{le=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?D(e):""}function M(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=ue(e.type,!1),e;case 11:return e=ue(e.type.render,!1),e;case 1:return e=ue(e.type,!0),e;default:return""}}function ae(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case H:return"Portal";case Ee:return"Profiler";case de:return"StrictMode";case Me:return"Suspense";case He:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ht:return(e.displayName||"Context")+".Consumer";case et:return(e._context.displayName||"Context")+".Provider";case he:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Be:return t=e.displayName||null,t!==null?t:ae(e.type)||"Memo";case De:t=e._payload,e=e._init;try{return ae(e(t))}catch{}}return null}function ge(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(t);case 8:return t===de?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function we(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ft(e){var t=we(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,h=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,h.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bs(e){e._valueTracker||(e._valueTracker=ft(e))}function Cl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=we(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Es(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function to(e,t){var i=t.checked;return W({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Pl(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=pe(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nl(e,t){t=t.checked,t!=null&&b(e,"checked",t,!1)}function no(e,t){Nl(e,t);var i=pe(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ro(e,t.type,i):t.hasOwnProperty("defaultValue")&&ro(e,t.type,pe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Al(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function ro(e,t,i){(t!=="number"||Es(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var br=Array.isArray;function Bn(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+pe(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function so(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(r(91));return W({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rl(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(r(92));if(br(i)){if(1<i.length)throw Error(r(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:pe(i)}}function Ol(e,t){var i=pe(t.value),a=pe(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function Il(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ll(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function io(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ll(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ts,Ml=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ts=Ts||document.createElement("div"),Ts.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ts.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Er(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Tr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lh=["Webkit","ms","Moz","O"];Object.keys(Tr).forEach(function(e){Lh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tr[t]=Tr[e]})});function Dl(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Tr.hasOwnProperty(e)&&Tr[e]?(""+t).trim():t+"px"}function $l(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=Dl(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var Mh=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oo(e,t){if(t){if(Mh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(r(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(t.style!=null&&typeof t.style!="object")throw Error(r(62))}}function ao(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lo=null;function uo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var co=null,zn=null,Wn=null;function Ul(e){if(e=Gr(e)){if(typeof co!="function")throw Error(r(280));var t=e.stateNode;t&&(t=Js(t),co(e.stateNode,e.type,t))}}function Fl(e){zn?Wn?Wn.push(e):Wn=[e]:zn=e}function Bl(){if(zn){var e=zn,t=Wn;if(Wn=zn=null,Ul(e),t)for(e=0;e<t.length;e++)Ul(t[e])}}function zl(e,t){return e(t)}function Wl(){}var ho=!1;function Vl(e,t,i){if(ho)return e(t,i);ho=!0;try{return zl(e,t,i)}finally{ho=!1,(zn!==null||Wn!==null)&&(Wl(),Bl())}}function jr(e,t){var i=e.stateNode;if(i===null)return null;var a=Js(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,t,typeof i));return i}var fo=!1;if(f)try{var Cr={};Object.defineProperty(Cr,"passive",{get:function(){fo=!0}}),window.addEventListener("test",Cr,Cr),window.removeEventListener("test",Cr,Cr)}catch{fo=!1}function Dh(e,t,i,a,c,h,g,_,x){var R=Array.prototype.slice.call(arguments,3);try{t.apply(i,R)}catch(U){this.onError(U)}}var Pr=!1,js=null,Cs=!1,po=null,$h={onError:function(e){Pr=!0,js=e}};function Uh(e,t,i,a,c,h,g,_,x){Pr=!1,js=null,Dh.apply($h,arguments)}function Fh(e,t,i,a,c,h,g,_,x){if(Uh.apply(this,arguments),Pr){if(Pr){var R=js;Pr=!1,js=null}else throw Error(r(198));Cs||(Cs=!0,po=R)}}function kn(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Hl(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ql(e){if(kn(e)!==e)throw Error(r(188))}function Bh(e){var t=e.alternate;if(!t){if(t=kn(e),t===null)throw Error(r(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var h=c.alternate;if(h===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===i)return ql(c),e;if(h===a)return ql(c),t;h=h.sibling}throw Error(r(188))}if(i.return!==a.return)i=c,a=h;else{for(var g=!1,_=c.child;_;){if(_===i){g=!0,i=c,a=h;break}if(_===a){g=!0,a=c,i=h;break}_=_.sibling}if(!g){for(_=h.child;_;){if(_===i){g=!0,i=h,a=c;break}if(_===a){g=!0,a=h,i=c;break}_=_.sibling}if(!g)throw Error(r(189))}}if(i.alternate!==a)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:t}function Kl(e){return e=Bh(e),e!==null?Gl(e):null}function Gl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gl(e);if(t!==null)return t;e=e.sibling}return null}var Jl=n.unstable_scheduleCallback,Ql=n.unstable_cancelCallback,zh=n.unstable_shouldYield,Wh=n.unstable_requestPaint,Ae=n.unstable_now,Vh=n.unstable_getCurrentPriorityLevel,mo=n.unstable_ImmediatePriority,Yl=n.unstable_UserBlockingPriority,Ps=n.unstable_NormalPriority,Hh=n.unstable_LowPriority,Xl=n.unstable_IdlePriority,Ns=null,Dt=null;function qh(e){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Ns,e,void 0,(e.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:Jh,Kh=Math.log,Gh=Math.LN2;function Jh(e){return e>>>=0,e===0?32:31-(Kh(e)/Gh|0)|0}var As=64,Rs=4194304;function Nr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Os(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,h=e.pingedLanes,g=i&268435455;if(g!==0){var _=g&~c;_!==0?a=Nr(_):(h&=g,h!==0&&(a=Nr(h)))}else g=i&~c,g!==0?a=Nr(g):h!==0&&(a=Nr(h));if(a===0)return 0;if(t!==0&&t!==a&&(t&c)===0&&(c=a&-a,h=t&-t,c>=h||c===16&&(h&4194240)!==0))return t;if((a&4)!==0&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Tt(t),c=1<<i,a|=e[i],t&=~c;return a}function Qh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yh(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes;0<h;){var g=31-Tt(h),_=1<<g,x=c[g];x===-1?((_&i)===0||(_&a)!==0)&&(c[g]=Qh(_,t)):x<=t&&(e.expiredLanes|=_),h&=~_}}function go(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Zl(){var e=As;return As<<=1,(As&4194240)===0&&(As=64),e}function vo(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Ar(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tt(t),e[t]=i}function Xh(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Tt(i),h=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~h}}function yo(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Tt(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var ve=0;function eu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var tu,wo,nu,ru,su,_o=!1,Is=[],Zt=null,en=null,tn=null,Rr=new Map,Or=new Map,nn=[],Zh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iu(e,t){switch(e){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":en=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":Rr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Or.delete(t.pointerId)}}function Ir(e,t,i,a,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:h,targetContainers:[c]},t!==null&&(t=Gr(t),t!==null&&wo(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function ef(e,t,i,a,c){switch(t){case"focusin":return Zt=Ir(Zt,e,t,i,a,c),!0;case"dragenter":return en=Ir(en,e,t,i,a,c),!0;case"mouseover":return tn=Ir(tn,e,t,i,a,c),!0;case"pointerover":var h=c.pointerId;return Rr.set(h,Ir(Rr.get(h)||null,e,t,i,a,c)),!0;case"gotpointercapture":return h=c.pointerId,Or.set(h,Ir(Or.get(h)||null,e,t,i,a,c)),!0}return!1}function ou(e){var t=xn(e.target);if(t!==null){var i=kn(t);if(i!==null){if(t=i.tag,t===13){if(t=Hl(i),t!==null){e.blockedOn=t,su(e.priority,function(){nu(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ls(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=ko(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);lo=a,i.target.dispatchEvent(a),lo=null}else return t=Gr(i),t!==null&&wo(t),e.blockedOn=i,!1;t.shift()}return!0}function au(e,t,i){Ls(e)&&i.delete(t)}function tf(){_o=!1,Zt!==null&&Ls(Zt)&&(Zt=null),en!==null&&Ls(en)&&(en=null),tn!==null&&Ls(tn)&&(tn=null),Rr.forEach(au),Or.forEach(au)}function Lr(e,t){e.blockedOn===t&&(e.blockedOn=null,_o||(_o=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,tf)))}function Mr(e){function t(c){return Lr(c,e)}if(0<Is.length){Lr(Is[0],e);for(var i=1;i<Is.length;i++){var a=Is[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Zt!==null&&Lr(Zt,e),en!==null&&Lr(en,e),tn!==null&&Lr(tn,e),Rr.forEach(t),Or.forEach(t),i=0;i<nn.length;i++)a=nn[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<nn.length&&(i=nn[0],i.blockedOn===null);)ou(i),i.blockedOn===null&&nn.shift()}var Vn=I.ReactCurrentBatchConfig,Ms=!0;function nf(e,t,i,a){var c=ve,h=Vn.transition;Vn.transition=null;try{ve=1,So(e,t,i,a)}finally{ve=c,Vn.transition=h}}function rf(e,t,i,a){var c=ve,h=Vn.transition;Vn.transition=null;try{ve=4,So(e,t,i,a)}finally{ve=c,Vn.transition=h}}function So(e,t,i,a){if(Ms){var c=ko(e,t,i,a);if(c===null)Uo(e,t,a,Ds,i),iu(e,a);else if(ef(c,e,t,i,a))a.stopPropagation();else if(iu(e,a),t&4&&-1<Zh.indexOf(e)){for(;c!==null;){var h=Gr(c);if(h!==null&&tu(h),h=ko(e,t,i,a),h===null&&Uo(e,t,a,Ds,i),h===c)break;c=h}c!==null&&a.stopPropagation()}else Uo(e,t,a,null,i)}}var Ds=null;function ko(e,t,i,a){if(Ds=null,e=uo(a),e=xn(e),e!==null)if(t=kn(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Hl(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ds=e,null}function lu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vh()){case mo:return 1;case Yl:return 4;case Ps:case Hh:return 16;case Xl:return 536870912;default:return 16}default:return 16}}var rn=null,xo=null,$s=null;function uu(){if($s)return $s;var e,t=xo,i=t.length,a,c="value"in rn?rn.value:rn.textContent,h=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(a=1;a<=g&&t[i-a]===c[h-a];a++);return $s=c.slice(e,1<a?1-a:void 0)}function Us(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fs(){return!0}function cu(){return!1}function pt(e){function t(i,a,c,h,g){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(i=e[_],this[_]=i?i(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Fs:cu,this.isPropagationStopped=cu,this}return W(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Fs)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Fs)},persist:function(){},isPersistent:Fs}),t}var Hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bo=pt(Hn),Dr=W({},Hn,{view:0,detail:0}),sf=pt(Dr),Eo,To,$r,Bs=W({},Dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Co,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$r&&($r&&e.type==="mousemove"?(Eo=e.screenX-$r.screenX,To=e.screenY-$r.screenY):To=Eo=0,$r=e),Eo)},movementY:function(e){return"movementY"in e?e.movementY:To}}),du=pt(Bs),of=W({},Bs,{dataTransfer:0}),af=pt(of),lf=W({},Dr,{relatedTarget:0}),jo=pt(lf),uf=W({},Hn,{animationName:0,elapsedTime:0,pseudoElement:0}),cf=pt(uf),df=W({},Hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hf=pt(df),ff=W({},Hn,{data:0}),hu=pt(ff),pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gf[e])?!!t[e]:!1}function Co(){return vf}var yf=W({},Dr,{key:function(e){if(e.key){var t=pf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Us(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Co,charCode:function(e){return e.type==="keypress"?Us(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Us(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wf=pt(yf),_f=W({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fu=pt(_f),Sf=W({},Dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Co}),kf=pt(Sf),xf=W({},Hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),bf=pt(xf),Ef=W({},Bs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tf=pt(Ef),jf=[9,13,27,32],Po=f&&"CompositionEvent"in window,Ur=null;f&&"documentMode"in document&&(Ur=document.documentMode);var Cf=f&&"TextEvent"in window&&!Ur,pu=f&&(!Po||Ur&&8<Ur&&11>=Ur),mu=" ",gu=!1;function vu(e,t){switch(e){case"keyup":return jf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qn=!1;function Pf(e,t){switch(e){case"compositionend":return yu(t);case"keypress":return t.which!==32?null:(gu=!0,mu);case"textInput":return e=t.data,e===mu&&gu?null:e;default:return null}}function Nf(e,t){if(qn)return e==="compositionend"||!Po&&vu(e,t)?(e=uu(),$s=xo=rn=null,qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pu&&t.locale!=="ko"?null:t.data;default:return null}}var Af={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Af[e.type]:t==="textarea"}function _u(e,t,i,a){Fl(a),t=qs(t,"onChange"),0<t.length&&(i=new bo("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var Fr=null,Br=null;function Rf(e){$u(e,0)}function zs(e){var t=Yn(e);if(Cl(t))return e}function Of(e,t){if(e==="change")return t}var Su=!1;if(f){var No;if(f){var Ao="oninput"in document;if(!Ao){var ku=document.createElement("div");ku.setAttribute("oninput","return;"),Ao=typeof ku.oninput=="function"}No=Ao}else No=!1;Su=No&&(!document.documentMode||9<document.documentMode)}function xu(){Fr&&(Fr.detachEvent("onpropertychange",bu),Br=Fr=null)}function bu(e){if(e.propertyName==="value"&&zs(Br)){var t=[];_u(t,Br,e,uo(e)),Vl(Rf,t)}}function If(e,t,i){e==="focusin"?(xu(),Fr=t,Br=i,Fr.attachEvent("onpropertychange",bu)):e==="focusout"&&xu()}function Lf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zs(Br)}function Mf(e,t){if(e==="click")return zs(t)}function Df(e,t){if(e==="input"||e==="change")return zs(t)}function $f(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:$f;function zr(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!m.call(t,c)||!jt(e[c],t[c]))return!1}return!0}function Eu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tu(e,t){var i=Eu(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Eu(i)}}function ju(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ju(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cu(){for(var e=window,t=Es();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Es(e.document)}return t}function Ro(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Uf(e){var t=Cu(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&ju(i.ownerDocument.documentElement,i)){if(a!==null&&Ro(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,h=Math.min(a.start,c);a=a.end===void 0?h:Math.min(a.end,c),!e.extend&&h>a&&(c=a,a=h,h=c),c=Tu(i,h);var g=Tu(i,a);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),h>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ff=f&&"documentMode"in document&&11>=document.documentMode,Kn=null,Oo=null,Wr=null,Io=!1;function Pu(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Io||Kn==null||Kn!==Es(a)||(a=Kn,"selectionStart"in a&&Ro(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Wr&&zr(Wr,a)||(Wr=a,a=qs(Oo,"onSelect"),0<a.length&&(t=new bo("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Kn)))}function Ws(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Gn={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionend:Ws("Transition","TransitionEnd")},Lo={},Nu={};f&&(Nu=document.createElement("div").style,"AnimationEvent"in window||(delete Gn.animationend.animation,delete Gn.animationiteration.animation,delete Gn.animationstart.animation),"TransitionEvent"in window||delete Gn.transitionend.transition);function Vs(e){if(Lo[e])return Lo[e];if(!Gn[e])return e;var t=Gn[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Nu)return Lo[e]=t[i];return e}var Au=Vs("animationend"),Ru=Vs("animationiteration"),Ou=Vs("animationstart"),Iu=Vs("transitionend"),Lu=new Map,Mu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sn(e,t){Lu.set(e,t),u(t,[e])}for(var Mo=0;Mo<Mu.length;Mo++){var Do=Mu[Mo],Bf=Do.toLowerCase(),zf=Do[0].toUpperCase()+Do.slice(1);sn(Bf,"on"+zf)}sn(Au,"onAnimationEnd"),sn(Ru,"onAnimationIteration"),sn(Ou,"onAnimationStart"),sn("dblclick","onDoubleClick"),sn("focusin","onFocus"),sn("focusout","onBlur"),sn(Iu,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vr));function Du(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,Fh(a,t,void 0,e),e.currentTarget=null}function $u(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var h=void 0;if(t)for(var g=a.length-1;0<=g;g--){var _=a[g],x=_.instance,R=_.currentTarget;if(_=_.listener,x!==h&&c.isPropagationStopped())break e;Du(c,_,R),h=x}else for(g=0;g<a.length;g++){if(_=a[g],x=_.instance,R=_.currentTarget,_=_.listener,x!==h&&c.isPropagationStopped())break e;Du(c,_,R),h=x}}}if(Cs)throw e=po,Cs=!1,po=null,e}function ke(e,t){var i=t[Ho];i===void 0&&(i=t[Ho]=new Set);var a=e+"__bubble";i.has(a)||(Uu(t,e,2,!1),i.add(a))}function $o(e,t,i){var a=0;t&&(a|=4),Uu(i,e,a,t)}var Hs="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Hs]){e[Hs]=!0,o.forEach(function(i){i!=="selectionchange"&&(Wf.has(i)||$o(i,!1,e),$o(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hs]||(t[Hs]=!0,$o("selectionchange",!1,t))}}function Uu(e,t,i,a){switch(lu(t)){case 1:var c=nf;break;case 4:c=rf;break;default:c=So}i=c.bind(null,t,i,e),c=void 0,!fo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function Uo(e,t,i,a,c){var h=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var _=a.stateNode.containerInfo;if(_===c||_.nodeType===8&&_.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var x=g.tag;if((x===3||x===4)&&(x=g.stateNode.containerInfo,x===c||x.nodeType===8&&x.parentNode===c))return;g=g.return}for(;_!==null;){if(g=xn(_),g===null)return;if(x=g.tag,x===5||x===6){a=h=g;continue e}_=_.parentNode}}a=a.return}Vl(function(){var R=h,U=uo(i),F=[];e:{var $=Lu.get(e);if($!==void 0){var q=bo,J=e;switch(e){case"keypress":if(Us(i)===0)break e;case"keydown":case"keyup":q=wf;break;case"focusin":J="focus",q=jo;break;case"focusout":J="blur",q=jo;break;case"beforeblur":case"afterblur":q=jo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=kf;break;case Au:case Ru:case Ou:q=cf;break;case Iu:q=bf;break;case"scroll":q=sf;break;case"wheel":q=Tf;break;case"copy":case"cut":case"paste":q=hf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=fu}var Q=(t&4)!==0,Re=!Q&&e==="scroll",N=Q?$!==null?$+"Capture":null:$;Q=[];for(var E=R,A;E!==null;){A=E;var B=A.stateNode;if(A.tag===5&&B!==null&&(A=B,N!==null&&(B=jr(E,N),B!=null&&Q.push(qr(E,B,A)))),Re)break;E=E.return}0<Q.length&&($=new q($,J,null,i,U),F.push({event:$,listeners:Q}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",$&&i!==lo&&(J=i.relatedTarget||i.fromElement)&&(xn(J)||J[Wt]))break e;if((q||$)&&($=U.window===U?U:($=U.ownerDocument)?$.defaultView||$.parentWindow:window,q?(J=i.relatedTarget||i.toElement,q=R,J=J?xn(J):null,J!==null&&(Re=kn(J),J!==Re||J.tag!==5&&J.tag!==6)&&(J=null)):(q=null,J=R),q!==J)){if(Q=du,B="onMouseLeave",N="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(Q=fu,B="onPointerLeave",N="onPointerEnter",E="pointer"),Re=q==null?$:Yn(q),A=J==null?$:Yn(J),$=new Q(B,E+"leave",q,i,U),$.target=Re,$.relatedTarget=A,B=null,xn(U)===R&&(Q=new Q(N,E+"enter",J,i,U),Q.target=A,Q.relatedTarget=Re,B=Q),Re=B,q&&J)t:{for(Q=q,N=J,E=0,A=Q;A;A=Jn(A))E++;for(A=0,B=N;B;B=Jn(B))A++;for(;0<E-A;)Q=Jn(Q),E--;for(;0<A-E;)N=Jn(N),A--;for(;E--;){if(Q===N||N!==null&&Q===N.alternate)break t;Q=Jn(Q),N=Jn(N)}Q=null}else Q=null;q!==null&&Fu(F,$,q,Q,!1),J!==null&&Re!==null&&Fu(F,Re,J,Q,!0)}}e:{if($=R?Yn(R):window,q=$.nodeName&&$.nodeName.toLowerCase(),q==="select"||q==="input"&&$.type==="file")var Y=Of;else if(wu($))if(Su)Y=Df;else{Y=Lf;var te=If}else(q=$.nodeName)&&q.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(Y=Mf);if(Y&&(Y=Y(e,R))){_u(F,Y,i,U);break e}te&&te(e,$,R),e==="focusout"&&(te=$._wrapperState)&&te.controlled&&$.type==="number"&&ro($,"number",$.value)}switch(te=R?Yn(R):window,e){case"focusin":(wu(te)||te.contentEditable==="true")&&(Kn=te,Oo=R,Wr=null);break;case"focusout":Wr=Oo=Kn=null;break;case"mousedown":Io=!0;break;case"contextmenu":case"mouseup":case"dragend":Io=!1,Pu(F,i,U);break;case"selectionchange":if(Ff)break;case"keydown":case"keyup":Pu(F,i,U)}var ne;if(Po)e:{switch(e){case"compositionstart":var ie="onCompositionStart";break e;case"compositionend":ie="onCompositionEnd";break e;case"compositionupdate":ie="onCompositionUpdate";break e}ie=void 0}else qn?vu(e,i)&&(ie="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ie="onCompositionStart");ie&&(pu&&i.locale!=="ko"&&(qn||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&qn&&(ne=uu()):(rn=U,xo="value"in rn?rn.value:rn.textContent,qn=!0)),te=qs(R,ie),0<te.length&&(ie=new hu(ie,e,null,i,U),F.push({event:ie,listeners:te}),ne?ie.data=ne:(ne=yu(i),ne!==null&&(ie.data=ne)))),(ne=Cf?Pf(e,i):Nf(e,i))&&(R=qs(R,"onBeforeInput"),0<R.length&&(U=new hu("onBeforeInput","beforeinput",null,i,U),F.push({event:U,listeners:R}),U.data=ne))}$u(F,t)})}function qr(e,t,i){return{instance:e,listener:t,currentTarget:i}}function qs(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=jr(e,i),h!=null&&a.unshift(qr(e,h,c)),h=jr(e,t),h!=null&&a.push(qr(e,h,c))),e=e.return}return a}function Jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Fu(e,t,i,a,c){for(var h=t._reactName,g=[];i!==null&&i!==a;){var _=i,x=_.alternate,R=_.stateNode;if(x!==null&&x===a)break;_.tag===5&&R!==null&&(_=R,c?(x=jr(i,h),x!=null&&g.unshift(qr(i,x,_))):c||(x=jr(i,h),x!=null&&g.push(qr(i,x,_)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var Vf=/\r\n?/g,Hf=/\u0000|\uFFFD/g;function Bu(e){return(typeof e=="string"?e:""+e).replace(Vf,`
`).replace(Hf,"")}function Ks(e,t,i){if(t=Bu(t),Bu(e)!==t&&i)throw Error(r(425))}function Gs(){}var Fo=null,Bo=null;function zo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wo=typeof setTimeout=="function"?setTimeout:void 0,qf=typeof clearTimeout=="function"?clearTimeout:void 0,zu=typeof Promise=="function"?Promise:void 0,Kf=typeof queueMicrotask=="function"?queueMicrotask:typeof zu<"u"?function(e){return zu.resolve(null).then(e).catch(Gf)}:Wo;function Gf(e){setTimeout(function(){throw e})}function Vo(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),Mr(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);Mr(t)}function on(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Wu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Qn=Math.random().toString(36).slice(2),$t="__reactFiber$"+Qn,Kr="__reactProps$"+Qn,Wt="__reactContainer$"+Qn,Ho="__reactEvents$"+Qn,Jf="__reactListeners$"+Qn,Qf="__reactHandles$"+Qn;function xn(e){var t=e[$t];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Wt]||i[$t]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Wu(e);e!==null;){if(i=e[$t])return i;e=Wu(e)}return t}e=i,i=e.parentNode}return null}function Gr(e){return e=e[$t]||e[Wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Js(e){return e[Kr]||null}var qo=[],Xn=-1;function an(e){return{current:e}}function xe(e){0>Xn||(e.current=qo[Xn],qo[Xn]=null,Xn--)}function _e(e,t){Xn++,qo[Xn]=e.current,e.current=t}var ln={},Qe=an(ln),rt=an(!1),bn=ln;function Zn(e,t){var i=e.type.contextTypes;if(!i)return ln;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in i)c[h]=t[h];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function st(e){return e=e.childContextTypes,e!=null}function Qs(){xe(rt),xe(Qe)}function Vu(e,t,i){if(Qe.current!==ln)throw Error(r(168));_e(Qe,t),_e(rt,i)}function Hu(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(r(108,ge(e)||"Unknown",c));return W({},i,a)}function Ys(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ln,bn=Qe.current,_e(Qe,e),_e(rt,rt.current),!0}function qu(e,t,i){var a=e.stateNode;if(!a)throw Error(r(169));i?(e=Hu(e,t,bn),a.__reactInternalMemoizedMergedChildContext=e,xe(rt),xe(Qe),_e(Qe,e)):xe(rt),_e(rt,i)}var Vt=null,Xs=!1,Ko=!1;function Ku(e){Vt===null?Vt=[e]:Vt.push(e)}function Yf(e){Xs=!0,Ku(e)}function un(){if(!Ko&&Vt!==null){Ko=!0;var e=0,t=ve;try{var i=Vt;for(ve=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Vt=null,Xs=!1}catch(c){throw Vt!==null&&(Vt=Vt.slice(e+1)),Jl(mo,un),c}finally{ve=t,Ko=!1}}return null}var er=[],tr=0,Zs=null,ei=0,_t=[],St=0,En=null,Ht=1,qt="";function Tn(e,t){er[tr++]=ei,er[tr++]=Zs,Zs=e,ei=t}function Gu(e,t,i){_t[St++]=Ht,_t[St++]=qt,_t[St++]=En,En=e;var a=Ht;e=qt;var c=32-Tt(a)-1;a&=~(1<<c),i+=1;var h=32-Tt(t)+c;if(30<h){var g=c-c%5;h=(a&(1<<g)-1).toString(32),a>>=g,c-=g,Ht=1<<32-Tt(t)+c|i<<c|a,qt=h+e}else Ht=1<<h|i<<c|a,qt=e}function Go(e){e.return!==null&&(Tn(e,1),Gu(e,1,0))}function Jo(e){for(;e===Zs;)Zs=er[--tr],er[tr]=null,ei=er[--tr],er[tr]=null;for(;e===En;)En=_t[--St],_t[St]=null,qt=_t[--St],_t[St]=null,Ht=_t[--St],_t[St]=null}var mt=null,gt=null,Te=!1,Ct=null;function Ju(e,t){var i=Et(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Qu(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mt=e,gt=on(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mt=e,gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=En!==null?{id:Ht,overflow:qt}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Et(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,mt=e,gt=null,!0):!1;default:return!1}}function Qo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yo(e){if(Te){var t=gt;if(t){var i=t;if(!Qu(e,t)){if(Qo(e))throw Error(r(418));t=on(i.nextSibling);var a=mt;t&&Qu(e,t)?Ju(a,i):(e.flags=e.flags&-4097|2,Te=!1,mt=e)}}else{if(Qo(e))throw Error(r(418));e.flags=e.flags&-4097|2,Te=!1,mt=e}}}function Yu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mt=e}function ti(e){if(e!==mt)return!1;if(!Te)return Yu(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zo(e.type,e.memoizedProps)),t&&(t=gt)){if(Qo(e))throw Xu(),Error(r(418));for(;t;)Ju(e,t),t=on(t.nextSibling)}if(Yu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){gt=on(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}gt=null}}else gt=mt?on(e.stateNode.nextSibling):null;return!0}function Xu(){for(var e=gt;e;)e=on(e.nextSibling)}function nr(){gt=mt=null,Te=!1}function Xo(e){Ct===null?Ct=[e]:Ct.push(e)}var Xf=I.ReactCurrentBatchConfig;function Jr(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(r(309));var a=i.stateNode}if(!a)throw Error(r(147,e));var c=a,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(g){var _=c.refs;g===null?delete _[h]:_[h]=g},t._stringRef=h,t)}if(typeof e!="string")throw Error(r(284));if(!i._owner)throw Error(r(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zu(e){var t=e._init;return t(e._payload)}function ec(e){function t(N,E){if(e){var A=N.deletions;A===null?(N.deletions=[E],N.flags|=16):A.push(E)}}function i(N,E){if(!e)return null;for(;E!==null;)t(N,E),E=E.sibling;return null}function a(N,E){for(N=new Map;E!==null;)E.key!==null?N.set(E.key,E):N.set(E.index,E),E=E.sibling;return N}function c(N,E){return N=vn(N,E),N.index=0,N.sibling=null,N}function h(N,E,A){return N.index=A,e?(A=N.alternate,A!==null?(A=A.index,A<E?(N.flags|=2,E):A):(N.flags|=2,E)):(N.flags|=1048576,E)}function g(N){return e&&N.alternate===null&&(N.flags|=2),N}function _(N,E,A,B){return E===null||E.tag!==6?(E=Wa(A,N.mode,B),E.return=N,E):(E=c(E,A),E.return=N,E)}function x(N,E,A,B){var Y=A.type;return Y===Z?U(N,E,A.props.children,B,A.key):E!==null&&(E.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===De&&Zu(Y)===E.type)?(B=c(E,A.props),B.ref=Jr(N,E,A),B.return=N,B):(B=Ti(A.type,A.key,A.props,null,N.mode,B),B.ref=Jr(N,E,A),B.return=N,B)}function R(N,E,A,B){return E===null||E.tag!==4||E.stateNode.containerInfo!==A.containerInfo||E.stateNode.implementation!==A.implementation?(E=Va(A,N.mode,B),E.return=N,E):(E=c(E,A.children||[]),E.return=N,E)}function U(N,E,A,B,Y){return E===null||E.tag!==7?(E=In(A,N.mode,B,Y),E.return=N,E):(E=c(E,A),E.return=N,E)}function F(N,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Wa(""+E,N.mode,A),E.return=N,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case G:return A=Ti(E.type,E.key,E.props,null,N.mode,A),A.ref=Jr(N,null,E),A.return=N,A;case H:return E=Va(E,N.mode,A),E.return=N,E;case De:var B=E._init;return F(N,B(E._payload),A)}if(br(E)||ee(E))return E=In(E,N.mode,A,null),E.return=N,E;ni(N,E)}return null}function $(N,E,A,B){var Y=E!==null?E.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return Y!==null?null:_(N,E,""+A,B);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case G:return A.key===Y?x(N,E,A,B):null;case H:return A.key===Y?R(N,E,A,B):null;case De:return Y=A._init,$(N,E,Y(A._payload),B)}if(br(A)||ee(A))return Y!==null?null:U(N,E,A,B,null);ni(N,A)}return null}function q(N,E,A,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number")return N=N.get(A)||null,_(E,N,""+B,Y);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case G:return N=N.get(B.key===null?A:B.key)||null,x(E,N,B,Y);case H:return N=N.get(B.key===null?A:B.key)||null,R(E,N,B,Y);case De:var te=B._init;return q(N,E,A,te(B._payload),Y)}if(br(B)||ee(B))return N=N.get(A)||null,U(E,N,B,Y,null);ni(E,B)}return null}function J(N,E,A,B){for(var Y=null,te=null,ne=E,ie=E=0,Ve=null;ne!==null&&ie<A.length;ie++){ne.index>ie?(Ve=ne,ne=null):Ve=ne.sibling;var me=$(N,ne,A[ie],B);if(me===null){ne===null&&(ne=Ve);break}e&&ne&&me.alternate===null&&t(N,ne),E=h(me,E,ie),te===null?Y=me:te.sibling=me,te=me,ne=Ve}if(ie===A.length)return i(N,ne),Te&&Tn(N,ie),Y;if(ne===null){for(;ie<A.length;ie++)ne=F(N,A[ie],B),ne!==null&&(E=h(ne,E,ie),te===null?Y=ne:te.sibling=ne,te=ne);return Te&&Tn(N,ie),Y}for(ne=a(N,ne);ie<A.length;ie++)Ve=q(ne,N,ie,A[ie],B),Ve!==null&&(e&&Ve.alternate!==null&&ne.delete(Ve.key===null?ie:Ve.key),E=h(Ve,E,ie),te===null?Y=Ve:te.sibling=Ve,te=Ve);return e&&ne.forEach(function(yn){return t(N,yn)}),Te&&Tn(N,ie),Y}function Q(N,E,A,B){var Y=ee(A);if(typeof Y!="function")throw Error(r(150));if(A=Y.call(A),A==null)throw Error(r(151));for(var te=Y=null,ne=E,ie=E=0,Ve=null,me=A.next();ne!==null&&!me.done;ie++,me=A.next()){ne.index>ie?(Ve=ne,ne=null):Ve=ne.sibling;var yn=$(N,ne,me.value,B);if(yn===null){ne===null&&(ne=Ve);break}e&&ne&&yn.alternate===null&&t(N,ne),E=h(yn,E,ie),te===null?Y=yn:te.sibling=yn,te=yn,ne=Ve}if(me.done)return i(N,ne),Te&&Tn(N,ie),Y;if(ne===null){for(;!me.done;ie++,me=A.next())me=F(N,me.value,B),me!==null&&(E=h(me,E,ie),te===null?Y=me:te.sibling=me,te=me);return Te&&Tn(N,ie),Y}for(ne=a(N,ne);!me.done;ie++,me=A.next())me=q(ne,N,ie,me.value,B),me!==null&&(e&&me.alternate!==null&&ne.delete(me.key===null?ie:me.key),E=h(me,E,ie),te===null?Y=me:te.sibling=me,te=me);return e&&ne.forEach(function(Ap){return t(N,Ap)}),Te&&Tn(N,ie),Y}function Re(N,E,A,B){if(typeof A=="object"&&A!==null&&A.type===Z&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case G:e:{for(var Y=A.key,te=E;te!==null;){if(te.key===Y){if(Y=A.type,Y===Z){if(te.tag===7){i(N,te.sibling),E=c(te,A.props.children),E.return=N,N=E;break e}}else if(te.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===De&&Zu(Y)===te.type){i(N,te.sibling),E=c(te,A.props),E.ref=Jr(N,te,A),E.return=N,N=E;break e}i(N,te);break}else t(N,te);te=te.sibling}A.type===Z?(E=In(A.props.children,N.mode,B,A.key),E.return=N,N=E):(B=Ti(A.type,A.key,A.props,null,N.mode,B),B.ref=Jr(N,E,A),B.return=N,N=B)}return g(N);case H:e:{for(te=A.key;E!==null;){if(E.key===te)if(E.tag===4&&E.stateNode.containerInfo===A.containerInfo&&E.stateNode.implementation===A.implementation){i(N,E.sibling),E=c(E,A.children||[]),E.return=N,N=E;break e}else{i(N,E);break}else t(N,E);E=E.sibling}E=Va(A,N.mode,B),E.return=N,N=E}return g(N);case De:return te=A._init,Re(N,E,te(A._payload),B)}if(br(A))return J(N,E,A,B);if(ee(A))return Q(N,E,A,B);ni(N,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,E!==null&&E.tag===6?(i(N,E.sibling),E=c(E,A),E.return=N,N=E):(i(N,E),E=Wa(A,N.mode,B),E.return=N,N=E),g(N)):i(N,E)}return Re}var rr=ec(!0),tc=ec(!1),ri=an(null),si=null,sr=null,Zo=null;function ea(){Zo=sr=si=null}function ta(e){var t=ri.current;xe(ri),e._currentValue=t}function na(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function ir(e,t){si=e,Zo=sr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(it=!0),e.firstContext=null)}function kt(e){var t=e._currentValue;if(Zo!==e)if(e={context:e,memoizedValue:t,next:null},sr===null){if(si===null)throw Error(r(308));sr=e,si.dependencies={lanes:0,firstContext:e}}else sr=sr.next=e;return t}var jn=null;function ra(e){jn===null?jn=[e]:jn.push(e)}function nc(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,ra(t)):(i.next=c.next,c.next=i),t.interleaved=i,Kt(e,a)}function Kt(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var cn=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dn(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(fe&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Kt(e,i)}return c=a.interleaved,c===null?(t.next=t,ra(a)):(t.next=c.next,c.next=t),a.interleaved=t,Kt(e,i)}function ii(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,yo(e,i)}}function sc(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};h===null?c=h=g:h=h.next=g,i=i.next}while(i!==null);h===null?c=h=t:h=h.next=t}else c=h=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function oi(e,t,i,a){var c=e.updateQueue;cn=!1;var h=c.firstBaseUpdate,g=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var x=_,R=x.next;x.next=null,g===null?h=R:g.next=R,g=x;var U=e.alternate;U!==null&&(U=U.updateQueue,_=U.lastBaseUpdate,_!==g&&(_===null?U.firstBaseUpdate=R:_.next=R,U.lastBaseUpdate=x))}if(h!==null){var F=c.baseState;g=0,U=R=x=null,_=h;do{var $=_.lane,q=_.eventTime;if((a&$)===$){U!==null&&(U=U.next={eventTime:q,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var J=e,Q=_;switch($=t,q=i,Q.tag){case 1:if(J=Q.payload,typeof J=="function"){F=J.call(q,F,$);break e}F=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=Q.payload,$=typeof J=="function"?J.call(q,F,$):J,$==null)break e;F=W({},F,$);break e;case 2:cn=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,$=c.effects,$===null?c.effects=[_]:$.push(_))}else q={eventTime:q,lane:$,tag:_.tag,payload:_.payload,callback:_.callback,next:null},U===null?(R=U=q,x=F):U=U.next=q,g|=$;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;$=_,_=$.next,$.next=null,c.lastBaseUpdate=$,c.shared.pending=null}}while(!0);if(U===null&&(x=F),c.baseState=x,c.firstBaseUpdate=R,c.lastBaseUpdate=U,t=c.shared.interleaved,t!==null){c=t;do g|=c.lane,c=c.next;while(c!==t)}else h===null&&(c.shared.lanes=0);Nn|=g,e.lanes=g,e.memoizedState=F}}function ic(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(r(191,c));c.call(a)}}}var Qr={},Ut=an(Qr),Yr=an(Qr),Xr=an(Qr);function Cn(e){if(e===Qr)throw Error(r(174));return e}function ia(e,t){switch(_e(Xr,t),_e(Yr,e),_e(Ut,Qr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:io(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=io(t,e)}xe(Ut),_e(Ut,t)}function or(){xe(Ut),xe(Yr),xe(Xr)}function oc(e){Cn(Xr.current);var t=Cn(Ut.current),i=io(t,e.type);t!==i&&(_e(Yr,e),_e(Ut,i))}function oa(e){Yr.current===e&&(xe(Ut),xe(Yr))}var je=an(0);function ai(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var aa=[];function la(){for(var e=0;e<aa.length;e++)aa[e]._workInProgressVersionPrimary=null;aa.length=0}var li=I.ReactCurrentDispatcher,ua=I.ReactCurrentBatchConfig,Pn=0,Ce=null,$e=null,ze=null,ui=!1,Zr=!1,es=0,Zf=0;function Ye(){throw Error(r(321))}function ca(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!jt(e[i],t[i]))return!1;return!0}function da(e,t,i,a,c,h){if(Pn=h,Ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,li.current=e===null||e.memoizedState===null?rp:sp,e=i(a,c),Zr){h=0;do{if(Zr=!1,es=0,25<=h)throw Error(r(301));h+=1,ze=$e=null,t.updateQueue=null,li.current=ip,e=i(a,c)}while(Zr)}if(li.current=hi,t=$e!==null&&$e.next!==null,Pn=0,ze=$e=Ce=null,ui=!1,t)throw Error(r(300));return e}function ha(){var e=es!==0;return es=0,e}function Ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Ce.memoizedState=ze=e:ze=ze.next=e,ze}function xt(){if($e===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=ze===null?Ce.memoizedState:ze.next;if(t!==null)ze=t,$e=e;else{if(e===null)throw Error(r(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},ze===null?Ce.memoizedState=ze=e:ze=ze.next=e}return ze}function ts(e,t){return typeof t=="function"?t(e):t}function fa(e){var t=xt(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var a=$e,c=a.baseQueue,h=i.pending;if(h!==null){if(c!==null){var g=c.next;c.next=h.next,h.next=g}a.baseQueue=c=h,i.pending=null}if(c!==null){h=c.next,a=a.baseState;var _=g=null,x=null,R=h;do{var U=R.lane;if((Pn&U)===U)x!==null&&(x=x.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),a=R.hasEagerState?R.eagerState:e(a,R.action);else{var F={lane:U,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};x===null?(_=x=F,g=a):x=x.next=F,Ce.lanes|=U,Nn|=U}R=R.next}while(R!==null&&R!==h);x===null?g=a:x.next=_,jt(a,t.memoizedState)||(it=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=x,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do h=c.lane,Ce.lanes|=h,Nn|=h,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function pa(e){var t=xt(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,h=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do h=e(h,g.action),g=g.next;while(g!==c);jt(h,t.memoizedState)||(it=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),i.lastRenderedState=h}return[h,a]}function ac(){}function lc(e,t){var i=Ce,a=xt(),c=t(),h=!jt(a.memoizedState,c);if(h&&(a.memoizedState=c,it=!0),a=a.queue,ma(dc.bind(null,i,a,e),[e]),a.getSnapshot!==t||h||ze!==null&&ze.memoizedState.tag&1){if(i.flags|=2048,ns(9,cc.bind(null,i,a,c,t),void 0,null),We===null)throw Error(r(349));(Pn&30)!==0||uc(i,t,c)}return c}function uc(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function cc(e,t,i,a){t.value=i,t.getSnapshot=a,hc(t)&&fc(e)}function dc(e,t,i){return i(function(){hc(t)&&fc(e)})}function hc(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!jt(e,i)}catch{return!0}}function fc(e){var t=Kt(e,1);t!==null&&Rt(t,e,1,-1)}function pc(e){var t=Ft();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:e},t.queue=e,e=e.dispatch=np.bind(null,Ce,e),[t.memoizedState,e]}function ns(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function mc(){return xt().memoizedState}function ci(e,t,i,a){var c=Ft();Ce.flags|=e,c.memoizedState=ns(1|t,i,void 0,a===void 0?null:a)}function di(e,t,i,a){var c=xt();a=a===void 0?null:a;var h=void 0;if($e!==null){var g=$e.memoizedState;if(h=g.destroy,a!==null&&ca(a,g.deps)){c.memoizedState=ns(t,i,h,a);return}}Ce.flags|=e,c.memoizedState=ns(1|t,i,h,a)}function gc(e,t){return ci(8390656,8,e,t)}function ma(e,t){return di(2048,8,e,t)}function vc(e,t){return di(4,2,e,t)}function yc(e,t){return di(4,4,e,t)}function wc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _c(e,t,i){return i=i!=null?i.concat([e]):null,di(4,4,wc.bind(null,t,e),i)}function ga(){}function Sc(e,t){var i=xt();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&ca(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function kc(e,t){var i=xt();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&ca(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function xc(e,t,i){return(Pn&21)===0?(e.baseState&&(e.baseState=!1,it=!0),e.memoizedState=i):(jt(i,t)||(i=Zl(),Ce.lanes|=i,Nn|=i,e.baseState=!0),t)}function ep(e,t){var i=ve;ve=i!==0&&4>i?i:4,e(!0);var a=ua.transition;ua.transition={};try{e(!1),t()}finally{ve=i,ua.transition=a}}function bc(){return xt().memoizedState}function tp(e,t,i){var a=mn(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},Ec(e))Tc(t,i);else if(i=nc(e,t,i,a),i!==null){var c=nt();Rt(i,e,a,c),jc(i,t,a)}}function np(e,t,i){var a=mn(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ec(e))Tc(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var g=t.lastRenderedState,_=h(g,i);if(c.hasEagerState=!0,c.eagerState=_,jt(_,g)){var x=t.interleaved;x===null?(c.next=c,ra(t)):(c.next=x.next,x.next=c),t.interleaved=c;return}}catch{}finally{}i=nc(e,t,c,a),i!==null&&(c=nt(),Rt(i,e,a,c),jc(i,t,a))}}function Ec(e){var t=e.alternate;return e===Ce||t!==null&&t===Ce}function Tc(e,t){Zr=ui=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function jc(e,t,i){if((i&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,yo(e,i)}}var hi={readContext:kt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},rp={readContext:kt,useCallback:function(e,t){return Ft().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:gc,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,ci(4194308,4,wc.bind(null,t,e),i)},useLayoutEffect:function(e,t){return ci(4194308,4,e,t)},useInsertionEffect:function(e,t){return ci(4,2,e,t)},useMemo:function(e,t){var i=Ft();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=Ft();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=tp.bind(null,Ce,e),[a.memoizedState,e]},useRef:function(e){var t=Ft();return e={current:e},t.memoizedState=e},useState:pc,useDebugValue:ga,useDeferredValue:function(e){return Ft().memoizedState=e},useTransition:function(){var e=pc(!1),t=e[0];return e=ep.bind(null,e[1]),Ft().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Ce,c=Ft();if(Te){if(i===void 0)throw Error(r(407));i=i()}else{if(i=t(),We===null)throw Error(r(349));(Pn&30)!==0||uc(a,t,i)}c.memoizedState=i;var h={value:i,getSnapshot:t};return c.queue=h,gc(dc.bind(null,a,h,e),[e]),a.flags|=2048,ns(9,cc.bind(null,a,h,i,t),void 0,null),i},useId:function(){var e=Ft(),t=We.identifierPrefix;if(Te){var i=qt,a=Ht;i=(a&~(1<<32-Tt(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=es++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Zf++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sp={readContext:kt,useCallback:Sc,useContext:kt,useEffect:ma,useImperativeHandle:_c,useInsertionEffect:vc,useLayoutEffect:yc,useMemo:kc,useReducer:fa,useRef:mc,useState:function(){return fa(ts)},useDebugValue:ga,useDeferredValue:function(e){var t=xt();return xc(t,$e.memoizedState,e)},useTransition:function(){var e=fa(ts)[0],t=xt().memoizedState;return[e,t]},useMutableSource:ac,useSyncExternalStore:lc,useId:bc,unstable_isNewReconciler:!1},ip={readContext:kt,useCallback:Sc,useContext:kt,useEffect:ma,useImperativeHandle:_c,useInsertionEffect:vc,useLayoutEffect:yc,useMemo:kc,useReducer:pa,useRef:mc,useState:function(){return pa(ts)},useDebugValue:ga,useDeferredValue:function(e){var t=xt();return $e===null?t.memoizedState=e:xc(t,$e.memoizedState,e)},useTransition:function(){var e=pa(ts)[0],t=xt().memoizedState;return[e,t]},useMutableSource:ac,useSyncExternalStore:lc,useId:bc,unstable_isNewReconciler:!1};function Pt(e,t){if(e&&e.defaultProps){t=W({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function va(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:W({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var fi={isMounted:function(e){return(e=e._reactInternals)?kn(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=nt(),c=mn(e),h=Gt(a,c);h.payload=t,i!=null&&(h.callback=i),t=dn(e,h,c),t!==null&&(Rt(t,e,c,a),ii(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=nt(),c=mn(e),h=Gt(a,c);h.tag=1,h.payload=t,i!=null&&(h.callback=i),t=dn(e,h,c),t!==null&&(Rt(t,e,c,a),ii(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=nt(),a=mn(e),c=Gt(i,a);c.tag=2,t!=null&&(c.callback=t),t=dn(e,c,a),t!==null&&(Rt(t,e,a,i),ii(t,e,a))}};function Cc(e,t,i,a,c,h,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,g):t.prototype&&t.prototype.isPureReactComponent?!zr(i,a)||!zr(c,h):!0}function Pc(e,t,i){var a=!1,c=ln,h=t.contextType;return typeof h=="object"&&h!==null?h=kt(h):(c=st(t)?bn:Qe.current,a=t.contextTypes,h=(a=a!=null)?Zn(e,c):ln),t=new t(i,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fi,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=h),t}function Nc(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&fi.enqueueReplaceState(t,t.state,null)}function ya(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs={},sa(e);var h=t.contextType;typeof h=="object"&&h!==null?c.context=kt(h):(h=st(t)?bn:Qe.current,c.context=Zn(e,h)),c.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(va(e,t,h,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&fi.enqueueReplaceState(c,c.state,null),oi(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function ar(e,t){try{var i="",a=t;do i+=M(a),a=a.return;while(a);var c=i}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:c,digest:null}}function wa(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function _a(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var op=typeof WeakMap=="function"?WeakMap:Map;function Ac(e,t,i){i=Gt(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){_i||(_i=!0,La=a),_a(e,t)},i}function Rc(e,t,i){i=Gt(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){_a(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(i.callback=function(){_a(e,t),typeof a!="function"&&(fn===null?fn=new Set([this]):fn.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),i}function Oc(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new op;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=_p.bind(null,e,t,i),t.then(e,e))}function Ic(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lc(e,t,i,a,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Gt(-1,1),t.tag=2,dn(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var ap=I.ReactCurrentOwner,it=!1;function tt(e,t,i,a){t.child=e===null?tc(t,null,i,a):rr(t,e.child,i,a)}function Mc(e,t,i,a,c){i=i.render;var h=t.ref;return ir(t,c),a=da(e,t,i,a,h,c),i=ha(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Jt(e,t,c)):(Te&&i&&Go(t),t.flags|=1,tt(e,t,a,c),t.child)}function Dc(e,t,i,a,c){if(e===null){var h=i.type;return typeof h=="function"&&!za(h)&&h.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=h,$c(e,t,h,a,c)):(e=Ti(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&c)===0){var g=h.memoizedProps;if(i=i.compare,i=i!==null?i:zr,i(g,a)&&e.ref===t.ref)return Jt(e,t,c)}return t.flags|=1,e=vn(h,a),e.ref=t.ref,e.return=t,t.child=e}function $c(e,t,i,a,c){if(e!==null){var h=e.memoizedProps;if(zr(h,a)&&e.ref===t.ref)if(it=!1,t.pendingProps=a=h,(e.lanes&c)!==0)(e.flags&131072)!==0&&(it=!0);else return t.lanes=e.lanes,Jt(e,t,c)}return Sa(e,t,i,a,c)}function Uc(e,t,i){var a=t.pendingProps,c=a.children,h=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(ur,vt),vt|=i;else{if((i&1073741824)===0)return e=h!==null?h.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(ur,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:i,_e(ur,vt),vt|=a}else h!==null?(a=h.baseLanes|i,t.memoizedState=null):a=i,_e(ur,vt),vt|=a;return tt(e,t,c,i),t.child}function Fc(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Sa(e,t,i,a,c){var h=st(i)?bn:Qe.current;return h=Zn(t,h),ir(t,c),i=da(e,t,i,a,h,c),a=ha(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Jt(e,t,c)):(Te&&a&&Go(t),t.flags|=1,tt(e,t,i,c),t.child)}function Bc(e,t,i,a,c){if(st(i)){var h=!0;Ys(t)}else h=!1;if(ir(t,c),t.stateNode===null)mi(e,t),Pc(t,i,a),ya(t,i,a,c),a=!0;else if(e===null){var g=t.stateNode,_=t.memoizedProps;g.props=_;var x=g.context,R=i.contextType;typeof R=="object"&&R!==null?R=kt(R):(R=st(i)?bn:Qe.current,R=Zn(t,R));var U=i.getDerivedStateFromProps,F=typeof U=="function"||typeof g.getSnapshotBeforeUpdate=="function";F||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==a||x!==R)&&Nc(t,g,a,R),cn=!1;var $=t.memoizedState;g.state=$,oi(t,a,g,c),x=t.memoizedState,_!==a||$!==x||rt.current||cn?(typeof U=="function"&&(va(t,i,U,a),x=t.memoizedState),(_=cn||Cc(t,i,_,a,$,x,R))?(F||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=x),g.props=a,g.state=x,g.context=R,a=_):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,rc(e,t),_=t.memoizedProps,R=t.type===t.elementType?_:Pt(t.type,_),g.props=R,F=t.pendingProps,$=g.context,x=i.contextType,typeof x=="object"&&x!==null?x=kt(x):(x=st(i)?bn:Qe.current,x=Zn(t,x));var q=i.getDerivedStateFromProps;(U=typeof q=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==F||$!==x)&&Nc(t,g,a,x),cn=!1,$=t.memoizedState,g.state=$,oi(t,a,g,c);var J=t.memoizedState;_!==F||$!==J||rt.current||cn?(typeof q=="function"&&(va(t,i,q,a),J=t.memoizedState),(R=cn||Cc(t,i,R,a,$,J,x)||!1)?(U||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,J,x),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,J,x)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=J),g.props=a,g.state=J,g.context=x,a=R):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),a=!1)}return ka(e,t,i,a,h,c)}function ka(e,t,i,a,c,h){Fc(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return c&&qu(t,i,!1),Jt(e,t,h);a=t.stateNode,ap.current=t;var _=g&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=rr(t,e.child,null,h),t.child=rr(t,null,_,h)):tt(e,t,_,h),t.memoizedState=a.state,c&&qu(t,i,!0),t.child}function zc(e){var t=e.stateNode;t.pendingContext?Vu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vu(e,t.context,!1),ia(e,t.containerInfo)}function Wc(e,t,i,a,c){return nr(),Xo(c),t.flags|=256,tt(e,t,i,a),t.child}var xa={dehydrated:null,treeContext:null,retryLane:0};function ba(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vc(e,t,i){var a=t.pendingProps,c=je.current,h=!1,g=(t.flags&128)!==0,_;if((_=g)||(_=e!==null&&e.memoizedState===null?!1:(c&2)!==0),_?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),_e(je,c&1),e===null)return Yo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=a.children,e=a.fallback,h?(a=t.mode,h=t.child,g={mode:"hidden",children:g},(a&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=g):h=ji(g,a,0,null),e=In(e,a,i,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=ba(i),t.memoizedState=xa,e):Ea(t,g));if(c=e.memoizedState,c!==null&&(_=c.dehydrated,_!==null))return lp(e,t,g,a,_,c,i);if(h){h=a.fallback,g=t.mode,c=e.child,_=c.sibling;var x={mode:"hidden",children:a.children};return(g&1)===0&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=x,t.deletions=null):(a=vn(c,x),a.subtreeFlags=c.subtreeFlags&14680064),_!==null?h=vn(_,h):(h=In(h,g,i,null),h.flags|=2),h.return=t,a.return=t,a.sibling=h,t.child=a,a=h,h=t.child,g=e.child.memoizedState,g=g===null?ba(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},h.memoizedState=g,h.childLanes=e.childLanes&~i,t.memoizedState=xa,a}return h=e.child,e=h.sibling,a=vn(h,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function Ea(e,t){return t=ji({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pi(e,t,i,a){return a!==null&&Xo(a),rr(t,e.child,null,i),e=Ea(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lp(e,t,i,a,c,h,g){if(i)return t.flags&256?(t.flags&=-257,a=wa(Error(r(422))),pi(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=a.fallback,c=t.mode,a=ji({mode:"visible",children:a.children},c,0,null),h=In(h,c,g,null),h.flags|=2,a.return=t,h.return=t,a.sibling=h,t.child=a,(t.mode&1)!==0&&rr(t,e.child,null,g),t.child.memoizedState=ba(g),t.memoizedState=xa,h);if((t.mode&1)===0)return pi(e,t,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var _=a.dgst;return a=_,h=Error(r(419)),a=wa(h,a,void 0),pi(e,t,g,a)}if(_=(g&e.childLanes)!==0,it||_){if(a=We,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(a.suspendedLanes|g))!==0?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,Kt(e,c),Rt(a,e,c,-1))}return Ba(),a=wa(Error(r(421))),pi(e,t,g,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Sp.bind(null,e),c._reactRetry=t,null):(e=h.treeContext,gt=on(c.nextSibling),mt=t,Te=!0,Ct=null,e!==null&&(_t[St++]=Ht,_t[St++]=qt,_t[St++]=En,Ht=e.id,qt=e.overflow,En=t),t=Ea(t,a.children),t.flags|=4096,t)}function Hc(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),na(e.return,t,i)}function Ta(e,t,i,a,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=i,h.tailMode=c)}function qc(e,t,i){var a=t.pendingProps,c=a.revealOrder,h=a.tail;if(tt(e,t,a.children,i),a=je.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hc(e,i,t);else if(e.tag===19)Hc(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(_e(je,a),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&ai(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Ta(t,!1,c,i,h);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&ai(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Ta(t,!0,i,null,h);break;case"together":Ta(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Nn|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,i=vn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=vn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function up(e,t,i){switch(t.tag){case 3:zc(t),nr();break;case 5:oc(t);break;case 1:st(t.type)&&Ys(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;_e(ri,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(_e(je,je.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?Vc(e,t,i):(_e(je,je.current&1),e=Jt(e,t,i),e!==null?e.sibling:null);_e(je,je.current&1);break;case 19:if(a=(i&t.childLanes)!==0,(e.flags&128)!==0){if(a)return qc(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),_e(je,je.current),a)break;return null;case 22:case 23:return t.lanes=0,Uc(e,t,i)}return Jt(e,t,i)}var Kc,ja,Gc,Jc;Kc=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},ja=function(){},Gc=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Cn(Ut.current);var h=null;switch(i){case"input":c=to(e,c),a=to(e,a),h=[];break;case"select":c=W({},c,{value:void 0}),a=W({},a,{value:void 0}),h=[];break;case"textarea":c=so(e,c),a=so(e,a),h=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Gs)}oo(i,a);var g;i=null;for(R in c)if(!a.hasOwnProperty(R)&&c.hasOwnProperty(R)&&c[R]!=null)if(R==="style"){var _=c[R];for(g in _)_.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(l.hasOwnProperty(R)?h||(h=[]):(h=h||[]).push(R,null));for(R in a){var x=a[R];if(_=c!=null?c[R]:void 0,a.hasOwnProperty(R)&&x!==_&&(x!=null||_!=null))if(R==="style")if(_){for(g in _)!_.hasOwnProperty(g)||x&&x.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in x)x.hasOwnProperty(g)&&_[g]!==x[g]&&(i||(i={}),i[g]=x[g])}else i||(h||(h=[]),h.push(R,i)),i=x;else R==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,_=_?_.__html:void 0,x!=null&&_!==x&&(h=h||[]).push(R,x)):R==="children"?typeof x!="string"&&typeof x!="number"||(h=h||[]).push(R,""+x):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(l.hasOwnProperty(R)?(x!=null&&R==="onScroll"&&ke("scroll",e),h||_===x||(h=[])):(h=h||[]).push(R,x))}i&&(h=h||[]).push("style",i);var R=h;(t.updateQueue=R)&&(t.flags|=4)}},Jc=function(e,t,i,a){i!==a&&(t.flags|=4)};function rs(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function cp(e,t,i){var a=t.pendingProps;switch(Jo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return st(t.type)&&Qs(),Xe(t),null;case 3:return a=t.stateNode,or(),xe(rt),xe(Qe),la(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ti(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ct!==null&&($a(Ct),Ct=null))),ja(e,t),Xe(t),null;case 5:oa(t);var c=Cn(Xr.current);if(i=t.type,e!==null&&t.stateNode!=null)Gc(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(r(166));return Xe(t),null}if(e=Cn(Ut.current),ti(t)){a=t.stateNode,i=t.type;var h=t.memoizedProps;switch(a[$t]=t,a[Kr]=h,e=(t.mode&1)!==0,i){case"dialog":ke("cancel",a),ke("close",a);break;case"iframe":case"object":case"embed":ke("load",a);break;case"video":case"audio":for(c=0;c<Vr.length;c++)ke(Vr[c],a);break;case"source":ke("error",a);break;case"img":case"image":case"link":ke("error",a),ke("load",a);break;case"details":ke("toggle",a);break;case"input":Pl(a,h),ke("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},ke("invalid",a);break;case"textarea":Rl(a,h),ke("invalid",a)}oo(i,h),c=null;for(var g in h)if(h.hasOwnProperty(g)){var _=h[g];g==="children"?typeof _=="string"?a.textContent!==_&&(h.suppressHydrationWarning!==!0&&Ks(a.textContent,_,e),c=["children",_]):typeof _=="number"&&a.textContent!==""+_&&(h.suppressHydrationWarning!==!0&&Ks(a.textContent,_,e),c=["children",""+_]):l.hasOwnProperty(g)&&_!=null&&g==="onScroll"&&ke("scroll",a)}switch(i){case"input":bs(a),Al(a,h,!0);break;case"textarea":bs(a),Il(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=Gs)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ll(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(i,{is:a.is}):(e=g.createElement(i),i==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,i),e[$t]=t,e[Kr]=a,Kc(e,t,!1,!1),t.stateNode=e;e:{switch(g=ao(i,a),i){case"dialog":ke("cancel",e),ke("close",e),c=a;break;case"iframe":case"object":case"embed":ke("load",e),c=a;break;case"video":case"audio":for(c=0;c<Vr.length;c++)ke(Vr[c],e);c=a;break;case"source":ke("error",e),c=a;break;case"img":case"image":case"link":ke("error",e),ke("load",e),c=a;break;case"details":ke("toggle",e),c=a;break;case"input":Pl(e,a),c=to(e,a),ke("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=W({},a,{value:void 0}),ke("invalid",e);break;case"textarea":Rl(e,a),c=so(e,a),ke("invalid",e);break;default:c=a}oo(i,c),_=c;for(h in _)if(_.hasOwnProperty(h)){var x=_[h];h==="style"?$l(e,x):h==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Ml(e,x)):h==="children"?typeof x=="string"?(i!=="textarea"||x!=="")&&Er(e,x):typeof x=="number"&&Er(e,""+x):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(l.hasOwnProperty(h)?x!=null&&h==="onScroll"&&ke("scroll",e):x!=null&&b(e,h,x,g))}switch(i){case"input":bs(e),Al(e,a,!1);break;case"textarea":bs(e),Il(e);break;case"option":a.value!=null&&e.setAttribute("value",""+pe(a.value));break;case"select":e.multiple=!!a.multiple,h=a.value,h!=null?Bn(e,!!a.multiple,h,!1):a.defaultValue!=null&&Bn(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Gs)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)Jc(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(r(166));if(i=Cn(Xr.current),Cn(Ut.current),ti(t)){if(a=t.stateNode,i=t.memoizedProps,a[$t]=t,(h=a.nodeValue!==i)&&(e=mt,e!==null))switch(e.tag){case 3:Ks(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ks(a.nodeValue,i,(e.mode&1)!==0)}h&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[$t]=t,t.stateNode=a}return Xe(t),null;case 13:if(xe(je),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&gt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Xu(),nr(),t.flags|=98560,h=!1;else if(h=ti(t),a!==null&&a.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[$t]=t}else nr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),h=!1}else Ct!==null&&($a(Ct),Ct=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(je.current&1)!==0?Ue===0&&(Ue=3):Ba())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return or(),ja(e,t),e===null&&Hr(t.stateNode.containerInfo),Xe(t),null;case 10:return ta(t.type._context),Xe(t),null;case 17:return st(t.type)&&Qs(),Xe(t),null;case 19:if(xe(je),h=t.memoizedState,h===null)return Xe(t),null;if(a=(t.flags&128)!==0,g=h.rendering,g===null)if(a)rs(h,!1);else{if(Ue!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=ai(e),g!==null){for(t.flags|=128,rs(h,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)h=i,e=a,h.flags&=14680066,g=h.alternate,g===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=g.childLanes,h.lanes=g.lanes,h.child=g.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=g.memoizedProps,h.memoizedState=g.memoizedState,h.updateQueue=g.updateQueue,h.type=g.type,e=g.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return _e(je,je.current&1|2),t.child}e=e.sibling}h.tail!==null&&Ae()>cr&&(t.flags|=128,a=!0,rs(h,!1),t.lanes=4194304)}else{if(!a)if(e=ai(g),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),rs(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!Te)return Xe(t),null}else 2*Ae()-h.renderingStartTime>cr&&i!==1073741824&&(t.flags|=128,a=!0,rs(h,!1),t.lanes=4194304);h.isBackwards?(g.sibling=t.child,t.child=g):(i=h.last,i!==null?i.sibling=g:t.child=g,h.last=g)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Ae(),t.sibling=null,i=je.current,_e(je,a?i&1|2:i&1),t):(Xe(t),null);case 22:case 23:return Fa(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(vt&1073741824)!==0&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(r(156,t.tag))}function dp(e,t){switch(Jo(t),t.tag){case 1:return st(t.type)&&Qs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return or(),xe(rt),xe(Qe),la(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return oa(t),null;case 13:if(xe(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));nr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(je),null;case 4:return or(),null;case 10:return ta(t.type._context),null;case 22:case 23:return Fa(),null;case 24:return null;default:return null}}var gi=!1,Ze=!1,hp=typeof WeakSet=="function"?WeakSet:Set,K=null;function lr(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Pe(e,t,a)}else i.current=null}function Ca(e,t,i){try{i()}catch(a){Pe(e,t,a)}}var Qc=!1;function fp(e,t){if(Fo=Ms,e=Cu(),Ro(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var g=0,_=-1,x=-1,R=0,U=0,F=e,$=null;t:for(;;){for(var q;F!==i||c!==0&&F.nodeType!==3||(_=g+c),F!==h||a!==0&&F.nodeType!==3||(x=g+a),F.nodeType===3&&(g+=F.nodeValue.length),(q=F.firstChild)!==null;)$=F,F=q;for(;;){if(F===e)break t;if($===i&&++R===c&&(_=g),$===h&&++U===a&&(x=g),(q=F.nextSibling)!==null)break;F=$,$=F.parentNode}F=q}i=_===-1||x===-1?null:{start:_,end:x}}else i=null}i=i||{start:0,end:0}}else i=null;for(Bo={focusedElem:e,selectionRange:i},Ms=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var J=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(J!==null){var Q=J.memoizedProps,Re=J.memoizedState,N=t.stateNode,E=N.getSnapshotBeforeUpdate(t.elementType===t.type?Q:Pt(t.type,Q),Re);N.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var A=t.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(B){Pe(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return J=Qc,Qc=!1,J}function ss(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var h=c.destroy;c.destroy=void 0,h!==void 0&&Ca(t,i,h)}c=c.next}while(c!==a)}}function vi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function Pa(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function Yc(e){var t=e.alternate;t!==null&&(e.alternate=null,Yc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$t],delete t[Kr],delete t[Ho],delete t[Jf],delete t[Qf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xc(e){return e.tag===5||e.tag===3||e.tag===4}function Zc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Na(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Gs));else if(a!==4&&(e=e.child,e!==null))for(Na(e,t,i),e=e.sibling;e!==null;)Na(e,t,i),e=e.sibling}function Aa(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Aa(e,t,i),e=e.sibling;e!==null;)Aa(e,t,i),e=e.sibling}var qe=null,Nt=!1;function hn(e,t,i){for(i=i.child;i!==null;)ed(e,t,i),i=i.sibling}function ed(e,t,i){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Ns,i)}catch{}switch(i.tag){case 5:Ze||lr(i,t);case 6:var a=qe,c=Nt;qe=null,hn(e,t,i),qe=a,Nt=c,qe!==null&&(Nt?(e=qe,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):qe.removeChild(i.stateNode));break;case 18:qe!==null&&(Nt?(e=qe,i=i.stateNode,e.nodeType===8?Vo(e.parentNode,i):e.nodeType===1&&Vo(e,i),Mr(e)):Vo(qe,i.stateNode));break;case 4:a=qe,c=Nt,qe=i.stateNode.containerInfo,Nt=!0,hn(e,t,i),qe=a,Nt=c;break;case 0:case 11:case 14:case 15:if(!Ze&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var h=c,g=h.destroy;h=h.tag,g!==void 0&&((h&2)!==0||(h&4)!==0)&&Ca(i,t,g),c=c.next}while(c!==a)}hn(e,t,i);break;case 1:if(!Ze&&(lr(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(_){Pe(i,t,_)}hn(e,t,i);break;case 21:hn(e,t,i);break;case 22:i.mode&1?(Ze=(a=Ze)||i.memoizedState!==null,hn(e,t,i),Ze=a):hn(e,t,i);break;default:hn(e,t,i)}}function td(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new hp),t.forEach(function(a){var c=kp.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function At(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var h=e,g=t,_=g;e:for(;_!==null;){switch(_.tag){case 5:qe=_.stateNode,Nt=!1;break e;case 3:qe=_.stateNode.containerInfo,Nt=!0;break e;case 4:qe=_.stateNode.containerInfo,Nt=!0;break e}_=_.return}if(qe===null)throw Error(r(160));ed(h,g,c),qe=null,Nt=!1;var x=c.alternate;x!==null&&(x.return=null),c.return=null}catch(R){Pe(c,t,R)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)nd(t,e),t=t.sibling}function nd(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Bt(e),a&4){try{ss(3,e,e.return),vi(3,e)}catch(Q){Pe(e,e.return,Q)}try{ss(5,e,e.return)}catch(Q){Pe(e,e.return,Q)}}break;case 1:At(t,e),Bt(e),a&512&&i!==null&&lr(i,i.return);break;case 5:if(At(t,e),Bt(e),a&512&&i!==null&&lr(i,i.return),e.flags&32){var c=e.stateNode;try{Er(c,"")}catch(Q){Pe(e,e.return,Q)}}if(a&4&&(c=e.stateNode,c!=null)){var h=e.memoizedProps,g=i!==null?i.memoizedProps:h,_=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{_==="input"&&h.type==="radio"&&h.name!=null&&Nl(c,h),ao(_,g);var R=ao(_,h);for(g=0;g<x.length;g+=2){var U=x[g],F=x[g+1];U==="style"?$l(c,F):U==="dangerouslySetInnerHTML"?Ml(c,F):U==="children"?Er(c,F):b(c,U,F,R)}switch(_){case"input":no(c,h);break;case"textarea":Ol(c,h);break;case"select":var $=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var q=h.value;q!=null?Bn(c,!!h.multiple,q,!1):$!==!!h.multiple&&(h.defaultValue!=null?Bn(c,!!h.multiple,h.defaultValue,!0):Bn(c,!!h.multiple,h.multiple?[]:"",!1))}c[Kr]=h}catch(Q){Pe(e,e.return,Q)}}break;case 6:if(At(t,e),Bt(e),a&4){if(e.stateNode===null)throw Error(r(162));c=e.stateNode,h=e.memoizedProps;try{c.nodeValue=h}catch(Q){Pe(e,e.return,Q)}}break;case 3:if(At(t,e),Bt(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{Mr(t.containerInfo)}catch(Q){Pe(e,e.return,Q)}break;case 4:At(t,e),Bt(e);break;case 13:At(t,e),Bt(e),c=e.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(Ia=Ae())),a&4&&td(e);break;case 22:if(U=i!==null&&i.memoizedState!==null,e.mode&1?(Ze=(R=Ze)||U,At(t,e),Ze=R):At(t,e),Bt(e),a&8192){if(R=e.memoizedState!==null,(e.stateNode.isHidden=R)&&!U&&(e.mode&1)!==0)for(K=e,U=e.child;U!==null;){for(F=K=U;K!==null;){switch($=K,q=$.child,$.tag){case 0:case 11:case 14:case 15:ss(4,$,$.return);break;case 1:lr($,$.return);var J=$.stateNode;if(typeof J.componentWillUnmount=="function"){a=$,i=$.return;try{t=a,J.props=t.memoizedProps,J.state=t.memoizedState,J.componentWillUnmount()}catch(Q){Pe(a,i,Q)}}break;case 5:lr($,$.return);break;case 22:if($.memoizedState!==null){id(F);continue}}q!==null?(q.return=$,K=q):id(F)}U=U.sibling}e:for(U=null,F=e;;){if(F.tag===5){if(U===null){U=F;try{c=F.stateNode,R?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(_=F.stateNode,x=F.memoizedProps.style,g=x!=null&&x.hasOwnProperty("display")?x.display:null,_.style.display=Dl("display",g))}catch(Q){Pe(e,e.return,Q)}}}else if(F.tag===6){if(U===null)try{F.stateNode.nodeValue=R?"":F.memoizedProps}catch(Q){Pe(e,e.return,Q)}}else if((F.tag!==22&&F.tag!==23||F.memoizedState===null||F===e)&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===e)break e;for(;F.sibling===null;){if(F.return===null||F.return===e)break e;U===F&&(U=null),F=F.return}U===F&&(U=null),F.sibling.return=F.return,F=F.sibling}}break;case 19:At(t,e),Bt(e),a&4&&td(e);break;case 21:break;default:At(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(Xc(i)){var a=i;break e}i=i.return}throw Error(r(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Er(c,""),a.flags&=-33);var h=Zc(e);Aa(e,h,c);break;case 3:case 4:var g=a.stateNode.containerInfo,_=Zc(e);Na(e,_,g);break;default:throw Error(r(161))}}catch(x){Pe(e,e.return,x)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pp(e,t,i){K=e,rd(e)}function rd(e,t,i){for(var a=(e.mode&1)!==0;K!==null;){var c=K,h=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||gi;if(!g){var _=c.alternate,x=_!==null&&_.memoizedState!==null||Ze;_=gi;var R=Ze;if(gi=g,(Ze=x)&&!R)for(K=c;K!==null;)g=K,x=g.child,g.tag===22&&g.memoizedState!==null?od(c):x!==null?(x.return=g,K=x):od(c);for(;h!==null;)K=h,rd(h),h=h.sibling;K=c,gi=_,Ze=R}sd(e)}else(c.subtreeFlags&8772)!==0&&h!==null?(h.return=c,K=h):sd(e)}}function sd(e){for(;K!==null;){var t=K;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ze||vi(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ze)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Pt(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&ic(t,h,a);break;case 3:var g=t.updateQueue;if(g!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}ic(t,g,i)}break;case 5:var _=t.stateNode;if(i===null&&t.flags&4){i=_;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&i.focus();break;case"img":x.src&&(i.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var R=t.alternate;if(R!==null){var U=R.memoizedState;if(U!==null){var F=U.dehydrated;F!==null&&Mr(F)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ze||t.flags&512&&Pa(t)}catch($){Pe(t,t.return,$)}}if(t===e){K=null;break}if(i=t.sibling,i!==null){i.return=t.return,K=i;break}K=t.return}}function id(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var i=t.sibling;if(i!==null){i.return=t.return,K=i;break}K=t.return}}function od(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{vi(4,t)}catch(x){Pe(t,i,x)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(x){Pe(t,c,x)}}var h=t.return;try{Pa(t)}catch(x){Pe(t,h,x)}break;case 5:var g=t.return;try{Pa(t)}catch(x){Pe(t,g,x)}}}catch(x){Pe(t,t.return,x)}if(t===e){K=null;break}var _=t.sibling;if(_!==null){_.return=t.return,K=_;break}K=t.return}}var mp=Math.ceil,yi=I.ReactCurrentDispatcher,Ra=I.ReactCurrentOwner,bt=I.ReactCurrentBatchConfig,fe=0,We=null,Ie=null,Ke=0,vt=0,ur=an(0),Ue=0,is=null,Nn=0,wi=0,Oa=0,os=null,ot=null,Ia=0,cr=1/0,Qt=null,_i=!1,La=null,fn=null,Si=!1,pn=null,ki=0,as=0,Ma=null,xi=-1,bi=0;function nt(){return(fe&6)!==0?Ae():xi!==-1?xi:xi=Ae()}function mn(e){return(e.mode&1)===0?1:(fe&2)!==0&&Ke!==0?Ke&-Ke:Xf.transition!==null?(bi===0&&(bi=Zl()),bi):(e=ve,e!==0||(e=window.event,e=e===void 0?16:lu(e.type)),e)}function Rt(e,t,i,a){if(50<as)throw as=0,Ma=null,Error(r(185));Ar(e,i,a),((fe&2)===0||e!==We)&&(e===We&&((fe&2)===0&&(wi|=i),Ue===4&&gn(e,Ke)),at(e,a),i===1&&fe===0&&(t.mode&1)===0&&(cr=Ae()+500,Xs&&un()))}function at(e,t){var i=e.callbackNode;Yh(e,t);var a=Os(e,e===We?Ke:0);if(a===0)i!==null&&Ql(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&Ql(i),t===1)e.tag===0?Yf(ld.bind(null,e)):Ku(ld.bind(null,e)),Kf(function(){(fe&6)===0&&un()}),i=null;else{switch(eu(a)){case 1:i=mo;break;case 4:i=Yl;break;case 16:i=Ps;break;case 536870912:i=Xl;break;default:i=Ps}i=gd(i,ad.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function ad(e,t){if(xi=-1,bi=0,(fe&6)!==0)throw Error(r(327));var i=e.callbackNode;if(dr()&&e.callbackNode!==i)return null;var a=Os(e,e===We?Ke:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=Ei(e,a);else{t=a;var c=fe;fe|=2;var h=cd();(We!==e||Ke!==t)&&(Qt=null,cr=Ae()+500,Rn(e,t));do try{yp();break}catch(_){ud(e,_)}while(!0);ea(),yi.current=h,fe=c,Ie!==null?t=0:(We=null,Ke=0,t=Ue)}if(t!==0){if(t===2&&(c=go(e),c!==0&&(a=c,t=Da(e,c))),t===1)throw i=is,Rn(e,0),gn(e,a),at(e,Ae()),i;if(t===6)gn(e,a);else{if(c=e.current.alternate,(a&30)===0&&!gp(c)&&(t=Ei(e,a),t===2&&(h=go(e),h!==0&&(a=h,t=Da(e,h))),t===1))throw i=is,Rn(e,0),gn(e,a),at(e,Ae()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:On(e,ot,Qt);break;case 3:if(gn(e,a),(a&130023424)===a&&(t=Ia+500-Ae(),10<t)){if(Os(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){nt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Wo(On.bind(null,e,ot,Qt),t);break}On(e,ot,Qt);break;case 4:if(gn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var g=31-Tt(a);h=1<<g,g=t[g],g>c&&(c=g),a&=~h}if(a=c,a=Ae()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*mp(a/1960))-a,10<a){e.timeoutHandle=Wo(On.bind(null,e,ot,Qt),a);break}On(e,ot,Qt);break;case 5:On(e,ot,Qt);break;default:throw Error(r(329))}}}return at(e,Ae()),e.callbackNode===i?ad.bind(null,e):null}function Da(e,t){var i=os;return e.current.memoizedState.isDehydrated&&(Rn(e,t).flags|=256),e=Ei(e,t),e!==2&&(t=ot,ot=i,t!==null&&$a(t)),e}function $a(e){ot===null?ot=e:ot.push.apply(ot,e)}function gp(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],h=c.getSnapshot;c=c.value;try{if(!jt(h(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gn(e,t){for(t&=~Oa,t&=~wi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Tt(t),a=1<<i;e[i]=-1,t&=~a}}function ld(e){if((fe&6)!==0)throw Error(r(327));dr();var t=Os(e,0);if((t&1)===0)return at(e,Ae()),null;var i=Ei(e,t);if(e.tag!==0&&i===2){var a=go(e);a!==0&&(t=a,i=Da(e,a))}if(i===1)throw i=is,Rn(e,0),gn(e,t),at(e,Ae()),i;if(i===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,On(e,ot,Qt),at(e,Ae()),null}function Ua(e,t){var i=fe;fe|=1;try{return e(t)}finally{fe=i,fe===0&&(cr=Ae()+500,Xs&&un())}}function An(e){pn!==null&&pn.tag===0&&(fe&6)===0&&dr();var t=fe;fe|=1;var i=bt.transition,a=ve;try{if(bt.transition=null,ve=1,e)return e()}finally{ve=a,bt.transition=i,fe=t,(fe&6)===0&&un()}}function Fa(){vt=ur.current,xe(ur)}function Rn(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,qf(i)),Ie!==null)for(i=Ie.return;i!==null;){var a=i;switch(Jo(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Qs();break;case 3:or(),xe(rt),xe(Qe),la();break;case 5:oa(a);break;case 4:or();break;case 13:xe(je);break;case 19:xe(je);break;case 10:ta(a.type._context);break;case 22:case 23:Fa()}i=i.return}if(We=e,Ie=e=vn(e.current,null),Ke=vt=t,Ue=0,is=null,Oa=wi=Nn=0,ot=os=null,jn!==null){for(t=0;t<jn.length;t++)if(i=jn[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,h=i.pending;if(h!==null){var g=h.next;h.next=c,a.next=g}i.pending=a}jn=null}return e}function ud(e,t){do{var i=Ie;try{if(ea(),li.current=hi,ui){for(var a=Ce.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}ui=!1}if(Pn=0,ze=$e=Ce=null,Zr=!1,es=0,Ra.current=null,i===null||i.return===null){Ue=1,is=t,Ie=null;break}e:{var h=e,g=i.return,_=i,x=t;if(t=Ke,_.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var R=x,U=_,F=U.tag;if((U.mode&1)===0&&(F===0||F===11||F===15)){var $=U.alternate;$?(U.updateQueue=$.updateQueue,U.memoizedState=$.memoizedState,U.lanes=$.lanes):(U.updateQueue=null,U.memoizedState=null)}var q=Ic(g);if(q!==null){q.flags&=-257,Lc(q,g,_,h,t),q.mode&1&&Oc(h,R,t),t=q,x=R;var J=t.updateQueue;if(J===null){var Q=new Set;Q.add(x),t.updateQueue=Q}else J.add(x);break e}else{if((t&1)===0){Oc(h,R,t),Ba();break e}x=Error(r(426))}}else if(Te&&_.mode&1){var Re=Ic(g);if(Re!==null){(Re.flags&65536)===0&&(Re.flags|=256),Lc(Re,g,_,h,t),Xo(ar(x,_));break e}}h=x=ar(x,_),Ue!==4&&(Ue=2),os===null?os=[h]:os.push(h),h=g;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var N=Ac(h,x,t);sc(h,N);break e;case 1:_=x;var E=h.type,A=h.stateNode;if((h.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(fn===null||!fn.has(A)))){h.flags|=65536,t&=-t,h.lanes|=t;var B=Rc(h,_,t);sc(h,B);break e}}h=h.return}while(h!==null)}hd(i)}catch(Y){t=Y,Ie===i&&i!==null&&(Ie=i=i.return);continue}break}while(!0)}function cd(){var e=yi.current;return yi.current=hi,e===null?hi:e}function Ba(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),We===null||(Nn&268435455)===0&&(wi&268435455)===0||gn(We,Ke)}function Ei(e,t){var i=fe;fe|=2;var a=cd();(We!==e||Ke!==t)&&(Qt=null,Rn(e,t));do try{vp();break}catch(c){ud(e,c)}while(!0);if(ea(),fe=i,yi.current=a,Ie!==null)throw Error(r(261));return We=null,Ke=0,Ue}function vp(){for(;Ie!==null;)dd(Ie)}function yp(){for(;Ie!==null&&!zh();)dd(Ie)}function dd(e){var t=md(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?hd(e):Ie=t,Ra.current=null}function hd(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=cp(i,t,vt),i!==null){Ie=i;return}}else{if(i=dp(i,t),i!==null){i.flags&=32767,Ie=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Ie=null;return}}if(t=t.sibling,t!==null){Ie=t;return}Ie=t=e}while(t!==null);Ue===0&&(Ue=5)}function On(e,t,i){var a=ve,c=bt.transition;try{bt.transition=null,ve=1,wp(e,t,i,a)}finally{bt.transition=c,ve=a}return null}function wp(e,t,i,a){do dr();while(pn!==null);if((fe&6)!==0)throw Error(r(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var h=i.lanes|i.childLanes;if(Xh(e,h),e===We&&(Ie=We=null,Ke=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Si||(Si=!0,gd(Ps,function(){return dr(),null})),h=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||h){h=bt.transition,bt.transition=null;var g=ve;ve=1;var _=fe;fe|=4,Ra.current=null,fp(e,i),nd(i,e),Uf(Bo),Ms=!!Fo,Bo=Fo=null,e.current=i,pp(i),Wh(),fe=_,ve=g,bt.transition=h}else e.current=i;if(Si&&(Si=!1,pn=e,ki=c),h=e.pendingLanes,h===0&&(fn=null),qh(i.stateNode),at(e,Ae()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(_i)throw _i=!1,e=La,La=null,e;return(ki&1)!==0&&e.tag!==0&&dr(),h=e.pendingLanes,(h&1)!==0?e===Ma?as++:(as=0,Ma=e):as=0,un(),null}function dr(){if(pn!==null){var e=eu(ki),t=bt.transition,i=ve;try{if(bt.transition=null,ve=16>e?16:e,pn===null)var a=!1;else{if(e=pn,pn=null,ki=0,(fe&6)!==0)throw Error(r(331));var c=fe;for(fe|=4,K=e.current;K!==null;){var h=K,g=h.child;if((K.flags&16)!==0){var _=h.deletions;if(_!==null){for(var x=0;x<_.length;x++){var R=_[x];for(K=R;K!==null;){var U=K;switch(U.tag){case 0:case 11:case 15:ss(8,U,h)}var F=U.child;if(F!==null)F.return=U,K=F;else for(;K!==null;){U=K;var $=U.sibling,q=U.return;if(Yc(U),U===R){K=null;break}if($!==null){$.return=q,K=$;break}K=q}}}var J=h.alternate;if(J!==null){var Q=J.child;if(Q!==null){J.child=null;do{var Re=Q.sibling;Q.sibling=null,Q=Re}while(Q!==null)}}K=h}}if((h.subtreeFlags&2064)!==0&&g!==null)g.return=h,K=g;else e:for(;K!==null;){if(h=K,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:ss(9,h,h.return)}var N=h.sibling;if(N!==null){N.return=h.return,K=N;break e}K=h.return}}var E=e.current;for(K=E;K!==null;){g=K;var A=g.child;if((g.subtreeFlags&2064)!==0&&A!==null)A.return=g,K=A;else e:for(g=E;K!==null;){if(_=K,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:vi(9,_)}}catch(Y){Pe(_,_.return,Y)}if(_===g){K=null;break e}var B=_.sibling;if(B!==null){B.return=_.return,K=B;break e}K=_.return}}if(fe=c,un(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Ns,e)}catch{}a=!0}return a}finally{ve=i,bt.transition=t}}return!1}function fd(e,t,i){t=ar(i,t),t=Ac(e,t,1),e=dn(e,t,1),t=nt(),e!==null&&(Ar(e,1,t),at(e,t))}function Pe(e,t,i){if(e.tag===3)fd(e,e,i);else for(;t!==null;){if(t.tag===3){fd(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(fn===null||!fn.has(a))){e=ar(i,e),e=Rc(t,e,1),t=dn(t,e,1),e=nt(),t!==null&&(Ar(t,1,e),at(t,e));break}}t=t.return}}function _p(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=nt(),e.pingedLanes|=e.suspendedLanes&i,We===e&&(Ke&i)===i&&(Ue===4||Ue===3&&(Ke&130023424)===Ke&&500>Ae()-Ia?Rn(e,0):Oa|=i),at(e,t)}function pd(e,t){t===0&&((e.mode&1)===0?t=1:(t=Rs,Rs<<=1,(Rs&130023424)===0&&(Rs=4194304)));var i=nt();e=Kt(e,t),e!==null&&(Ar(e,t,i),at(e,i))}function Sp(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),pd(e,i)}function kp(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}a!==null&&a.delete(t),pd(e,i)}var md;md=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||rt.current)it=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return it=!1,up(e,t,i);it=(e.flags&131072)!==0}else it=!1,Te&&(t.flags&1048576)!==0&&Gu(t,ei,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;mi(e,t),e=t.pendingProps;var c=Zn(t,Qe.current);ir(t,i),c=da(null,t,a,e,c,i);var h=ha();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,st(a)?(h=!0,Ys(t)):h=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,sa(t),c.updater=fi,t.stateNode=c,c._reactInternals=t,ya(t,a,e,i),t=ka(null,t,a,!0,h,i)):(t.tag=0,Te&&h&&Go(t),tt(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(mi(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=bp(a),e=Pt(a,e),c){case 0:t=Sa(null,t,a,e,i);break e;case 1:t=Bc(null,t,a,e,i);break e;case 11:t=Mc(null,t,a,e,i);break e;case 14:t=Dc(null,t,a,Pt(a.type,e),i);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Pt(a,c),Sa(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Pt(a,c),Bc(e,t,a,c,i);case 3:e:{if(zc(t),e===null)throw Error(r(387));a=t.pendingProps,h=t.memoizedState,c=h.element,rc(e,t),oi(t,a,null,i);var g=t.memoizedState;if(a=g.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){c=ar(Error(r(423)),t),t=Wc(e,t,a,i,c);break e}else if(a!==c){c=ar(Error(r(424)),t),t=Wc(e,t,a,i,c);break e}else for(gt=on(t.stateNode.containerInfo.firstChild),mt=t,Te=!0,Ct=null,i=tc(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(nr(),a===c){t=Jt(e,t,i);break e}tt(e,t,a,i)}t=t.child}return t;case 5:return oc(t),e===null&&Yo(t),a=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,g=c.children,zo(a,c)?g=null:h!==null&&zo(a,h)&&(t.flags|=32),Fc(e,t),tt(e,t,g,i),t.child;case 6:return e===null&&Yo(t),null;case 13:return Vc(e,t,i);case 4:return ia(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=rr(t,null,a,i):tt(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Pt(a,c),Mc(e,t,a,c,i);case 7:return tt(e,t,t.pendingProps,i),t.child;case 8:return tt(e,t,t.pendingProps.children,i),t.child;case 12:return tt(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,h=t.memoizedProps,g=c.value,_e(ri,a._currentValue),a._currentValue=g,h!==null)if(jt(h.value,g)){if(h.children===c.children&&!rt.current){t=Jt(e,t,i);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var _=h.dependencies;if(_!==null){g=h.child;for(var x=_.firstContext;x!==null;){if(x.context===a){if(h.tag===1){x=Gt(-1,i&-i),x.tag=2;var R=h.updateQueue;if(R!==null){R=R.shared;var U=R.pending;U===null?x.next=x:(x.next=U.next,U.next=x),R.pending=x}}h.lanes|=i,x=h.alternate,x!==null&&(x.lanes|=i),na(h.return,i,t),_.lanes|=i;break}x=x.next}}else if(h.tag===10)g=h.type===t.type?null:h.child;else if(h.tag===18){if(g=h.return,g===null)throw Error(r(341));g.lanes|=i,_=g.alternate,_!==null&&(_.lanes|=i),na(g,i,t),g=h.sibling}else g=h.child;if(g!==null)g.return=h;else for(g=h;g!==null;){if(g===t){g=null;break}if(h=g.sibling,h!==null){h.return=g.return,g=h;break}g=g.return}h=g}tt(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,ir(t,i),c=kt(c),a=a(c),t.flags|=1,tt(e,t,a,i),t.child;case 14:return a=t.type,c=Pt(a,t.pendingProps),c=Pt(a.type,c),Dc(e,t,a,c,i);case 15:return $c(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Pt(a,c),mi(e,t),t.tag=1,st(a)?(e=!0,Ys(t)):e=!1,ir(t,i),Pc(t,a,c),ya(t,a,c,i),ka(null,t,a,!0,e,i);case 19:return qc(e,t,i);case 22:return Uc(e,t,i)}throw Error(r(156,t.tag))};function gd(e,t){return Jl(e,t)}function xp(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,i,a){return new xp(e,t,i,a)}function za(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bp(e){if(typeof e=="function")return za(e)?1:0;if(e!=null){if(e=e.$$typeof,e===he)return 11;if(e===Be)return 14}return 2}function vn(e,t){var i=e.alternate;return i===null?(i=Et(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ti(e,t,i,a,c,h){var g=2;if(a=e,typeof e=="function")za(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Z:return In(i.children,c,h,t);case de:g=8,c|=8;break;case Ee:return e=Et(12,i,t,c|2),e.elementType=Ee,e.lanes=h,e;case Me:return e=Et(13,i,t,c),e.elementType=Me,e.lanes=h,e;case He:return e=Et(19,i,t,c),e.elementType=He,e.lanes=h,e;case ye:return ji(i,c,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case et:g=10;break e;case ht:g=9;break e;case he:g=11;break e;case Be:g=14;break e;case De:g=16,a=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return t=Et(g,i,t,c),t.elementType=e,t.type=a,t.lanes=h,t}function In(e,t,i,a){return e=Et(7,e,a,t),e.lanes=i,e}function ji(e,t,i,a){return e=Et(22,e,a,t),e.elementType=ye,e.lanes=i,e.stateNode={isHidden:!1},e}function Wa(e,t,i){return e=Et(6,e,null,t),e.lanes=i,e}function Va(e,t,i){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ep(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vo(0),this.expirationTimes=vo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vo(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Ha(e,t,i,a,c,h,g,_,x){return e=new Ep(e,t,i,_,x),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Et(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},sa(h),e}function Tp(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function vd(e){if(!e)return ln;e=e._reactInternals;e:{if(kn(e)!==e||e.tag!==1)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(st(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(r(171))}if(e.tag===1){var i=e.type;if(st(i))return Hu(e,i,t)}return t}function yd(e,t,i,a,c,h,g,_,x){return e=Ha(i,a,!0,e,c,h,g,_,x),e.context=vd(null),i=e.current,a=nt(),c=mn(i),h=Gt(a,c),h.callback=t??null,dn(i,h,c),e.current.lanes=c,Ar(e,c,a),at(e,a),e}function Ci(e,t,i,a){var c=t.current,h=nt(),g=mn(c);return i=vd(i),t.context===null?t.context=i:t.pendingContext=i,t=Gt(h,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=dn(c,t,g),e!==null&&(Rt(e,c,g,h),ii(e,c,g)),g}function Pi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function qa(e,t){wd(e,t),(e=e.alternate)&&wd(e,t)}function jp(){return null}var _d=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ka(e){this._internalRoot=e}Ni.prototype.render=Ka.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));Ci(e,t,null,null)},Ni.prototype.unmount=Ka.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;An(function(){Ci(null,e,null,null)}),t[Wt]=null}};function Ni(e){this._internalRoot=e}Ni.prototype.unstable_scheduleHydration=function(e){if(e){var t=ru();e={blockedOn:null,target:e,priority:t};for(var i=0;i<nn.length&&t!==0&&t<nn[i].priority;i++);nn.splice(i,0,e),i===0&&ou(e)}};function Ga(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ai(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Sd(){}function Cp(e,t,i,a,c){if(c){if(typeof a=="function"){var h=a;a=function(){var R=Pi(g);h.call(R)}}var g=yd(t,a,e,0,null,!1,!1,"",Sd);return e._reactRootContainer=g,e[Wt]=g.current,Hr(e.nodeType===8?e.parentNode:e),An(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var _=a;a=function(){var R=Pi(x);_.call(R)}}var x=Ha(e,0,!1,null,null,!1,!1,"",Sd);return e._reactRootContainer=x,e[Wt]=x.current,Hr(e.nodeType===8?e.parentNode:e),An(function(){Ci(t,x,i,a)}),x}function Ri(e,t,i,a,c){var h=i._reactRootContainer;if(h){var g=h;if(typeof c=="function"){var _=c;c=function(){var x=Pi(g);_.call(x)}}Ci(t,g,e,c)}else g=Cp(i,t,e,c,a);return Pi(g)}tu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Nr(t.pendingLanes);i!==0&&(yo(t,i|1),at(t,Ae()),(fe&6)===0&&(cr=Ae()+500,un()))}break;case 13:An(function(){var a=Kt(e,1);if(a!==null){var c=nt();Rt(a,e,1,c)}}),qa(e,1)}},wo=function(e){if(e.tag===13){var t=Kt(e,134217728);if(t!==null){var i=nt();Rt(t,e,134217728,i)}qa(e,134217728)}},nu=function(e){if(e.tag===13){var t=mn(e),i=Kt(e,t);if(i!==null){var a=nt();Rt(i,e,t,a)}qa(e,t)}},ru=function(){return ve},su=function(e,t){var i=ve;try{return ve=e,t()}finally{ve=i}},co=function(e,t,i){switch(t){case"input":if(no(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=Js(a);if(!c)throw Error(r(90));Cl(a),no(a,c)}}}break;case"textarea":Ol(e,i);break;case"select":t=i.value,t!=null&&Bn(e,!!i.multiple,t,!1)}},zl=Ua,Wl=An;var Pp={usingClientEntryPoint:!1,Events:[Gr,Yn,Js,Fl,Bl,Ua]},ls={findFiberByHostInstance:xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Np={bundleType:ls.bundleType,version:ls.version,rendererPackageName:ls.rendererPackageName,rendererConfig:ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kl(e),e===null?null:e.stateNode},findFiberByHostInstance:ls.findFiberByHostInstance||jp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oi.isDisabled&&Oi.supportsFiber)try{Ns=Oi.inject(Np),Dt=Oi}catch{}}return ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pp,ut.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ga(t))throw Error(r(200));return Tp(e,t,null,i)},ut.createRoot=function(e,t){if(!Ga(e))throw Error(r(299));var i=!1,a="",c=_d;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Ha(e,1,!1,null,null,i,!1,a,c),e[Wt]=t.current,Hr(e.nodeType===8?e.parentNode:e),new Ka(t)},ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Kl(t),e=e===null?null:e.stateNode,e},ut.flushSync=function(e){return An(e)},ut.hydrate=function(e,t,i){if(!Ai(t))throw Error(r(200));return Ri(null,e,t,!0,i)},ut.hydrateRoot=function(e,t,i){if(!Ga(e))throw Error(r(405));var a=i!=null&&i.hydratedSources||null,c=!1,h="",g=_d;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),t=yd(t,null,e,1,i??null,c,!1,h,g),e[Wt]=t.current,Hr(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new Ni(t)},ut.render=function(e,t,i){if(!Ai(t))throw Error(r(200));return Ri(null,e,t,!1,i)},ut.unmountComponentAtNode=function(e){if(!Ai(e))throw Error(r(40));return e._reactRootContainer?(An(function(){Ri(null,null,e,!1,function(){e._reactRootContainer=null,e[Wt]=null})}),!0):!1},ut.unstable_batchedUpdates=Ua,ut.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!Ai(i))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Ri(e,t,i,!1,a)},ut.version="18.3.1-next-f1338f8080-20240426",ut}var Pd;function Bp(){if(Pd)return Ya.exports;Pd=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),Ya.exports=Fp(),Ya.exports}var Nd;function zp(){if(Nd)return Ii;Nd=1;var s=Bp();return Ii.createRoot=s.createRoot,Ii.hydrateRoot=s.hydrateRoot,Ii}var Wp=zp();const Vp={},Ad=s=>{let n;const r=new Set,o=(y,S)=>{const k=typeof y=="function"?y(n):y;if(!Object.is(k,n)){const w=n;n=S??(typeof k!="object"||k===null)?k:Object.assign({},n,k),r.forEach(j=>j(n,w))}},l=()=>n,m={setState:o,getState:l,getInitialState:()=>v,subscribe:y=>(r.add(y),()=>r.delete(y)),destroy:()=>{(Vp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},v=n=s(o,l,m);return m},Hp=s=>s?Ad(s):Ad;var el={exports:{}},tl={},nl={exports:{}},rl={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd;function qp(){if(Rd)return rl;Rd=1;var s=ks();function n(S,k){return S===k&&(S!==0||1/S===1/k)||S!==S&&k!==k}var r=typeof Object.is=="function"?Object.is:n,o=s.useState,l=s.useEffect,u=s.useLayoutEffect,d=s.useDebugValue;function f(S,k){var w=k(),j=o({inst:{value:w,getSnapshot:k}}),P=j[0].inst,T=j[1];return u(function(){P.value=w,P.getSnapshot=k,m(P)&&T({inst:P})},[S,w,k]),l(function(){return m(P)&&T({inst:P}),S(function(){m(P)&&T({inst:P})})},[S]),d(w),w}function m(S){var k=S.getSnapshot;S=S.value;try{var w=k();return!r(S,w)}catch{return!0}}function v(S,k){return k()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:f;return rl.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:y,rl}var Od;function Kp(){return Od||(Od=1,nl.exports=qp()),nl.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id;function Gp(){if(Id)return tl;Id=1;var s=ks(),n=Kp();function r(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var o=typeof Object.is=="function"?Object.is:r,l=n.useSyncExternalStore,u=s.useRef,d=s.useEffect,f=s.useMemo,m=s.useDebugValue;return tl.useSyncExternalStoreWithSelector=function(v,y,S,k,w){var j=u(null);if(j.current===null){var P={hasValue:!1,value:null};j.current=P}else P=j.current;j=f(function(){function L(H){if(!O){if(O=!0,b=H,H=k(H),w!==void 0&&P.hasValue){var Z=P.value;if(w(Z,H))return I=Z}return I=H}if(Z=I,o(b,H))return Z;var de=k(H);return w!==void 0&&w(Z,de)?(b=H,Z):(b=H,I=de)}var O=!1,b,I,G=S===void 0?null:S;return[function(){return L(y())},G===null?void 0:function(){return L(G())}]},[y,S,k,w]);var T=l(v,j[0],j[1]);return d(function(){P.hasValue=!0,P.value=T},[T]),m(T),T},tl}var Ld;function Jp(){return Ld||(Ld=1,el.exports=Gp()),el.exports}var Qp=Jp();const Yp=fh(Qp),ph={},{useDebugValue:Xp}=Dp,{useSyncExternalStoreWithSelector:Zp}=Yp;let Md=!1;const em=s=>s;function tm(s,n=em,r){(ph?"production":void 0)!=="production"&&r&&!Md&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Md=!0);const o=Zp(s.subscribe,s.getState,s.getServerState||s.getInitialState,n,r);return Xp(o),o}const Dd=s=>{(ph?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof s=="function"?Hp(s):s,r=(o,l)=>tm(n,o,l);return Object.assign(r,n),r},nm=s=>s?Dd(s):Dd;function Yi(s,n){var r={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&n.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(s);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(s,o[l])&&(r[o[l]]=s[o[l]]);return r}function rm(s,n,r,o){function l(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function f(y){try{v(o.next(y))}catch(S){d(S)}}function m(y){try{v(o.throw(y))}catch(S){d(S)}}function v(y){y.done?u(y.value):l(y.value).then(f,m)}v((o=o.apply(s,n||[])).next())})}const sm=s=>s?(...n)=>s(...n):(...n)=>fetch(...n);class bl extends Error{constructor(n,r="FunctionsError",o){super(n),this.name=r,this.context=o}}class im extends bl{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class $d extends bl{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Ud extends bl{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var pl;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(pl||(pl={}));class om{constructor(n,{headers:r={},customFetch:o,region:l=pl.Any}={}){this.url=n,this.headers=r,this.region=l,this.fetch=sm(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return rm(this,arguments,void 0,function*(r,o={}){var l;let u,d;try{const{headers:f,method:m,body:v,signal:y,timeout:S}=o;let k={},{region:w}=o;w||(w=this.region);const j=new URL(`${this.url}/${r}`);w&&w!=="any"&&(k["x-region"]=w,j.searchParams.set("forceFunctionRegion",w));let P;v&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(k["Content-Type"]="application/octet-stream",P=v):typeof v=="string"?(k["Content-Type"]="text/plain",P=v):typeof FormData<"u"&&v instanceof FormData?P=v:(k["Content-Type"]="application/json",P=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?P=JSON.stringify(v):P=v;let T=y;S&&(d=new AbortController,u=setTimeout(()=>d.abort(),S),y?(T=d.signal,y.addEventListener("abort",()=>d.abort())):T=d.signal);const L=yield this.fetch(j.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},k),this.headers),f),body:P,signal:T}).catch(G=>{throw new im(G)}),O=L.headers.get("x-relay-error");if(O&&O==="true")throw new $d(L);if(!L.ok)throw new Ud(L);let b=((l=L.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),I;return b==="application/json"?I=yield L.json():b==="application/octet-stream"||b==="application/pdf"?I=yield L.blob():b==="text/event-stream"?I=L:b==="multipart/form-data"?I=yield L.formData():I=yield L.text(),{data:I,error:null,response:L}}catch(f){return{data:null,error:f,response:f instanceof Ud||f instanceof $d?f.context:void 0}}finally{u&&clearTimeout(u)}})}}var am=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},lm=class{constructor(s){var n,r,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(n=s.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(o=s.urlLengthLimit)!==null&&o!==void 0?o:8e3,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=new Headers(this.headers),this.headers.set(s,n),this}then(s,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let d=null,f=null,m=null,v=u.status,y=u.statusText;if(u.ok){var S,k;if(r.method!=="HEAD"){var w;const L=await u.text();L===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((w=r.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?f=L:f=JSON.parse(L))}const P=(S=r.headers.get("Prefer"))===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),T=(k=u.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");P&&T&&T.length>1&&(m=parseInt(T[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,v=406,y="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var j;const P=await u.text();try{d=JSON.parse(P),Array.isArray(d)&&u.status===404&&(f=[],d=null,v=200,y="OK")}catch{u.status===404&&P===""?(v=204,y="No Content"):d={message:P}}if(d&&r.isMaybeSingle&&(!(d==null||(j=d.details)===null||j===void 0)&&j.includes("0 rows"))&&(d=null,v=200,y="OK"),d&&r.shouldThrowOnError)throw new am(d)}return{error:d,data:f,count:m,status:v,statusText:y}});return this.shouldThrowOnError||(l=l.catch(u=>{var d;let f="",m="",v="";const y=u==null?void 0:u.cause;if(y){var S,k,w,j;const L=(S=y==null?void 0:y.message)!==null&&S!==void 0?S:"",O=(k=y==null?void 0:y.code)!==null&&k!==void 0?k:"";f=`${(w=u==null?void 0:u.name)!==null&&w!==void 0?w:"FetchError"}: ${u==null?void 0:u.message}`,f+=`

Caused by: ${(j=y==null?void 0:y.name)!==null&&j!==void 0?j:"Error"}: ${L}`,O&&(f+=` (${O})`),y!=null&&y.stack&&(f+=`
${y.stack}`)}else{var P;f=(P=u==null?void 0:u.stack)!==null&&P!==void 0?P:""}const T=this.url.toString().length;return(u==null?void 0:u.name)==="AbortError"||(u==null?void 0:u.code)==="ABORT_ERR"?(v="",m="Request was aborted (timeout or manual cancellation)",T>this.urlLengthLimit&&(m+=`. Note: Your request URL is ${T} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((y==null?void 0:y.name)==="HeadersOverflowError"||(y==null?void 0:y.code)==="UND_ERR_HEADERS_OVERFLOW")&&(v="",m="HTTP headers exceeded server limits (typically 16KB)",T>this.urlLengthLimit&&(m+=`. Your request URL is ${T} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:f,hint:m,code:v},data:null,count:null,status:0,statusText:""}})),l.then(s,n)}returns(){return this}overrideTypes(){return this}},um=class extends lm{select(s){let n=!1;const r=(s??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${s}`),this}range(s,n,{foreignTable:r,referencedTable:o=r}={}){const l=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(u,`${n-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:l=!1,format:u="text"}={}){var d;const f=[s?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const Fd=new RegExp("[,()]");var yr=class extends um{eq(s,n){return this.url.searchParams.append(s,`eq.${n}`),this}neq(s,n){return this.url.searchParams.append(s,`neq.${n}`),this}gt(s,n){return this.url.searchParams.append(s,`gt.${n}`),this}gte(s,n){return this.url.searchParams.append(s,`gte.${n}`),this}lt(s,n){return this.url.searchParams.append(s,`lt.${n}`),this}lte(s,n){return this.url.searchParams.append(s,`lte.${n}`),this}like(s,n){return this.url.searchParams.append(s,`like.${n}`),this}likeAllOf(s,n){return this.url.searchParams.append(s,`like(all).{${n.join(",")}}`),this}likeAnyOf(s,n){return this.url.searchParams.append(s,`like(any).{${n.join(",")}}`),this}ilike(s,n){return this.url.searchParams.append(s,`ilike.${n}`),this}ilikeAllOf(s,n){return this.url.searchParams.append(s,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(s,n){return this.url.searchParams.append(s,`ilike(any).{${n.join(",")}}`),this}regexMatch(s,n){return this.url.searchParams.append(s,`match.${n}`),this}regexIMatch(s,n){return this.url.searchParams.append(s,`imatch.${n}`),this}is(s,n){return this.url.searchParams.append(s,`is.${n}`),this}isDistinct(s,n){return this.url.searchParams.append(s,`isdistinct.${n}`),this}in(s,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&Fd.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&Fd.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cs.{${n.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(n)}`),this}containedBy(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cd.{${n.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(n)}`),this}rangeGt(s,n){return this.url.searchParams.append(s,`sr.${n}`),this}rangeGte(s,n){return this.url.searchParams.append(s,`nxl.${n}`),this}rangeLt(s,n){return this.url.searchParams.append(s,`sl.${n}`),this}rangeLte(s,n){return this.url.searchParams.append(s,`nxr.${n}`),this}rangeAdjacent(s,n){return this.url.searchParams.append(s,`adj.${n}`),this}overlaps(s,n){return typeof n=="string"?this.url.searchParams.append(s,`ov.${n}`):this.url.searchParams.append(s,`ov.{${n.join(",")}}`),this}textSearch(s,n,{config:r,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const u=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${l}fts${u}.${n}`),this}match(s){return Object.entries(s).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(s,n,r){return this.url.searchParams.append(s,`not.${n}.${r}`),this}or(s,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,n,r){return this.url.searchParams.append(s,`${n}.${r}`),this}},cm=class{constructor(s,{headers:n={},schema:r,fetch:o,urlLengthLimit:l=8e3}){this.url=s,this.headers=new Headers(n),this.schema=r,this.fetch=o,this.urlLengthLimit=l}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,n){const{head:r=!1,count:o}=n??{},l=r?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(v=>/\s/.test(v)&&!u?"":(v==='"'&&(u=!u),v)).join(""),{url:f,headers:m}=this.cloneRequestState();return f.searchParams.set("select",d),o&&m.append("Prefer",`count=${o}`),new yr({method:l,url:f,headers:m,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(s,{count:n,defaultToNull:r=!0}={}){var o;const l="POST",{url:u,headers:d}=this.cloneRequestState();if(n&&d.append("Prefer",`count=${n}`),r||d.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((m,v)=>m.concat(Object.keys(v)),[]);if(f.length>0){const m=[...new Set(f)].map(v=>`"${v}"`);u.searchParams.set("columns",m.join(","))}}return new yr({method:l,url:u,headers:d,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(s,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:l=!0}={}){var u;const d="POST",{url:f,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&f.searchParams.set("on_conflict",n),o&&m.append("Prefer",`count=${o}`),l||m.append("Prefer","missing=default"),Array.isArray(s)){const v=s.reduce((y,S)=>y.concat(Object.keys(S)),[]);if(v.length>0){const y=[...new Set(v)].map(S=>`"${S}"`);f.searchParams.set("columns",y.join(","))}}return new yr({method:d,url:f,headers:m,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}update(s,{count:n}={}){var r;const o="PATCH",{url:l,headers:u}=this.cloneRequestState();return n&&u.append("Prefer",`count=${n}`),new yr({method:o,url:l,headers:u,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:s}={}){var n;const r="DELETE",{url:o,headers:l}=this.cloneRequestState();return s&&l.append("Prefer",`count=${s}`),new yr({method:r,url:o,headers:l,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function ms(s){"@babel/helpers - typeof";return ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ms(s)}function dm(s,n){if(ms(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var o=r.call(s,n);if(ms(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function hm(s){var n=dm(s,"string");return ms(n)=="symbol"?n:n+""}function fm(s,n,r){return(n=hm(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function Bd(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,o)}return r}function Li(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Bd(Object(r),!0).forEach(function(o){fm(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Bd(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}var pm=class mh{constructor(n,{headers:r={},schema:o,fetch:l,timeout:u,urlLengthLimit:d=8e3}={}){this.url=n,this.headers=new Headers(r),this.schemaName=o,this.urlLengthLimit=d;const f=l??globalThis.fetch;u!==void 0&&u>0?this.fetch=(m,v)=>{const y=new AbortController,S=setTimeout(()=>y.abort(),u),k=v==null?void 0:v.signal;if(k){if(k.aborted)return clearTimeout(S),f(m,v);const w=()=>{clearTimeout(S),y.abort()};return k.addEventListener("abort",w,{once:!0}),f(m,Li(Li({},v),{},{signal:y.signal})).finally(()=>{clearTimeout(S),k.removeEventListener("abort",w)})}return f(m,Li(Li({},v),{},{signal:y.signal})).finally(()=>clearTimeout(S))}:this.fetch=f}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new cm(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new mh(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,r={},{head:o=!1,get:l=!1,count:u}={}){var d;let f;const m=new URL(`${this.url}/rpc/${n}`);let v;const y=w=>w!==null&&typeof w=="object"&&(!Array.isArray(w)||w.some(y)),S=o&&Object.values(r).some(y);S?(f="POST",v=r):o||l?(f=o?"HEAD":"GET",Object.entries(r).filter(([w,j])=>j!==void 0).map(([w,j])=>[w,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([w,j])=>{m.searchParams.append(w,j)})):(f="POST",v=r);const k=new Headers(this.headers);return S?k.set("Prefer",u?`count=${u},return=minimal`:"return=minimal"):u&&k.set("Prefer",`count=${u}`),new yr({method:f,url:m,headers:k,schema:this.schemaName,body:v,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}};class mm{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const o=r.versions;if(o&&o.node){const l=o.node,u=parseInt(l.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const o=this.getWebSocketConstructor();return new o(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const gm="2.95.3",vm=`realtime-js/${gm}`,ym="1.0.0",gh="2.0.0",zd=gh,ml=1e4,wm=1e3,_m=100;var _n;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(_n||(_n={}));var Fe;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Fe||(Fe={}));var Mt;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Mt||(Mt={}));var gl;(function(s){s.websocket="websocket"})(gl||(gl={}));var $n;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})($n||($n={}));class Sm{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let o=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,o;const l=(o=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(n){var r,o;const l=(o=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:{},d=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(n,r,o){var l,u;const d=n.topic,f=(l=n.ref)!==null&&l!==void 0?l:"",m=(u=n.join_ref)!==null&&u!==void 0?u:"",v=n.payload.event,y=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},S=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(S.length>255)throw new Error(`metadata length ${S.length} exceeds maximum of 255`);const k=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+d.length+v.length+S.length,w=new ArrayBuffer(this.HEADER_LENGTH+k);let j=new DataView(w),P=0;j.setUint8(P++,this.KINDS.userBroadcastPush),j.setUint8(P++,m.length),j.setUint8(P++,f.length),j.setUint8(P++,d.length),j.setUint8(P++,v.length),j.setUint8(P++,S.length),j.setUint8(P++,r),Array.from(m,L=>j.setUint8(P++,L.charCodeAt(0))),Array.from(f,L=>j.setUint8(P++,L.charCodeAt(0))),Array.from(d,L=>j.setUint8(P++,L.charCodeAt(0))),Array.from(v,L=>j.setUint8(P++,L.charCodeAt(0))),Array.from(S,L=>j.setUint8(P++,L.charCodeAt(0)));var T=new Uint8Array(w.byteLength+o.byteLength);return T.set(new Uint8Array(w),0),T.set(new Uint8Array(o),w.byteLength),T.buffer}decode(n,r){if(this._isArrayBuffer(n)){let o=this._binaryDecode(n);return r(o)}if(typeof n=="string"){const o=JSON.parse(n),[l,u,d,f,m]=o;return r({join_ref:l,ref:u,topic:d,event:f,payload:m})}return r({})}_binaryDecode(n){const r=new DataView(n),o=r.getUint8(0),l=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,r,l)}}_decodeUserBroadcast(n,r,o){const l=r.getUint8(1),u=r.getUint8(2),d=r.getUint8(3),f=r.getUint8(4);let m=this.HEADER_LENGTH+4;const v=o.decode(n.slice(m,m+l));m=m+l;const y=o.decode(n.slice(m,m+u));m=m+u;const S=o.decode(n.slice(m,m+d));m=m+d;const k=n.slice(m,n.byteLength),w=f===this.JSON_ENCODING?JSON.parse(o.decode(k)):k,j={type:this.BROADCAST_EVENT,event:y,payload:w};return d>0&&(j.meta=JSON.parse(S)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n==null?void 0:n.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([o])=>r.includes(o)))}}class vh{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Se;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Se||(Se={}));const Wd=(s,n,r={})=>{var o;const l=(o=r.skipTypes)!==null&&o!==void 0?o:[];return n?Object.keys(n).reduce((u,d)=>(u[d]=km(d,s,n,l),u),{}):{}},km=(s,n,r,o)=>{const l=n.find(f=>f.name===s),u=l==null?void 0:l.type,d=r[s];return u&&!o.includes(u)?yh(u,d):vl(d)},yh=(s,n)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return Tm(n,r)}switch(s){case Se.bool:return xm(n);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return bm(n);case Se.json:case Se.jsonb:return Em(n);case Se.timestamp:return jm(n);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return vl(n);default:return vl(n)}},vl=s=>s,xm=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},bm=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},Em=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},Tm=(s,n)=>{if(typeof s!="string")return s;const r=s.length-1,o=s[r];if(s[0]==="{"&&o==="}"){let u;const d=s.slice(1,r);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(f=>yh(n,f))}return s},jm=s=>typeof s=="string"?s.replace(" ","T"):s,wh=s=>{const n=new URL(s);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class sl{constructor(n,r,o={},l=ml){this.channel=n,this.event=r,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var o;return this._hasReceived(n)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Vd;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Vd||(Vd={}));class fs{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:u,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fs.syncState(this.state,l,u,d),this.pendingDiffs.forEach(m=>{this.state=fs.syncDiff(this.state,m,u,d)}),this.pendingDiffs=[],f()}),this.channel._on(o.diff,{},l=>{const{onJoin:u,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=fs.syncDiff(this.state,l,u,d),f())}),this.onJoin((l,u,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:d})}),this.onLeave((l,u,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,o,l){const u=this.cloneDeep(n),d=this.transformState(r),f={},m={};return this.map(u,(v,y)=>{d[v]||(m[v]=y)}),this.map(d,(v,y)=>{const S=u[v];if(S){const k=y.map(T=>T.presence_ref),w=S.map(T=>T.presence_ref),j=y.filter(T=>w.indexOf(T.presence_ref)<0),P=S.filter(T=>k.indexOf(T.presence_ref)<0);j.length>0&&(f[v]=j),P.length>0&&(m[v]=P)}else f[v]=y}),this.syncDiff(u,{joins:f,leaves:m},o,l)}static syncDiff(n,r,o,l){const{joins:u,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(u,(f,m)=>{var v;const y=(v=n[f])!==null&&v!==void 0?v:[];if(n[f]=this.cloneDeep(m),y.length>0){const S=n[f].map(w=>w.presence_ref),k=y.filter(w=>S.indexOf(w.presence_ref)<0);n[f].unshift(...k)}o(f,y,m)}),this.map(d,(f,m)=>{let v=n[f];if(!v)return;const y=m.map(S=>S.presence_ref);v=v.filter(S=>y.indexOf(S.presence_ref)<0),n[f]=v,l(f,v,m),v.length===0&&delete n[f]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(o=>r(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,o)=>{const l=n[o];return"metas"in l?r[o]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):r[o]=l,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hd;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Hd||(Hd={}));var ps;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(ps||(ps={}));var Yt;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Yt||(Yt={}));class Sr{constructor(n,r={config:{}},o){var l,u;if(this.topic=n,this.params=r,this.socket=o,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new sl(this,Mt.join,this.params,this.timeout),this.rejoinTimer=new vh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mt.reply,{},(d,f)=>{this._trigger(this._replyEventName(f),d)}),this.presence=new fs(this),this.broadcastEndpointURL=wh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var o,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Fe.closed){const{config:{broadcast:d,presence:f,private:m}}=this.params,v=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(w=>w.filter))!==null&&l!==void 0?l:[],y=!!this.bindings[ps.PRESENCE]&&this.bindings[ps.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,S={},k={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:y}),postgres_changes:v,private:m};this.socket.accessTokenValue&&(S.access_token=this.socket.accessTokenValue),this._onError(w=>n==null?void 0:n(Yt.CHANNEL_ERROR,w)),this._onClose(()=>n==null?void 0:n(Yt.CLOSED)),this.updateJoinPayload(Object.assign({config:k},S)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:w})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){n==null||n(Yt.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,T=(j=P==null?void 0:P.length)!==null&&j!==void 0?j:0,L=[];for(let O=0;O<T;O++){const b=P[O],{filter:{event:I,schema:G,table:H,filter:Z}}=b,de=w&&w[O];if(de&&de.event===I&&Sr.isFilterValueEqual(de.schema,G)&&Sr.isFilterValueEqual(de.table,H)&&Sr.isFilterValueEqual(de.filter,Z))L.push(Object.assign(Object.assign({},b),{id:de.id}));else{this.unsubscribe(),this.state=Fe.errored,n==null||n(Yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,n&&n(Yt.SUBSCRIBED);return}}).receive("error",w=>{this.state=Fe.errored,n==null||n(Yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,o){return this.state===Fe.joined&&n===ps.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,o)}async httpSend(n,r,o={}){var l;if(r==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(l=o.timeout)!==null&&l!==void 0?l:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const v=await f.json();m=v.error||v.message||m}catch{}return Promise.reject(new Error(m))}async send(n,r={}){var o,l;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:d}=n,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=v.body)===null||l===void 0?void 0:l.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,f,m;const v=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),v.receive("ok",()=>u("ok")),v.receive("error",()=>u("error")),v.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Fe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mt.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new sl(this,Mt.leave,{},n),o.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Fe.closed,this.bindings={}}async _fetchWithTimeout(n,r,o){const l=new AbortController,u=setTimeout(()=>l.abort(),o),d=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(u),d}_push(n,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new sl(this,n,r,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>_m){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,o){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,o){var l,u;const d=n.toLocaleLowerCase(),{close:f,error:m,leave:v,join:y}=Mt;if(o&&[f,m,v,y].indexOf(d)>=0&&o!==this._joinRef())return;let k=this._onMessage(d,r,o);if(r&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(w=>{var j,P,T;return((j=w.filter)===null||j===void 0?void 0:j.event)==="*"||((T=(P=w.filter)===null||P===void 0?void 0:P.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===d}).map(w=>w.callback(k,o)):(u=this.bindings[d])===null||u===void 0||u.filter(w=>{var j,P,T,L,O,b;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in w){const I=w.id,G=(j=w.filter)===null||j===void 0?void 0:j.event;return I&&((P=r.ids)===null||P===void 0?void 0:P.includes(I))&&(G==="*"||(G==null?void 0:G.toLocaleLowerCase())===((T=r.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const I=(O=(L=w==null?void 0:w.filter)===null||L===void 0?void 0:L.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return I==="*"||I===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===d}).map(w=>{if(typeof k=="object"&&"ids"in k){const j=k.data,{schema:P,table:T,commit_timestamp:L,type:O,errors:b}=j;k=Object.assign(Object.assign({},{schema:P,table:T,commit_timestamp:L,eventType:O,new:{},old:{},errors:b}),this._getPayloadRecords(j))}w.callback(k,o)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,o){const l=n.toLocaleLowerCase(),u={type:l,filter:r,callback:o};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(n,r){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&Sr.isEqual(l.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const o in n)if(n[o]!==r[o])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Mt.close,{},n)}_onError(n){this._on(Mt.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Wd(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Wd(n.columns,n.old_record)),r}}const il=()=>{},Mi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Cm=[1e3,2e3,5e3,1e4],Pm=1e4,Nm=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Am{constructor(n,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ml,this.transport=null,this.heartbeatIntervalMs=Mi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=il,this.ref=0,this.reconnectTimer=null,this.vsn=zd,this.logger=il,this.conn=null,this.sendBuffer=[],this.serializer=new Sm,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=l=>l?(...u)=>l(...u):(...u)=>fetch(...u),!(!((o=r==null?void 0:r.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${gl.websocket}`,this.httpEndpoint=wh(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mm.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return r==="ok"&&this._remove(n),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,o){this.logger(n,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case _n.connecting:return $n.Connecting;case _n.open:return $n.Open;case _n.closing:return $n.Closing;default:return $n.Closed}}isConnected(){return this.connectionState()===$n.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const o=`realtime:${n}`,l=this.getChannels().find(u=>u.topic===o);if(l)return l;{const u=new Sr(`realtime:${n}`,r,this);return this.channels.push(u),u}}push(n){const{topic:r,event:o,payload:l,ref:u}=n,d=()=>{this.encode(n,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${r} ${o} (${u})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(wm,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Mi.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",v)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:l,payload:u,ref:d}=r,f=d?`(${d})`:"",m=u.status||"";this.log("receive",`${m} ${o} ${l} ${f}`.trim(),u),this.channels.filter(v=>v._isMember(o)).forEach(v=>v._trigger(l,u,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===_n.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===_n.open||this.conn.readyState===_n.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(Mt.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const o=n.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${n}${o}${l}`}_workerObjectUrl(n){let r;if(n)r=n;else{const o=new Blob([Nm],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,o=!1;if(n)r=n,o=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),r=this.accessTokenValue}else r=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const u={access_token:r,version:vm};r&&l.updateJoinPayload(u),l.joinedOnce&&l._isJoined()&&l._push(Mt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(r)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new vh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,o,l,u,d,f,m,v,y,S,k,w;switch(this.transport=(r=n==null?void 0:n.transport)!==null&&r!==void 0?r:null,this.timeout=(o=n==null?void 0:n.timeout)!==null&&o!==void 0?o:ml,this.heartbeatIntervalMs=(l=n==null?void 0:n.heartbeatIntervalMs)!==null&&l!==void 0?l:Mi.HEARTBEAT_INTERVAL,this.worker=(u=n==null?void 0:n.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=n==null?void 0:n.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=n==null?void 0:n.heartbeatCallback)!==null&&f!==void 0?f:il,this.vsn=(m=n==null?void 0:n.vsn)!==null&&m!==void 0?m:zd,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=n==null?void 0:n.reconnectAfterMs)!==null&&v!==void 0?v:(j=>Cm[j-1]||Pm),this.vsn){case ym:this.encode=(y=n==null?void 0:n.encode)!==null&&y!==void 0?y:((j,P)=>P(JSON.stringify(j))),this.decode=(S=n==null?void 0:n.decode)!==null&&S!==void 0?S:((j,P)=>P(JSON.parse(j)));break;case gh:this.encode=(k=n==null?void 0:n.encode)!==null&&k!==void 0?k:this.serializer.encode.bind(this.serializer),this.decode=(w=n==null?void 0:n.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}var gs=class extends Error{constructor(s,n){var r;super(s),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((r=n.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Rm(s,n,r){const o=new URL(n,s);if(r)for(const[l,u]of Object.entries(r))u!==void 0&&o.searchParams.set(l,u);return o.toString()}async function Om(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function Im(s){const n=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:o,query:l,body:u,headers:d}){const f=Rm(s.baseUrl,o,l),m=await Om(s.auth),v=await n(f,{method:r,headers:{...u?{"Content-Type":"application/json"}:{},...m,...d},body:u?JSON.stringify(u):void 0}),y=await v.text(),S=(v.headers.get("content-type")||"").includes("application/json"),k=S&&y?JSON.parse(y):y;if(!v.ok){const w=S?k:void 0,j=w==null?void 0:w.error;throw new gs((j==null?void 0:j.message)??`Request failed with status ${v.status}`,{status:v.status,icebergType:j==null?void 0:j.type,icebergCode:j==null?void 0:j.code,details:w})}return{status:v.status,headers:v.headers,data:k}}}}function Di(s){return s.join("")}var Lm=class{constructor(s,n=""){this.client=s,this.prefix=n}async listNamespaces(s){const n=s?{parent:Di(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(s,n){const r={namespace:s.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Di(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Di(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Di(s.namespace)}`}),!0}catch(n){if(n instanceof gs&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(s,n){try{return await this.createNamespace(s,n)}catch(r){if(r instanceof gs&&r.status===409)return;throw r}}};function hr(s){return s.join("")}var Mm=class{constructor(s,n="",r){this.client=s,this.prefix=n,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hr(s.namespace)}/tables`})).data.identifiers}async createTable(s,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hr(s.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(s,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hr(s.namespace)}/tables/${s.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hr(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(s){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hr(s.namespace)}/tables/${s.name}`,headers:n})).data.metadata}async tableExists(s){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hr(s.namespace)}/tables/${s.name}`,headers:n}),!0}catch(r){if(r instanceof gs&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,n){try{return await this.createTable(s,n)}catch(r){if(r instanceof gs&&r.status===409)return await this.loadTable({namespace:s.namespace,name:n.name});throw r}}},Dm=class{constructor(s){var o;let n="v1";s.catalogName&&(n+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=Im({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(o=s.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new Lm(this.client,n),this.tableOps=new Mm(this.client,n,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,n){return this.namespaceOps.createNamespace(s,n)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,n){return this.tableOps.createTable(s,n)}async updateTable(s,n){return this.tableOps.updateTable(s,n)}async dropTable(s,n){await this.tableOps.dropTable(s,n)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,n){return this.namespaceOps.createNamespaceIfNotExists(s,n)}async createTableIfNotExists(s,n){return this.tableOps.createTableIfNotExists(s,n)}},Xi=class extends Error{constructor(s,n="storage",r,o){super(s),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=o}};function Zi(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var $i=class extends Xi{constructor(s,n,r,o="storage"){super(s,o,n,r),this.name=o==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},_h=class extends Xi{constructor(s,n,r="storage"){super(s,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const $m=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Um=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},yl=s=>{if(Array.isArray(s))return s.map(r=>yl(r));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([r,o])=>{const l=r.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[l]=yl(o)}),n},Fm=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function vs(s){"@babel/helpers - typeof";return vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},vs(s)}function Bm(s,n){if(vs(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var o=r.call(s,n);if(vs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function zm(s){var n=Bm(s,"string");return vs(n)=="symbol"?n:n+""}function Wm(s,n,r){return(n=zm(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function qd(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,o)}return r}function se(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?qd(Object(r),!0).forEach(function(o){Wm(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):qd(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}const Kd=s=>{var n;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(n=s.error)===null||n===void 0?void 0:n.message)||JSON.stringify(s)},Vm=async(s,n,r,o)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(r!=null&&r.noResolveJson)){const l=s,u=l.status||500;if(typeof l.json=="function")l.json().then(d=>{const f=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||u+"";n(new $i(Kd(d),u,f,o))}).catch(()=>{if(o==="vectors"){const d=u+"";n(new $i(l.statusText||`HTTP ${u} error`,u,d,o))}else{const d=u+"";n(new $i(l.statusText||`HTTP ${u} error`,u,d,o))}});else{const d=u+"";n(new $i(l.statusText||`HTTP ${u} error`,u,d,o))}}else n(new _h(Kd(s),s,o))},Hm=(s,n,r,o)=>{const l={method:s,headers:(n==null?void 0:n.headers)||{}};return s==="GET"||s==="HEAD"||!o?se(se({},l),r):(Um(o)?(l.headers=se({"Content-Type":"application/json"},n==null?void 0:n.headers),l.body=JSON.stringify(o)):l.body=o,n!=null&&n.duplex&&(l.duplex=n.duplex),se(se({},l),r))};async function cs(s,n,r,o,l,u,d){return new Promise((f,m)=>{s(r,Hm(n,o,l,u)).then(v=>{if(!v.ok)throw v;if(o!=null&&o.noResolveJson)return v;if(d==="vectors"){const y=v.headers.get("content-type");if(v.headers.get("content-length")==="0"||v.status===204)return{};if(!y||!y.includes("application/json"))return{}}return v.json()}).then(v=>f(v)).catch(v=>Vm(v,m,o,d))})}function Sh(s="storage"){return{get:async(n,r,o,l)=>cs(n,"GET",r,o,l,void 0,s),post:async(n,r,o,l,u)=>cs(n,"POST",r,l,u,o,s),put:async(n,r,o,l,u)=>cs(n,"PUT",r,l,u,o,s),head:async(n,r,o,l)=>cs(n,"HEAD",r,se(se({},o),{},{noResolveJson:!0}),l,void 0,s),remove:async(n,r,o,l,u)=>cs(n,"DELETE",r,l,u,o,s)}}const qm=Sh("storage"),{get:ys,post:It,put:wl,head:Km,remove:El}=qm,wt=Sh("vectors");var xr=class{constructor(s,n={},r,o="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.fetch=$m(r),this.namespace=o}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(s){var n=this;try{return{data:await s(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zi(r))return{data:null,error:r};throw r}}},Gm=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}}};let kh;kh=Symbol.toStringTag;var Jm=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n,this[kh]="BlobDownloadBuilder",this.promise=null}asStream(){return new Gm(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.getPromise().then(s,n)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Zi(n))return{data:null,error:n};throw n}}};const Qm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ym=class extends xr{constructor(s,n={},r,o){super(s,n,o,"storage"),this.bucketId=r}async uploadOrUpdate(s,n,r,o){var l=this;return l.handleOperation(async()=>{let u;const d=se(se({},Gd),o);let f=se(se({},l.headers),s==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),m&&u.append("metadata",l.encodeMetadata(m)),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.has("cacheControl")||u.append("cacheControl",d.cacheControl),m&&!u.has("metadata")&&u.append("metadata",l.encodeMetadata(m))):(u=r,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,m&&(f["x-metadata"]=l.toBase64(l.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!d.duplex&&(d.duplex="half")),o!=null&&o.headers&&(f=se(se({},f),o.headers));const v=l._removeEmptyFolders(n),y=l._getFinalPath(v),S=await(s=="PUT"?wl:It)(l.fetch,`${l.url}/object/${y}`,u,se({headers:f},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{path:v,id:S.Id,fullPath:S.Key}})}async upload(s,n,r){return this.uploadOrUpdate("POST",s,n,r)}async uploadToSignedUrl(s,n,r,o){var l=this;const u=l._removeEmptyFolders(s),d=l._getFinalPath(u),f=new URL(l.url+`/object/upload/sign/${d}`);return f.searchParams.set("token",n),l.handleOperation(async()=>{let m;const v=se({upsert:Gd.upsert},o),y=se(se({},l.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",v.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",v.cacheControl)):(m=r,y["cache-control"]=`max-age=${v.cacheControl}`,y["content-type"]=v.contentType),{path:u,fullPath:(await wl(l.fetch,f.toString(),m,{headers:y})).Key}})}async createSignedUploadUrl(s,n){var r=this;return r.handleOperation(async()=>{let o=r._getFinalPath(s);const l=se({},r.headers);n!=null&&n.upsert&&(l["x-upsert"]="true");const u=await It(r.fetch,`${r.url}/object/upload/sign/${o}`,{},{headers:l}),d=new URL(r.url+u.url),f=d.searchParams.get("token");if(!f)throw new Xi("No token returned by API");return{signedUrl:d.toString(),path:s,token:f}})}async update(s,n,r){return this.uploadOrUpdate("PUT",s,n,r)}async move(s,n,r){var o=this;return o.handleOperation(async()=>await It(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:o.headers}))}async copy(s,n,r){var o=this;return o.handleOperation(async()=>({path:(await It(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:o.headers})).Key}))}async createSignedUrl(s,n,r){var o=this;return o.handleOperation(async()=>{let l=o._getFinalPath(s),u=await It(o.fetch,`${o.url}/object/sign/${l}`,se({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:o.headers});const d=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${o.url}${u.signedURL}${d}`)}})}async createSignedUrls(s,n,r){var o=this;return o.handleOperation(async()=>{const l=await It(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:n,paths:s},{headers:o.headers}),u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return l.map(d=>se(se({},d),{},{signedUrl:d.signedURL?encodeURI(`${o.url}${d.signedURL}${u}`):null}))})}download(s,n,r){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=l?`?${l}`:"",d=this._getFinalPath(s),f=()=>ys(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0},r);return new Jm(f,this.shouldThrowOnError)}async info(s){var n=this;const r=n._getFinalPath(s);return n.handleOperation(async()=>yl(await ys(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})))}async exists(s){var n=this;const r=n._getFinalPath(s);try{return await Km(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Zi(o)&&o instanceof _h){const l=o.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:o}}throw o}}getPublicUrl(s,n){const r=this._getFinalPath(s),o=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&o.push(d);let f=o.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}async remove(s){var n=this;return n.handleOperation(async()=>await El(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:s},{headers:n.headers}))}async list(s,n,r){var o=this;return o.handleOperation(async()=>{const l=se(se(se({},Qm),n),{},{prefix:s||""});return await It(o.fetch,`${o.url}/object/list/${o.bucketId}`,l,{headers:o.headers},r)})}async listV2(s,n){var r=this;return r.handleOperation(async()=>{const o=se({},s);return await It(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,o,{headers:r.headers},n)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}};const Xm="2.95.3",xs={"X-Client-Info":`storage-js/${Xm}`};var Zm=class extends xr{constructor(s,n={},r,o){const l=new URL(s);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase."));const u=l.href.replace(/\/$/,""),d=se(se({},xs),n);super(u,d,r,"storage")}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=n.listBucketOptionsToQueryString(s);return await ys(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers})})}async getBucket(s){var n=this;return n.handleOperation(async()=>await ys(n.fetch,`${n.url}/bucket/${s}`,{headers:n.headers}))}async createBucket(s,n={public:!1}){var r=this;return r.handleOperation(async()=>await It(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async updateBucket(s,n){var r=this;return r.handleOperation(async()=>await wl(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(s){var n=this;return n.handleOperation(async()=>await It(n.fetch,`${n.url}/bucket/${s}/empty`,{},{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await El(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(s){const n={};return s&&("limit"in s&&(n.limit=String(s.limit)),"offset"in s&&(n.offset=String(s.offset)),s.search&&(n.search=s.search),s.sortColumn&&(n.sortColumn=s.sortColumn),s.sortOrder&&(n.sortOrder=s.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},eg=class extends xr{constructor(s,n={},r){const o=s.replace(/\/$/,""),l=se(se({},xs),n);super(o,l,r,"storage")}async createBucket(s){var n=this;return n.handleOperation(async()=>await It(n.fetch,`${n.url}/bucket`,{name:s},{headers:n.headers}))}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&r.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&r.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&r.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&r.set("sortOrder",s.sortOrder),s!=null&&s.search&&r.set("search",s.search);const o=r.toString(),l=o?`${n.url}/bucket?${o}`:`${n.url}/bucket`;return await ys(n.fetch,l,{headers:n.headers})})}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await El(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}from(s){var n=this;if(!Fm(s))throw new Xi("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Dm({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(r,{get(l,u){const d=l[u];return typeof d!="function"?d:async(...f)=>{try{return{data:await d.apply(l,f),error:null}}catch(m){if(o)throw m;return{data:null,error:m}}}}})}},tg=class extends xr{constructor(s,n={},r){const o=s.replace(/\/$/,""),l=se(se({},xs),{},{"Content-Type":"application/json"},n);super(o,l,r,"vectors")}async createIndex(s){var n=this;return n.handleOperation(async()=>await wt.post(n.fetch,`${n.url}/CreateIndex`,s,{headers:n.headers})||{})}async getIndex(s,n){var r=this;return r.handleOperation(async()=>await wt.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers}))}async listIndexes(s){var n=this;return n.handleOperation(async()=>await wt.post(n.fetch,`${n.url}/ListIndexes`,s,{headers:n.headers}))}async deleteIndex(s,n){var r=this;return r.handleOperation(async()=>await wt.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers})||{})}},ng=class extends xr{constructor(s,n={},r){const o=s.replace(/\/$/,""),l=se(se({},xs),{},{"Content-Type":"application/json"},n);super(o,l,r,"vectors")}async putVectors(s){var n=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await wt.post(n.fetch,`${n.url}/PutVectors`,s,{headers:n.headers})||{})}async getVectors(s){var n=this;return n.handleOperation(async()=>await wt.post(n.fetch,`${n.url}/GetVectors`,s,{headers:n.headers}))}async listVectors(s){var n=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return n.handleOperation(async()=>await wt.post(n.fetch,`${n.url}/ListVectors`,s,{headers:n.headers}))}async queryVectors(s){var n=this;return n.handleOperation(async()=>await wt.post(n.fetch,`${n.url}/QueryVectors`,s,{headers:n.headers}))}async deleteVectors(s){var n=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await wt.post(n.fetch,`${n.url}/DeleteVectors`,s,{headers:n.headers})||{})}},rg=class extends xr{constructor(s,n={},r){const o=s.replace(/\/$/,""),l=se(se({},xs),{},{"Content-Type":"application/json"},n);super(o,l,r,"vectors")}async createBucket(s){var n=this;return n.handleOperation(async()=>await wt.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}async getBucket(s){var n=this;return n.handleOperation(async()=>await wt.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:s},{headers:n.headers}))}async listBuckets(s={}){var n=this;return n.handleOperation(async()=>await wt.post(n.fetch,`${n.url}/ListVectorBuckets`,s,{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await wt.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}},sg=class extends rg{constructor(s,n={}){super(s,n.headers||{},n.fetch)}from(s){return new ig(this.url,this.headers,s,this.fetch)}async createBucket(s){var n=()=>super.createBucket,r=this;return n().call(r,s)}async getBucket(s){var n=()=>super.getBucket,r=this;return n().call(r,s)}async listBuckets(s={}){var n=()=>super.listBuckets,r=this;return n().call(r,s)}async deleteBucket(s){var n=()=>super.deleteBucket,r=this;return n().call(r,s)}},ig=class extends tg{constructor(s,n,r,o){super(s,n,o),this.vectorBucketName=r}async createIndex(s){var n=()=>super.createIndex,r=this;return n().call(r,se(se({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var n=()=>super.listIndexes,r=this;return n().call(r,se(se({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,s)}async deleteIndex(s){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,s)}index(s){return new og(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},og=class extends ng{constructor(s,n,r,o,l){super(s,n,l),this.vectorBucketName=r,this.indexName=o}async putVectors(s){var n=()=>super.putVectors,r=this;return n().call(r,se(se({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var n=()=>super.getVectors,r=this;return n().call(r,se(se({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var n=()=>super.listVectors,r=this;return n().call(r,se(se({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var n=()=>super.queryVectors,r=this;return n().call(r,se(se({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var n=()=>super.deleteVectors,r=this;return n().call(r,se(se({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},ag=class extends Zm{constructor(s,n={},r,o){super(s,n,r,o)}from(s){return new Ym(this.url,this.headers,s,this.fetch)}get vectors(){return new sg(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new eg(this.url+"/iceberg",this.headers,this.fetch)}};const xh="2.95.3",wr=30*1e3,_l=3,ol=_l*wr,lg="http://localhost:9999",ug="supabase.auth.token",cg={"X-Client-Info":`gotrue-js/${xh}`},Sl="X-Supabase-Api-Version",bh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hg=600*1e3;class ws extends Error{constructor(n,r,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function X(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class fg extends ws{constructor(n,r,o){super(n,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function pg(s){return X(s)&&s.name==="AuthApiError"}class Un extends ws{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Xt extends ws{constructor(n,r,o,l){super(n,o,l),this.name=r,this.status=o}}class yt extends Xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function al(s){return X(s)&&s.name==="AuthSessionMissingError"}class fr extends Xt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ui extends Xt{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Fi extends Xt{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mg(s){return X(s)&&s.name==="AuthImplicitGrantRedirectError"}class Jd extends Xt{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gg extends Xt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class kl extends Xt{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function ll(s){return X(s)&&s.name==="AuthRetryableFetchError"}class Qd extends Xt{constructor(n,r,o){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class xl extends Xt{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ki="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yd=` 	
\r=`.split(""),vg=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<Yd.length;n+=1)s[Yd[n].charCodeAt(0)]=-2;for(let n=0;n<Ki.length;n+=1)s[Ki[n].charCodeAt(0)]=n;return s})();function Xd(s,n,r){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(Ki[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(Ki[o]),n.queuedBits-=6}}function Eh(s,n,r){const o=vg[s];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Zd(s){const n=[],r=d=>{n.push(String.fromCodePoint(d))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=d=>{_g(d,o,r)};for(let d=0;d<s.length;d+=1)Eh(s.charCodeAt(d),l,u);return n.join("")}function yg(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function wg(s,n){for(let r=0;r<s.length;r+=1){let o=s.charCodeAt(r);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(s.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}yg(o,n)}}function _g(s,n,r){if(n.utf8seq===0){if(s<=127){r(s);return}for(let o=1;o<6;o+=1)if((s>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function kr(s){const n=[],r={queue:0,queuedBits:0},o=l=>{n.push(l)};for(let l=0;l<s.length;l+=1)Eh(s.charCodeAt(l),r,o);return new Uint8Array(n)}function Sg(s){const n=[];return wg(s,r=>n.push(r)),new Uint8Array(n)}function Fn(s){const n=[],r={queue:0,queuedBits:0},o=l=>{n.push(l)};return s.forEach(l=>Xd(l,r,o)),Xd(null,r,o),n.join("")}function kg(s){return Math.round(Date.now()/1e3)+s}function xg(){return Symbol("auth-callback")}const Je=()=>typeof window<"u"&&typeof document<"u",Ln={tested:!1,writable:!1},Th=()=>{if(!Je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ln.tested)return Ln.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Ln.tested=!0,Ln.writable=!0}catch{Ln.tested=!0,Ln.writable=!1}return Ln.writable};function bg(s){const n={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,u)=>{n[u]=l})}catch{}return r.searchParams.forEach((o,l)=>{n[l]=o}),n}const jh=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Eg=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",_r=async(s,n,r)=>{await s.setItem(n,JSON.stringify(r))},Mn=async(s,n)=>{const r=await s.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ge=async(s,n)=>{await s.removeItem(n)};class eo{constructor(){this.promise=new eo.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}eo.promiseConstructor=Promise;function Bi(s){const n=s.split(".");if(n.length!==3)throw new xl("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!dg.test(n[o]))throw new xl("JWT not in base64url format");return{header:JSON.parse(Zd(n[0])),payload:JSON.parse(Zd(n[1])),signature:kr(n[2]),raw:{header:n[0],payload:n[1]}}}async function Tg(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function jg(s,n){return new Promise((o,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await s(u);if(!n(u,null,d)){o(d);return}}catch(d){if(!n(u,d)){l(d);return}}})()})}function Cg(s){return("0"+s.toString(16)).substr(-2)}function Pg(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let l="";for(let u=0;u<56;u++)l+=r.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(n),Array.from(n,Cg).join("")}async function Ng(s){const r=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(o);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function Ag(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await Ng(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pr(s,n,r=!1){const o=Pg();let l=o;r&&(l+="/PASSWORD_RECOVERY"),await _r(s,`${n}-code-verifier`,l);const u=await Ag(o);return[u,o===u?"plain":"s256"]}const Rg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Og(s){const n=s.headers.get(Sl);if(!n||!n.match(Rg))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Ig(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function Lg(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Mg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mr(s){if(!Mg.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ul(){const s={};return new Proxy(s,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Dg(s,n){return new Proxy(s,{get:(r,o,l)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const u=o.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,o,l)}return!n.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,o,l)}})}function eh(s){return JSON.parse(JSON.stringify(s))}const Dn=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),$g=[502,503,504];async function th(s){var n;if(!Eg(s))throw new kl(Dn(s),0);if($g.includes(s.status))throw new kl(Dn(s),s.status);let r;try{r=await s.json()}catch(u){throw new Un(Dn(u),u)}let o;const l=Og(s);if(l&&l.getTime()>=bh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new Qd(Dn(r),s.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new yt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new Qd(Dn(r),s.status,r.weak_password.reasons);throw new fg(Dn(r),s.status||500,o)}const Ug=(s,n,r,o)=>{const l={method:s,headers:(n==null?void 0:n.headers)||{}};return s==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),r))};async function re(s,n,r,o){var l;const u=Object.assign({},o==null?void 0:o.headers);u[Sl]||(u[Sl]=bh["2024-01-01"].name),o!=null&&o.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const d=(l=o==null?void 0:o.query)!==null&&l!==void 0?l:{};o!=null&&o.redirectTo&&(d.redirect_to=o.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await Fg(s,n,r+f,{headers:u,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(m):{data:Object.assign({},m),error:null}}async function Fg(s,n,r,o,l,u){const d=Ug(n,o,l,u);let f;try{f=await s(r,Object.assign({},d))}catch(m){throw console.error(m),new kl(Dn(m),0)}if(f.ok||await th(f),o!=null&&o.noResolveJson)return f;try{return await f.json()}catch(m){await th(m)}}function Ot(s){var n;let r=null;Wg(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=kg(s.expires_in)));const o=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:r,user:o},error:null}}function nh(s){const n=Ot(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(n.data.weak_password=s.weak_password),n}function Sn(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function Bg(s){return{data:s,error:null}}function zg(s){const{action_link:n,email_otp:r,hashed_token:o,redirect_to:l,verification_type:u}=s,d=Yi(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:n,email_otp:r,hashed_token:o,redirect_to:l,verification_type:u},m=Object.assign({},d);return{data:{properties:f,user:m},error:null}}function rh(s){return s}function Wg(s){return s.access_token&&s.refresh_token&&s.expires_in}const cl=["global","local","others"];class Vg{constructor({url:n="",headers:r={},fetch:o}){this.url=n,this.headers=r,this.fetch=jh(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=cl[0]){if(cl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cl.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(X(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,r={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Sn})}catch(o){if(X(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:r}=n,o=Yi(n,["options"]),l=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(l.new_email=o==null?void 0:o.newEmail,delete l.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:zg,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(X(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Sn})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,o,l,u,d,f,m;try{const v={nextPage:null,lastPage:0,total:0},y=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=n==null?void 0:n.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:rh});if(y.error)throw y.error;const S=await y.json(),k=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,w=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(j=>{const P=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(j.split(";")[1].split("=")[1]);v[`${T}Page`]=P}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},S),v),error:null}}catch(v){if(X(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){mr(n);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Sn})}catch(r){if(X(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){mr(n);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Sn})}catch(o){if(X(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,r=!1){mr(n);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Sn})}catch(o){if(X(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){mr(n.userId);try{const{data:r,error:o}=await re(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:o}}catch(r){if(X(r))return{data:null,error:r};throw r}}async _deleteFactor(n){mr(n.userId),mr(n.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,o,l,u,d,f,m;try{const v={nextPage:null,lastPage:0,total:0},y=await re(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=n==null?void 0:n.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:rh});if(y.error)throw y.error;const S=await y.json(),k=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,w=(m=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(j=>{const P=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(j.split(";")[1].split("=")[1]);v[`${T}Page`]=P}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},S),v),error:null}}catch(v){if(X(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(n){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(X(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await re(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(X(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await re(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(X(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(n){try{return await re(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(X(r))return{data:null,error:r};throw r}}}function sh(s={}){return{getItem:n=>s[n]||null,setItem:(n,r)=>{s[n]=r},removeItem:n=>{delete s[n]}}}const gr={debug:!!(globalThis&&Th()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ch extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Hg extends Ch{}async function qg(s,n,r){gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const o=new globalThis.AbortController;return n>0&&setTimeout(()=>{o.abort(),gr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,l.name);try{return await r()}finally{gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,l.name)}}else{if(n===0)throw gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Hg(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(gr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Kg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ph(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function Gg(s){return parseInt(s,16)}function Jg(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,o=>o.toString(16).padStart(2,"0")).join("")}function Qg(s){var n;const{chainId:r,domain:o,expirationTime:l,issuedAt:u=new Date,nonce:d,notBefore:f,requestId:m,resources:v,scheme:y,uri:S,version:k}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!S)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const w=Ph(s.address),j=y?`${y}://${o}`:o,P=s.statement?`${s.statement}
`:"",T=`${j} wants you to sign in with your Ethereum account:
${w}

${P}`;let L=`URI: ${S}
Version: ${k}
Chain ID: ${r}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(l&&(L+=`
Expiration Time: ${l.toISOString()}`),f&&(L+=`
Not Before: ${f.toISOString()}`),m&&(L+=`
Request ID: ${m}`),v){let O=`
Resources:`;for(const b of v){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);O+=`
- ${b}`}L+=O}return`${T}
${L}`}class Le extends Error{constructor({message:n,code:r,cause:o,name:l}){var u;super(n,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=l??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=r}}class Gi extends Le{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function Yg({error:s,options:n}){var r,o,l;const{publicKey:u}=n;if(!u)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Le({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=u.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Le({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Le({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Le({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Le({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Le({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return u.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Le({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Le({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const d=window.location.hostname;if(Nh(d)){if(u.rp.id!==d)return new Le({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Le({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Le({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Le({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Le({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function Xg({error:s,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Le({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Le({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const o=window.location.hostname;if(Nh(o)){if(r.rpId!==o)return new Le({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Le({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Le({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Le({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class Zg{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const ev=new Zg;function tv(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:r,excludeCredentials:o}=s,l=Yi(s,["challenge","user","excludeCredentials"]),u=kr(n).buffer,d=Object.assign(Object.assign({},r),{id:kr(r.id).buffer}),f=Object.assign(Object.assign({},l),{challenge:u,user:d});if(o&&o.length>0){f.excludeCredentials=new Array(o.length);for(let m=0;m<o.length;m++){const v=o[m];f.excludeCredentials[m]=Object.assign(Object.assign({},v),{id:kr(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return f}function nv(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:r}=s,o=Yi(s,["challenge","allowCredentials"]),l=kr(n).buffer,u=Object.assign(Object.assign({},o),{challenge:l});if(r&&r.length>0){u.allowCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const f=r[d];u.allowCredentials[d]=Object.assign(Object.assign({},f),{id:kr(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function rv(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:Fn(new Uint8Array(s.response.attestationObject)),clientDataJSON:Fn(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function sv(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,o=s.getClientExtensionResults(),l=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Fn(new Uint8Array(l.authenticatorData)),clientDataJSON:Fn(new Uint8Array(l.clientDataJSON)),signature:Fn(new Uint8Array(l.signature)),userHandle:l.userHandle?Fn(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Nh(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function ih(){var s,n;return!!(Je()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function iv(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Gi("Browser returned unexpected credential type",n)}:{data:null,error:new Gi("Empty credential response",n)}}catch(n){return{data:null,error:Yg({error:n,options:s})}}}async function ov(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Gi("Browser returned unexpected credential type",n)}:{data:null,error:new Gi("Empty credential response",n)}}catch(n){return{data:null,error:Xg({error:n,options:s})}}}const av={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},lv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ji(...s){const n=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),r=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),o={};for(const l of s)if(l)for(const u in l){const d=l[u];if(d!==void 0)if(Array.isArray(d))o[u]=d;else if(r(d))o[u]=d;else if(n(d)){const f=o[u];n(f)?o[u]=Ji(f,d):o[u]=Ji(d)}else o[u]=d}return o}function uv(s,n){return Ji(av,s,n||{})}function cv(s,n){return Ji(lv,s,n||{})}class dv{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:o,signal:l},u){var d;try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:m};const v=l??ev.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:y}=f.webauthn.credential_options.publicKey;if(!y.name){const S=o;if(S)y.name=`${y.id}:${S}`;else{const w=(await this.client.getUser()).data.user,j=((d=w==null?void 0:w.user_metadata)===null||d===void 0?void 0:d.name)||(w==null?void 0:w.email)||(w==null?void 0:w.id)||"User";y.name=`${y.id}:${j}`}}y.displayName||(y.displayName=y.name)}switch(f.webauthn.type){case"create":{const y=uv(f.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:S,error:k}=await iv({publicKey:y,signal:v});return S?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:S}},error:null}:{data:null,error:k}}case"request":{const y=cv(f.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:S,error:k}=await ov(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:y,signal:v}));return S?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:S}},error:null}:{data:null,error:k}}}}catch(f){return X(f)?{data:null,error:f}:{data:null,error:new Un("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:o}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:o})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!r)return{data:null,error:new ws("rpId is required for WebAuthn authentication")};try{if(!ih())return{data:null,error:new Un("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:o},signal:l},{request:u});if(!d)return{data:null,error:f};const{webauthn:m}=d;return this._verify({factorId:n,challengeId:d.challengeId,webauthn:{type:m.type,rpId:r,rpOrigins:o,credential_response:m.credential_response}})}catch(d){return X(d)?{data:null,error:d}:{data:null,error:new Un("Unexpected error in authenticate",d)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!r)return{data:null,error:new ws("rpId is required for WebAuthn registration")};try{if(!ih())return{data:null,error:new Un("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this._enroll({friendlyName:n});if(!d)return await this.client.mfa.listFactors().then(y=>{var S;return(S=y.data)===null||S===void 0?void 0:S.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===n&&k.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:f};const{data:m,error:v}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:r,rpOrigins:o},signal:l},{create:u});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:r,rpOrigins:o,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:v}}catch(d){return X(d)?{data:null,error:d}:{data:null,error:new Un("Unexpected error in register",d)}}}}Kg();const hv={url:lg,storageKey:ug,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function oh(s,n,r){return await r()}const vr={};class _s{get jwks(){var n,r;return(r=(n=vr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){vr[this.storageKey]=Object.assign(Object.assign({},vr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=vr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){vr[this.storageKey]=Object.assign(Object.assign({},vr[this.storageKey]),{cachedAt:n})}constructor(n){var r,o,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},hv),n);if(this.storageKey=u.storageKey,this.instanceID=(r=_s.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,_s.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Je()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Vg({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=jh(u.fetch),this.lock=u.lock||oh,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,this.lockAcquireTimeout=u.lockAcquireTimeout,u.lock?this.lock=u.lock:this.persistSession&&Je()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=qg:this.lock=oh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Th()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sh(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=sh(this.memoryStorage)),Je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d);try{await this._notifyAllSubscribers(d.data.event,d.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(d=>{this._debug("#initialize()","error",d)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${xh}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},o="none";if(Je()&&(r=bg(window.location.href),this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce")),Je()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:u}=await this._getSessionFromURL(r,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),mg(u)){const m=(n=u.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return{error:u}}const{session:d,redirectType:f}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return X(r)?this._returnResult({error:r}):this._returnResult({error:new Un("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,o,l;try{const u=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=n==null?void 0:n.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=n==null?void 0:n.options)===null||l===void 0?void 0:l.captchaToken}},xform:Ot}),{data:d,error:f}=u;if(f||!d)return this._returnResult({data:{user:null,session:null},error:f});const m=d.session,v=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(u){if(X(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(n){var r,o,l;try{let u;if("email"in n){const{email:y,password:S,options:k}=n;let w=null,j=null;this.flowType==="pkce"&&([w,j]=await pr(this.storage,this.storageKey)),u=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k==null?void 0:k.emailRedirectTo,body:{email:y,password:S,data:(r=k==null?void 0:k.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:k==null?void 0:k.captchaToken},code_challenge:w,code_challenge_method:j},xform:Ot})}else if("phone"in n){const{phone:y,password:S,options:k}=n;u=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:S,data:(o=k==null?void 0:k.data)!==null&&o!==void 0?o:{},channel:(l=k==null?void 0:k.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:k==null?void 0:k.captchaToken}},xform:Ot})}else throw new Ui("You must provide either an email or phone number and a password");const{data:d,error:f}=u;if(f||!d)return await Ge(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=d.session,v=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(u){if(await Ge(this.storage,`${this.storageKey}-code-verifier`),X(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(n){try{let r;if("email"in n){const{email:u,password:d,options:f}=n;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:nh})}else if("phone"in n){const{phone:u,password:d,options:f}=n;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:nh})}else throw new Ui("You must provide either an email or phone number and a password");const{data:o,error:l}=r;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const u=new fr;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(r){if(X(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,o,l,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,o,l,u,d,f,m,v,y,S,k;let w,j;if("message"in n)w=n.message,j=n.signature;else{const{chain:P,wallet:T,statement:L,options:O}=n;let b;if(Je())if(typeof T=="object")b=T;else{const Ee=window;if("ethereum"in Ee&&typeof Ee.ethereum=="object"&&"request"in Ee.ethereum&&typeof Ee.ethereum.request=="function")b=Ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=T}const I=new URL((r=O==null?void 0:O.url)!==null&&r!==void 0?r:window.location.href),G=await b.request({method:"eth_requestAccounts"}).then(Ee=>Ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!G||G.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=Ph(G[0]);let Z=(o=O==null?void 0:O.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!Z){const Ee=await b.request({method:"eth_chainId"});Z=Gg(Ee)}const de={domain:I.host,address:H,statement:L,uri:I.href,version:"1",chainId:Z,nonce:(l=O==null?void 0:O.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(d=(u=O==null?void 0:O.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(f=O==null?void 0:O.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=O==null?void 0:O.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(v=O==null?void 0:O.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(y=O==null?void 0:O.signInWithEthereum)===null||y===void 0?void 0:y.resources};w=Qg(de),j=await b.request({method:"personal_sign",params:[Jg(w),H]})}try{const{data:P,error:T}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:j},!((S=n.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(k=n.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Ot});if(T)throw T;if(!P||!P.session||!P.user){const L=new fr;return this._returnResult({data:{user:null,session:null},error:L})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:T})}catch(P){if(X(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async signInWithSolana(n){var r,o,l,u,d,f,m,v,y,S,k,w;let j,P;if("message"in n)j=n.message,P=n.signature;else{const{chain:T,wallet:L,statement:O,options:b}=n;let I;if(Je())if(typeof L=="object")I=L;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))I=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=L}const G=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in I&&I.signIn){const H=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),O?{statement:O}:null));let Z;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")Z=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)Z=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Z&&"signature"in Z&&(typeof Z.signedMessage=="string"||Z.signedMessage instanceof Uint8Array)&&Z.signature instanceof Uint8Array)j=typeof Z.signedMessage=="string"?Z.signedMessage:new TextDecoder().decode(Z.signedMessage),P=Z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${G.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(l=(o=b==null?void 0:b.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((f=b==null?void 0:b.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((m=b==null?void 0:b.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((v=b==null?void 0:b.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((S=(y=b==null?void 0:b.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||S===void 0)&&S.length?["Resources",...b.signInWithSolana.resources.map(Z=>`- ${Z}`)]:[]].join(`
`);const H=await I.signMessage(new TextEncoder().encode(j),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=H}}try{const{data:T,error:L}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Fn(P)},!((k=n.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(w=n.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Ot});if(L)throw L;if(!T||!T.session||!T.user){const O=new fr;return this._returnResult({data:{user:null,session:null},error:O})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:L})}catch(T){if(X(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(n){const r=await Mn(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(r??"").split("/");try{if(!o&&this.flowType==="pkce")throw new gg;const{data:u,error:d}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:Ot});if(await Ge(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!u||!u.session||!u.user){const f=new fr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:d})}catch(u){if(await Ge(this.storage,`${this.storageKey}-code-verifier`),X(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(n){try{const{options:r,provider:o,token:l,access_token:u,nonce:d}=n,f=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ot}),{data:m,error:v}=f;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!m||!m.session||!m.user){const y=new fr;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:v})}catch(r){if(X(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,o,l,u,d;try{if("email"in n){const{email:f,options:m}=n;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await pr(this.storage,this.storageKey));const{error:S}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(o=m==null?void 0:m.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:v,code_challenge_method:y},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:S})}if("phone"in n){const{phone:f,options:m}=n,{data:v,error:y}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(l=m==null?void 0:m.data)!==null&&l!==void 0?l:{},create_user:(u=m==null?void 0:m.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(d=m==null?void 0:m.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v==null?void 0:v.message_id},error:y})}throw new Ui("You must provide either an email or phone number.")}catch(f){if(await Ge(this.storage,`${this.storageKey}-code-verifier`),X(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(n){var r,o;try{let l,u;"options"in n&&(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo,u=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:f}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:Ot});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,v=d.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:v,session:m},error:null})}catch(l){if(X(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(n){var r,o,l,u,d;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await pr(this.storage,this.storageKey));const v=await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=n==null?void 0:n.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:Bg});return!((u=v.data)===null||u===void 0)&&u.url&&Je()&&!(!((d=n.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(f){if(await Ge(this.storage,`${this.storageKey}-code-verifier`),X(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;if(o)throw o;if(!r)throw new yt;const{error:l}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:o,type:l,options:u}=n,{error:d}=await re(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in n){const{phone:o,type:l,options:u}=n,{data:d,error:f}=await re(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f})}throw new Ui("You must provide either an email or phone number and a type")}catch(r){if(X(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Mn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<ol:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const d=await Mn(this.userStorage,this.storageKey+"-user");d!=null&&d.user?n.user=d.user:n.user=ul()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};n.user=Dg(n.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Sn}):await this._useSession(async r=>{var o,l,u;const{data:d,error:f}=r;if(f)throw f;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yt}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:Sn})})}catch(r){if(X(r))return al(r)&&(await this._removeSession(),await Ge(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async o=>{const{data:l,error:u}=o;if(u)throw u;if(!l.session)throw new yt;const d=l.session;let f=null,m=null;this.flowType==="pkce"&&n.email!=null&&([f,m]=await pr(this.storage,this.storageKey));const{data:v,error:y}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:f,code_challenge_method:m}),jwt:d.access_token,xform:Sn});if(y)throw y;return d.user=v.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(o){if(await Ge(this.storage,`${this.storageKey}-code-verifier`),X(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new yt;const r=Date.now()/1e3;let o=r,l=!0,u=null;const{payload:d}=Bi(n.access_token);if(d.exp&&(o=d.exp,l=o<=r),l){const{data:f,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};u=f}else{const{data:f,error:m}=await this._getUser(n.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});u={access_token:n.access_token,refresh_token:n.refresh_token,user:f.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(r){if(X(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var o;if(!n){const{data:d,error:f}=r;if(f)throw f;n=(o=d.session)!==null&&o!==void 0?o:void 0}if(!(n!=null&&n.refresh_token))throw new yt;const{data:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(X(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!Je())throw new Fi("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Fi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Jd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Jd("No code detected.");const{data:O,error:b}=await this._exchangeCodeForSession(n.code);if(b)throw b;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:u,refresh_token:d,expires_in:f,expires_at:m,token_type:v}=n;if(!u||!f||!d||!v)throw new Fi("No session defined in URL");const y=Math.round(Date.now()/1e3),S=parseInt(f);let k=y+S;m&&(k=parseInt(m));const w=k-y;w*1e3<=wr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${S}s`);const j=k-S;y-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,k,y):y-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,k,y);const{data:P,error:T}=await this._getUser(u);if(T)throw T;const L={provider_token:o,provider_refresh_token:l,access_token:u,expires_in:S,expires_at:k,refresh_token:d,token_type:v,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:n.type},error:null})}catch(o){if(X(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Mn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:l,error:u}=r;if(u&&!al(u))return this._returnResult({error:u});const d=(o=l.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:f}=await this.admin.signOut(d,n);if(f&&!(pg(f)&&(f.status===404||f.status===401||f.status===403)||al(f)))return this._returnResult({error:f})}return n!=="others"&&(await this._removeSession(),await Ge(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=xg(),o={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async r=>{var o,l;try{const{data:{session:u},error:d}=r;if(d)throw d;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,r={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await pr(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(u){if(await Ge(this.storage,`${this.storageKey}-code-verifier`),X(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var n;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(X(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:o,error:l}=await this._useSession(async u=>{var d,f,m,v,y;const{data:S,error:k}=u;if(k)throw k;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(d=n.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=n.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",w,{headers:this.headers,jwt:(y=(v=S.session)===null||v===void 0?void 0:v.access_token)!==null&&y!==void 0?y:void 0})});if(l)throw l;return Je()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:n.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(X(o))return this._returnResult({data:{provider:n.provider,url:null},error:o});throw o}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var o;try{const{error:l,data:{session:u}}=r;if(l)throw l;const{options:d,provider:f,token:m,access_token:v,nonce:y}=n,S=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u==null?void 0:u.access_token)!==null&&o!==void 0?o:void 0,body:{provider:f,id_token:m,access_token:v,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Ot}),{data:k,error:w}=S;return w?this._returnResult({data:{user:null,session:null},error:w}):!k||!k.session||!k.user?this._returnResult({data:{user:null,session:null},error:new fr}):(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:w}))}catch(l){if(await Ge(this.storage,`${this.storageKey}-code-verifier`),X(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var o,l;const{data:u,error:d}=r;if(d)throw d;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(X(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await jg(async l=>(l>0&&await Tg(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ot})),(l,u)=>{const d=200*Math.pow(2,l);return u&&ll(u)&&Date.now()+d-o<wr})}catch(o){if(this._debug(r,"error",o),X(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",o),Je()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await Mn(this.storage,this.storageKey);if(l&&this.userStorage){let d=await Mn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await _r(this.userStorage,this.storageKey+"-user",d)),l.user=(n=d==null?void 0:d.user)!==null&&n!==void 0?n:ul()}else if(l&&!l.user&&!l.user){const d=await Mn(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(l.user=d.user,await Ge(this.storage,this.storageKey+"-user"),await _r(this.storage,this.storageKey,l)):l.user=ul()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const u=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ol;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${ol}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),ll(d)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(l.access_token);!f&&(d!=null&&d.user)?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(o,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var r,o;if(!n)throw new yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new eo;const{data:u,error:d}=await this._refreshAccessToken(n);if(d)throw d;if(!u.session)throw new yt;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const f={data:u.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(u){if(this._debug(l,"error",u),X(u)){const d={data:null,error:u};return ll(u)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,r,o=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:r});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(n,r)}catch(m){u.push(m)}});if(await Promise.all(d),u.length>0){for(let f=0;f<u.length;f+=1)console.error(u[f]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Ge(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await _r(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const u=eh(l);await _r(this.storage,this.storageKey,u)}else{const l=eh(r);await _r(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ge(this.storage,this.storageKey),await Ge(this.storage,this.storageKey+"-code-verifier"),await Ge(this.storage,this.storageKey+"-user"),this.userStorage&&await Ge(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Je()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),wr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-n)/wr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${wr}ms, refresh threshold is ${_l} ticks`),l<=_l&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Ch)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Je()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,o){const l=[`provider=${encodeURIComponent(r)}`];if(o!=null&&o.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,d]=await pr(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(f.toString())}if(o!=null&&o.queryParams){const u=new URLSearchParams(o.queryParams);l.push(u.toString())}return o!=null&&o.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var o;const{data:l,error:u}=r;return u?this._returnResult({data:null,error:u}):await re(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(X(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var o,l;const{data:u,error:d}=r;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:m,error:v}=await re(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token});return v?this._returnResult({data:null,error:v}):(n.factorType==="totp"&&m.type==="totp"&&(!((l=m==null?void 0:m.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(r){if(X(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:l,error:u}=r;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?rv(n.webauthn.credential_response):sv(n.webauthn.credential_response)})}:{code:n.code}),{data:f,error:m}=await re(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:d,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(r){if(X(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:l,error:u}=r;if(u)return this._returnResult({data:null,error:u});const d=await re(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});if(d.error)return d;const{data:f}=d;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:tv(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:nv(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(X(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:o}=await this._challenge({factorId:n.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:o}=await this.getUser();if(o)return{data:null,error:o};const l={all:[],phone:[],totp:[],webauthn:[]};for(const u of(n=r==null?void 0:r.factors)!==null&&n!==void 0?n:[])l.all.push(u),u.status==="verified"&&l[u.factor_type].push(u);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,o,l,u;if(n)try{const{payload:w}=Bi(n);let j=null;w.aal&&(j=w.aal);let P=j;const{data:{user:T},error:L}=await this.getUser(n);if(L)return this._returnResult({data:null,error:L});((o=(r=T==null?void 0:T.factors)===null||r===void 0?void 0:r.filter(I=>I.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(P="aal2");const b=w.amr||[];return{data:{currentLevel:j,nextLevel:P,currentAuthenticationMethods:b},error:null}}catch(w){if(X(w))return this._returnResult({data:null,error:w});throw w}const{data:{session:d},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=Bi(d.access_token);let v=null;m.aal&&(v=m.aal);let y=v;((u=(l=d.user.factors)===null||l===void 0?void 0:l.filter(w=>w.status==="verified"))!==null&&u!==void 0?u:[]).length>0&&(y="aal2");const k=m.amr||[];return{data:{currentLevel:v,nextLevel:y,currentAuthenticationMethods:k},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;return l?this._returnResult({data:null,error:l}):o?await re(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:o.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new yt})})}catch(r){if(X(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async o=>{const{data:{session:l},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new yt});const d=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&Je()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(o){if(X(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(n,r){try{return await this._useSession(async o=>{const{data:{session:l},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new yt});const d=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&Je()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(o){if(X(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;return o?this._returnResult({data:null,error:o}):r?await re(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new yt})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;return l?this._returnResult({data:null,error:l}):o?(await re(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new yt})})}catch(r){if(X(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let o=r.keys.find(f=>f.kid===n);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(f=>f.kid===n),o&&this.jwks_cached_at+hg>l)return o;const{data:u,error:d}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,o=u.keys.find(f=>f.kid===n),!o)?null:o}async getClaims(n,r={}){try{let o=n;if(!o){const{data:w,error:j}=await this.getSession();if(j||!w.session)return this._returnResult({data:null,error:j});o=w.session.access_token}const{header:l,payload:u,signature:d,raw:{header:f,payload:m}}=Bi(o);r!=null&&r.allowExpired||Ig(u.exp);const v=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!v){const{error:w}=await this.getUser(o);if(w)throw w;return{data:{claims:u,header:l,signature:d},error:null}}const y=Lg(l.alg),S=await crypto.subtle.importKey("jwk",v,y,!0,["verify"]);if(!await crypto.subtle.verify(y,S,d,Sg(`${f}.${m}`)))throw new xl("Invalid JWT signature");return{data:{claims:u,header:l,signature:d},error:null}}catch(o){if(X(o))return this._returnResult({data:null,error:o});throw o}}}_s.nextInstanceID={};const fv=_s,pv="2.95.3";let ds="";typeof Deno<"u"?ds="deno":typeof document<"u"?ds="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ds="react-native":ds="node";const mv={"X-Client-Info":`supabase-js-${ds}/${pv}`},gv={headers:mv},vv={schema:"public"},yv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wv={};function Ss(s){"@babel/helpers - typeof";return Ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ss(s)}function _v(s,n){if(Ss(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var o=r.call(s,n);if(Ss(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function Sv(s){var n=_v(s,"string");return Ss(n)=="symbol"?n:n+""}function kv(s,n,r){return(n=Sv(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function ah(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,o)}return r}function Ne(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ah(Object(r),!0).forEach(function(o){kv(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):ah(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}const xv=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),bv=()=>Headers,Ev=(s,n,r)=>{const o=xv(r),l=bv();return async(u,d)=>{var f;const m=(f=await n())!==null&&f!==void 0?f:s;let v=new l(d==null?void 0:d.headers);return v.has("apikey")||v.set("apikey",s),v.has("Authorization")||v.set("Authorization",`Bearer ${m}`),o(u,Ne(Ne({},d),{},{headers:v}))}};function Tv(s){return s.endsWith("/")?s:s+"/"}function jv(s,n){var r,o;const{db:l,auth:u,realtime:d,global:f}=s,{db:m,auth:v,realtime:y,global:S}=n,k={db:Ne(Ne({},m),l),auth:Ne(Ne({},v),u),realtime:Ne(Ne({},y),d),storage:{},global:Ne(Ne(Ne({},S),f),{},{headers:Ne(Ne({},(r=S==null?void 0:S.headers)!==null&&r!==void 0?r:{}),(o=f==null?void 0:f.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return s.accessToken?k.accessToken=s.accessToken:delete k.accessToken,k}function Cv(s){const n=s==null?void 0:s.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Tv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Pv=class extends fv{constructor(s){super(s)}},Nv=class{constructor(s,n,r){var o,l;this.supabaseUrl=s,this.supabaseKey=n;const u=Cv(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:vv,realtime:wv,auth:Ne(Ne({},yv),{},{storageKey:d}),global:gv},m=jv(r??{},f);if(this.storageKey=(o=m.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=m.global.headers)!==null&&l!==void 0?l:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=m.auth)!==null&&v!==void 0?v:{},this.headers,m.global.fetch)}this.fetch=Ev(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Ne({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new pm(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch,timeout:m.db.timeout,urlLengthLimit:m.db.urlLengthLimit}),this.storage=new ag(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new om(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,n,r)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,n,r;if(s.accessToken)return await s.accessToken();const{data:o}=await s.auth.getSession();return(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:l,storageKey:u,flowType:d,lock:f,debug:m,throwOnError:v},y,S){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Pv({url:this.authUrl.href,headers:Ne(Ne({},k),y),storageKey:u,autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:l,flowType:d,lock:f,debug:m,throwOnError:v,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Am(this.realtimeUrl.href,Ne(Ne({},s),{},{params:Ne(Ne({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(s,n,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Av=(s,n,r)=>new Nv(s,n,r);function Rv(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const n=s.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Rv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lh=/iPad|iPhone|iPod/.test(navigator.userAgent),dl=/Mobi|Android/i.test(navigator.userAgent),be={IS_MOBILE:dl,IS_IOS:lh,RENDER_BATCH_SIZE:dl?20:50,ANIMATION_ENABLED:!lh,METEORA_DLMM:"/api/proxy/dlmm",METEORA_DAMM_V2:"/api/proxy/damm",METEORA_DLMM_PROGRAM:"9y5u1v31x1787u493xj2476k9x27288591f9k3792181",RAYDIUM_CLMM:"/api/proxy/raydium",RAYDIUM_CLMM_PROGRAM:"CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK",JUPITER_PRICE:"https://api.jup.ag/price/v3/price",JUPITER_TOKENS:"/api/proxy/jupiter-tokens",JUPITER_ULTRA_API:"https://api.jup.ag/ultra/v1",HELIUS_RPC:"/api/helius/rpc",HELIUS_BATCH:"/api/helius/batch",POOL_BINS:s=>`/api/pool/${s}/bins`,POOL_INFO:s=>`/api/pool/${s}/info`,WS_URL:`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,WS_RECONNECT_DELAY:3e3,MAX_ERRORS:5,REFRESH_INTERVAL:6e4,FAST_REFRESH:3e4,POOL_LIMIT:dl?200:500,SCORE_HIGH:75,SCORE_MEDIUM:50,SCORE_LOW:25,MINTS:{SOL:"So11111111111111111111111111111111111111112",USDC:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",USDT:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",JUP:"JUPyiwrYJFskUPiHa7hkeR8VUtAeFoSYbKedZNsDvCN"},SUPABASE_URL:"https://gdcjtkzxyafvexaaghgh.supabase.co",SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdkY2p0a3p4eWFmdmV4YWFnaGdoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEwMjM3MDYsImV4cCI6MjA4NjU5OTcwNn0.UQxbRBt1mR-vOOiU68Rt59Drre2gTNGQK__SlEc36wY",PLATFORM_FEE_BPS:10,FEE_WALLET:"inFuseD3ZaP1m8raFeDDYyAGfA3QCmy71QGsoRcfvuo",TIP_WALLET:"inFuseD3ZaP1m8raFeDDYyAGfA3QCmy71QGsoRcfvuo",WALLETS:{phantom:{name:"Phantom",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZmlsbD0ibm9uZSI+PHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjNTUyQkYwIiByeD0iOCIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yOSAxOWMtMS44LTEuNS00LjItMi44LTctMi44LTQuMiAwLTcuNyAzLjYtNy43IDguMiAwIDIuOCAxLjIgNS4yIDMuMyA2LjguMi4xLjMuMi41LjJzLjMtLjEuNC0uMmMuNC0uMy44LS41IDEuMS0uNS44IDAgMS41LjcgMS42IDEuNSAwIC4yLjIuMy4zLjNoNC41Yy4xIDAgLjMtLjEuMy0uMy4yLTEuNCAxLjQtMi40IDIuOC0yLjQuNyAwIDEuNC4zIDEuOS44LjEuMS4zLjIuNC4ycy4zLS4xLjQtLjJjMi0xLjcgMy4zLTQuMiAzLjMtNyAwLTEuNy0uNS0zLjMtMS41LTQuNi0uMy0uNC0uNi0uNy0uOS0xLS4zLS4zLS42LS41LS44LS44em0tNyAyLjJjMCAuNy0uNiAxLjMtMS4zIDEuM3MtMS4zLS42LTEuMy0xLjMuNi0xLjMgMS4zLTEuMyAxLjMuNiAxLjMgMS4zem00LjggMGMwIC43LS42IDEuMy0xLjMgMS4zcy0xLjMtLjYtMS4zLTEuMy42LTEuMyAxLjMtMS4zIDEuMy42IDEuMyAxLjN6Ii8+PC9zdmc+",getProvider:()=>{var s;return(s=window.phantom)==null?void 0:s.solana},downloadUrl:"https://phantom.app"},solflare:{name:"Solflare",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHJ4PSI4IiBmaWxsPSIjRkM2QjFEIi8+PHBhdGggZD0iTTIwIDEwTDI4IDE1VjI1TDIwIDMwTDEyIDI1VjE1TDIwIDEwWiIgZmlsbD0id2hpdGUiLz48L3N2Zz4=",getProvider:()=>window.solflare,downloadUrl:"https://solflare.com"},backpack:{name:"Backpack",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHJ4PSI4IiBmaWxsPSIjRTMzNjI5Ii8+PHBhdGggZD0iTTIwIDhDMTMuNCAgOCA4IDEzLjQgOCAyMFYyOEgzMlYyMEMzMiAxMy40IDI2LjYgOCAyMCA4WiIgZmlsbD0id2hpdGUiLz48L3N2Zz4=",getProvider:()=>window.backpack,downloadUrl:"https://backpack.app"}}};let zi=null;function dt(){return zi||(zi=Av(be.SUPABASE_URL,be.SUPABASE_ANON_KEY),zi)}function zt(){return z.getState().wallet.publicKey}async function Ah(){const s=dt(),n=zt();if(!s||!n)return[];try{const{data:r,error:o}=await s.from("user_alerts").select("*").eq("wallet_address",n).order("created_at",{ascending:!1});return o?(console.error("[Supabase] loadAlerts:",o.message),[]):r.map(l=>({id:l.id,poolId:l.pool_id,poolName:l.pool_name,metric:l.metric,condition:l.condition,value:l.value,enabled:l.enabled,createdAt:l.created_at}))}catch(r){return console.error("[Supabase] loadAlerts exception:",r),[]}}async function Ov(s){const n=dt(),r=zt();if(!(!n||!r))try{const o={id:s.id,wallet_address:r,pool_id:s.poolId,pool_name:s.poolName,metric:s.metric,condition:s.condition,value:s.value,enabled:s.enabled,created_at:s.createdAt},{error:l}=await n.from("user_alerts").upsert(o);l&&console.error("[Supabase] saveAlert:",l.message)}catch(o){console.error("[Supabase] saveAlert exception:",o)}}async function Iv(s){const n=dt();if(n)try{const{error:r}=await n.from("user_alerts").delete().eq("id",s);r&&console.error("[Supabase] deleteAlert:",r.message)}catch(r){console.error("[Supabase] deleteAlert exception:",r)}}async function Lv(s,n){const r=dt();if(r)try{const{error:o}=await r.from("user_alerts").update({enabled:n}).eq("id",s);o&&console.error("[Supabase] toggleAlert:",o.message)}catch(o){console.error("[Supabase] toggleAlert exception:",o)}}async function Rh(){const s=dt(),n=zt();if(!s||!n)return[];try{const{data:r,error:o}=await s.from("triggered_alerts").select("*").eq("wallet_address",n).order("triggered_at",{ascending:!1}).limit(50);return o?(console.error("[Supabase] loadTriggeredAlerts:",o.message),[]):r.map(l=>({id:l.alert_id,poolId:l.pool_id,poolName:l.pool_name,metric:l.metric,condition:l.condition,value:l.value,enabled:!0,createdAt:l.triggered_at,triggeredAt:l.triggered_at,currentValue:l.current_value,read:l.read}))}catch(r){return console.error("[Supabase] loadTriggeredAlerts exception:",r),[]}}async function Mv(s){const n=dt(),r=zt();if(!(!n||!r))try{const o={alert_id:s.id,wallet_address:r,pool_id:s.poolId,pool_name:s.poolName,metric:s.metric,condition:s.condition,value:s.value,current_value:s.currentValue,triggered_at:s.triggeredAt,read:s.read},{error:l}=await n.from("triggered_alerts").insert(o);l&&console.error("[Supabase] saveTriggeredAlert:",l.message)}catch(o){console.error("[Supabase] saveTriggeredAlert exception:",o)}}async function Dv(){const s=dt(),n=zt();if(!(!s||!n))try{const{error:r}=await s.from("triggered_alerts").update({read:!0}).eq("wallet_address",n).eq("read",!1);r&&console.error("[Supabase] markRead:",r.message)}catch(r){console.error("[Supabase] markRead exception:",r)}}async function Oh(){const s=dt(),n=zt();if(!s||!n)return null;try{const{data:r,error:o}=await s.from("user_preferences").select("*").eq("wallet_address",n).single();if(o||!r)return null;const l=r;return{activeTab:l.active_tab,jupshieldEnabled:l.jupshield,filters:{minTvl:l.min_tvl,minVolume:l.min_volume,safeOnly:l.safe_only,farmOnly:l.farm_only,poolType:l.pool_type,sortBy:l.sort_by,searchQuery:""}}}catch(r){return console.error("[Supabase] loadPreferences exception:",r),null}}async function Ih(){const s=dt(),n=zt();if(!s||!n)return;const r=z.getState();try{const o={wallet_address:n,active_tab:r.activeTab,jupshield:r.jupshieldEnabled,min_tvl:r.filters.minTvl,min_volume:r.filters.minVolume,safe_only:r.filters.safeOnly,farm_only:r.filters.farmOnly,pool_type:r.filters.poolType,sort_by:r.filters.sortBy,updated_at:new Date().toISOString()},{error:l}=await s.from("user_preferences").upsert(o);l&&console.error("[Supabase] savePreferences:",l.message)}catch(o){console.error("[Supabase] savePreferences exception:",o)}}async function $v(s){const n=dt();if(!n)return;const r=s.slice(0,50);if(r.length!==0)try{const o=r.map(u=>({pool_address:u.address||u.id,pool_name:u.name,protocol:u.protocol,tvl:u.tvl,volume:u.volume,apr:u.apr,fees:u.fees,score:u.score})),{error:l}=await n.from("pool_snapshots").insert(o);l&&console.error("[Supabase] savePoolSnapshots:",l.message)}catch(o){console.error("[Supabase] savePoolSnapshots exception:",o)}}async function Uv(s,n=24){const r=dt();if(!r)return[];try{const o=new Date(Date.now()-n*60*60*1e3).toISOString(),{data:l,error:u}=await r.from("pool_snapshots").select("*").eq("pool_address",s).gte("captured_at",o).order("captured_at",{ascending:!0});return u?(console.error("[Supabase] loadPoolHistory:",u.message),[]):l}catch(o){return console.error("[Supabase] loadPoolHistory exception:",o),[]}}async function Fv(s){const n=dt(),r=zt();if(!(!n||!r||s<=0))try{const{error:o}=await n.from("wallet_balances").insert({wallet_address:r,balance_sol:s});o&&console.error("[Supabase] saveWalletBalance:",o.message)}catch(o){console.error("[Supabase] saveWalletBalance exception:",o)}}async function Bv(s=24){const n=dt(),r=zt();if(!n||!r)return[];try{const o=new Date(Date.now()-s*60*60*1e3).toISOString(),{data:l,error:u}=await n.from("wallet_balances").select("*").eq("wallet_address",r).gte("captured_at",o).order("captured_at",{ascending:!0});return u?(console.error("[Supabase] loadWalletBalanceHistory:",u.message),[]):l}catch(o){return console.error("[Supabase] loadWalletBalanceHistory exception:",o),[]}}async function zv(){const s=zt();if(!s)return;console.log("[Supabase] Hydrating data for",s.slice(0,8)+"...");const[n,r,o]=await Promise.all([Ah(),Rh(),Oh()]),l=z.getState();n.length>0&&l.setAlerts(n),r.length>0&&z.setState({triggeredAlerts:r.slice(0,50)}),o&&(o.activeTab&&l.setActiveTab(o.activeTab),o.jupshieldEnabled!==void 0&&l.setJupshieldEnabled(o.jupshieldEnabled),o.filters&&l.setFilters(o.filters)),console.log("[Supabase] Hydrated:",n.length,"alerts,",r.length,"triggered, prefs:",!!o)}let hl=null;function Wv(){hl&&clearTimeout(hl),hl=setTimeout(()=>Ih(),2e3)}const ct={isEnabled:()=>!!dt(),hydrate:zv,loadAlerts:Ah,saveAlert:Ov,deleteAlert:Iv,toggleAlert:Lv,loadTriggeredAlerts:Rh,saveTriggeredAlert:Mv,markTriggeredAlertsRead:Dv,loadPreferences:Oh,savePreferences:Ih,debouncedSavePreferences:Wv,savePoolSnapshots:$v,loadPoolHistory:Uv,saveWalletBalance:Fv,loadWalletBalanceHistory:Bv},z=nm((s,n)=>({pools:[],filteredPools:[],opportunities:[],verifiedTokens:new Set,sources:[],expandedPoolId:null,expandedOppId:null,activeTab:"opportunities",isInitializing:!0,loadProgress:0,loadMessage:"Initializing...",showWalletModal:!1,showExecModal:!1,execPool:null,alerts:[],triggeredAlerts:[],aiSuggestions:[],poolTransactions:{},wsConnected:!1,jupshieldEnabled:!0,lastRefresh:0,wallet:{connected:!1,publicKey:null,provider:null,name:null,balance:0},apiStatus:{meteora:!1,jupiter:!1,helius:!1,raydium:!1},filters:{minTvl:0,minVolume:0,safeOnly:!1,farmOnly:!1,poolType:"all",sortBy:"score",searchQuery:""},searchResults:[],setPools:r=>s({pools:r}),setFilteredPools:r=>s({filteredPools:r}),setOpportunities:r=>s({opportunities:r}),setVerifiedTokens:r=>s({verifiedTokens:r}),setSources:r=>s({sources:r}),setExpandedPoolId:r=>s({expandedPoolId:r}),setExpandedOppId:r=>s({expandedOppId:r}),setActiveTab:r=>{const o=n().activeTab;s(o==="search-alerts"&&r!=="search-alerts"?{activeTab:r,searchResults:[]}:{activeTab:r}),ct.debouncedSavePreferences()},setIsInitializing:r=>s({isInitializing:r}),setLoadProgress:(r,o)=>s({loadProgress:r,loadMessage:o}),setShowWalletModal:r=>s({showWalletModal:r}),setShowExecModal:r=>s({showExecModal:r}),setExecPool:r=>s({execPool:r}),setAlerts:r=>s({alerts:r}),addAlert:r=>{s(o=>({alerts:[...o.alerts,r]})),ct.saveAlert(r)},removeAlert:r=>{s(o=>({alerts:o.alerts.filter(l=>l.id!==r)})),ct.deleteAlert(r)},addTriggeredAlert:r=>{s(o=>({triggeredAlerts:[r,...o.triggeredAlerts].slice(0,50)})),ct.saveTriggeredAlert(r)},clearTriggeredAlerts:()=>s({triggeredAlerts:[]}),markTriggeredAlertsRead:()=>{s(r=>({triggeredAlerts:r.triggeredAlerts.map(o=>({...o,read:!0}))})),ct.markTriggeredAlertsRead()},setAiSuggestions:r=>s({aiSuggestions:r}),setPoolTransactions:(r,o)=>s(l=>{const u={...l.poolTransactions,[r]:o},d=Object.keys(u);if(d.length>8){const f=new Set([l.expandedPoolId,l.expandedOppId].filter(Boolean));for(const m of d){if(Object.keys(u).length<=8)break;!f.has(m)&&m!==r&&delete u[m]}}return{poolTransactions:u}}),addPoolTransaction:(r,o)=>s(l=>({poolTransactions:{...l.poolTransactions,[r]:[o,...l.poolTransactions[r]||[]].slice(0,15)}})),setPoolBins:(r,o,l,u)=>s(d=>{const f=m=>m.id===r?{...m,bins:o,activeBin:l,currentPrice:u}:m;return{pools:d.pools.map(f),filteredPools:d.filteredPools.map(f),opportunities:d.opportunities.map(f)}}),setWsConnected:r=>s({wsConnected:r}),setJupshieldEnabled:r=>{s({jupshieldEnabled:r}),ct.debouncedSavePreferences()},setLastRefresh:r=>s({lastRefresh:r}),setWallet:r=>s(o=>({wallet:{...o.wallet,...r}})),setApiStatus:(r,o)=>s(l=>({apiStatus:{...l.apiStatus,[r]:o}})),setFilters:r=>{s(o=>({filters:{...o.filters,...r}})),ct.debouncedSavePreferences()},setSearchResults:r=>s({searchResults:r}),togglePool:r=>{const{expandedPoolId:o,poolTransactions:l}=n();if(o===r){const u={...l};delete u[r],s({expandedPoolId:null,poolTransactions:u})}else{const u={...l};o&&delete u[o],s({expandedPoolId:r,expandedOppId:null,poolTransactions:u})}},toggleOpp:r=>{const{expandedOppId:o,poolTransactions:l}=n();if(o===r){const u={...l};delete u[r],s({expandedOppId:null,poolTransactions:u})}else{const u={...l};o&&delete u[o],s({expandedOppId:r,expandedPoolId:null,poolTransactions:u})}},checkAlerts:()=>{const{alerts:r,pools:o,triggeredAlerts:l,addTriggeredAlert:u}=n();if(r.length===0||o.length===0)return;const d=new Set(l.filter(f=>Date.now()-f.triggeredAt<6e5).map(f=>f.id));for(const f of r){if(!f.enabled||d.has(f.id))continue;const m=o.find(S=>S.id===f.poolId);if(!m)continue;let v=0;switch(f.metric){case"apr":v=parseFloat(m.apr);break;case"tvl":v=m.tvl;break;case"volume":v=m.volume;break;case"score":v=m.score;break;case"fees":v=m.fees;break}(f.condition==="above"&&v>f.value||f.condition==="below"&&v<f.value)&&u({...f,triggeredAt:Date.now(),currentValue:v,read:!1})}}}));function Oe(s){return s==null||isNaN(s)?"$0":s>=1e6?"$"+(s/1e6).toFixed(2)+"M":s>=1e3?"$"+(s/1e3).toFixed(1)+"K":"$"+s.toFixed(2)}function wn(s){return s==null||isNaN(s)?"0":s>=1e3?s.toFixed(2):s>=1?s.toFixed(4):s.toFixed(6)}function uh(s){const n=Date.now()-s;return n<6e4?Math.floor(n/1e3)+"s":n<36e5?Math.floor(n/6e4)+"m":Math.floor(n/36e5)+"h"}function ch(s,n=8){return s?s.length>n?s.slice(0,n)+"...":s:""}function Tl(s,n=4){return s?`${s.slice(0,n)}...${s.slice(-n)}`:""}function Wi(s,n,r,o,l,u){if(u)return"danger";const d=o.has(s),f=o.has(n);return l||d&&f?"safe":!d&&!f&&r<1e4?"danger":"warning"}function Vi(s,n,r,o,l,u,d,f){let m=50;return s>5e5?m+=20:s>1e5?m+=15:s>1e4&&(m+=10),n>1e5?m+=15:n>1e4?m+=10:n>1e3&&(m+=5),r>100?m+=10:r>50?m+=7:r>20&&(m+=4),o==="safe"?m+=5:o==="danger"&&(m-=15),l&&(m+=3),u&&(m+=5),(d??0)>0&&(m+=3),f&&(m+=3),Math.min(99,Math.max(10,Math.round(m)))}function Vv(s){return!s.fees1h||!s.fees24h||s.fees24h===0?!1:s.fees1h*24>s.fees24h*1.5}function Hv(s,n){const r=s.fees1h??0,o=parseFloat(s.apr),l=(s.volumeToTvl*100).toFixed(0);if(n==="hot"&&r>0){const u=s.fees24h&&s.fees24h>0?s.fees24h/24:0;return{short:"Consider narrow-range position near active bin to capture fee spike",detail:`1h fees are ${u>0?(r/u).toFixed(1):"2+"}x the 24h hourly average. A concentrated position within 3-5 bins of active price captures 80%+ of swap fees. This elevated activity may be temporary  consider a 4-12 hour hold with tight monitoring.`}}return n==="active"&&r>0&&s.tvl>0?{short:"High fee generation relative to TVL  ideal for concentrated liquidity",detail:`Fees/TVL ratio of ${(r/s.tvl*100).toFixed(3)}% in the last hour. Place liquidity in a tight range around the current price to maximize fee capture. With ${Oe(s.tvl)} TVL, even small positions earn proportional fees.`}:s.volumeToTvl>.3?{short:"Heavy trading volume relative to liquidity depth  good for range orders",detail:`Vol/TVL ratio of ${l}% indicates high turnover. Place a range order spanning 2-3% around current price. Higher volume means more fee-generating swaps passing through your position.`}:s.farmActive&&(s.farmApr??0)>0?{short:"Farm rewards stack with trading fees for enhanced yield",detail:`Base trading APR of ${o}% plus farm rewards of ${s.farmApr}%. Wider ranges acceptable here since farm rewards aren't concentration-dependent. Good candidate for set-and-forget positions.`}:s.score>=80&&r===0?{short:"Strong fundamentals  monitor for fee uptick before entering",detail:`Score ${s.score} reflects high TVL, verified tokens, and consistent volume. Current fee generation is below peak  watch for volume spikes to time entry. When fees increase, this pool's depth makes it a safe LP destination.`}:o>30?{short:`${o}% APR  evaluate position range to maximize fee capture`,detail:`Above-average APR of ${o}% signals active trading. Position liquidity within a few percentage points of current price for optimal fee-to-impermanent-loss ratio. Reassess range every 24-48 hours.`}:{short:"Solid pool fundamentals  suitable for standard liquidity position",detail:`TVL of ${Oe(s.tvl)} with ${l}% vol/TVL ratio. A moderate-width range around the current price balances fee capture with impermanent loss risk.`}}function fl(s){const n=s.filter(o=>o.safety==="safe"&&o.tvl>1e3),r=[];for(const o of n){let l=0,u="",d="standard";const f=o.fees1h??0,m=o.feeTvlRatio??0,v=parseFloat(o.apr),y=o.protocol==="Meteora DLMM",S=o.protocol==="Raydium CLMM";if(o.isHot&&f>0&&o.tvl>5e3){l+=50,d="hot";const k=f*24;u=`FEE SPIKE: 1h fees ${Oe(f)}  projected ${Oe(k)}/day`}f>0&&o.tvl>0&&f/o.tvl>5e-4&&(l+=35,u||(d="active",u=`ACTIVE: ${Oe(f)} fees in last hour (${(f/o.tvl*100).toFixed(3)}% of TVL)`)),o.volumeToTvl>.5&&o.tvl>5e3&&(l+=30,u||(d="active",u=`VOLUME SURGE: ${(o.volumeToTvl*100).toFixed(0)}% vol/TVL with ${Oe(o.tvl)} liquidity`)),o.volumeToTvl>.2&&o.tvl>1e4&&(l+=20,u||(u=`HIGH VOLUME: ${(o.volumeToTvl*100).toFixed(0)}% vol/TVL ratio`)),v>30&&o.score>=60&&(l+=15,u||(u=`HIGH APR: ${o.apr}% with score ${o.score}`)),o.score>=80&&(l+=10,u||(u=`TOP SCORER: ${o.score} points`)),o.farmActive&&o.tvl>5e3&&(l+=12,u||(u=`FARM: ${o.apr}% APR + farm rewards (${o.farmApr??0}% bonus)`)),m>.005&&(l+=8,u||(u=`EFFICIENT: ${(m*100).toFixed(2)}% fee/TVL ratio`)),(y||S)&&(l+=5),l>0&&u&&r.push({pool:o,oppScore:l,reason:u,oppType:d})}return r.sort((o,l)=>l.oppScore-o.oppScore||l.pool.score-o.pool.score),r.slice(0,15).map(({pool:o,reason:l,oppType:u})=>{const{short:d,detail:f}=Hv(o,u);return{...o,reason:l,oppType:u,suggestion:d,suggestionDetail:f}})}function qv(s){const n=s.address||s.id;return s.protocol==="Raydium CLMM"?`https://raydium.io/clmm/create-position/?pool_id=${n}`:s.protocol==="Meteora DLMM"?`https://app.meteora.ag/dlmm/${n}`:`https://app.meteora.ag/dammv2/${n}`}function Kv(s){return s.protocol==="Raydium CLMM"?"Raydium":"Meteora"}function Gv(s){return s.protocol==="Raydium CLMM"?"CLMM":s.protocol==="Meteora DLMM"?"DLMM":"DAMM"}async function Hi(s,n,r=1){for(let o=0;o<=r;o++)try{const l=await fetch(s,n);if(l.ok)return l;if(l.status===503&&o<r){const u=await l.json().catch(()=>({})),d=Math.min((u.retryAfter||3)*1e3,5e3);await new Promise(f=>setTimeout(f,d));continue}throw new Error(`HTTP ${l.status}`)}catch(l){if(o<r){await new Promise(u=>setTimeout(u,500*Math.pow(2,o)));continue}throw l}throw new Error("fetchWithRetry exhausted")}const Lt={async fetchJupiterTokens(){const s=z.getState();try{const r=await(await Hi(be.JUPITER_TOKENS)).json(),o=Array.isArray(r)?r:r.tokens||[],l=new Set(s.verifiedTokens);o.forEach(u=>{const d=typeof u=="string"?u:u.address||u.mint||u.id;d&&l.add(d)}),s.setVerifiedTokens(l),s.setApiStatus("jupiter",!0)}catch{s.setApiStatus("jupiter",!1);const n=new Set(s.verifiedTokens);[be.MINTS.SOL,be.MINTS.USDC,be.MINTS.USDT,be.MINTS.JUP,"DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263"].forEach(r=>n.add(r)),s.setVerifiedTokens(n)}},async fetchPools(){var n,r,o,l,u,d;const s=z.getState();try{let f=[];const m=new Set,v=[],y=Promise.race([Hi(be.METEORA_DLMM,void 0,1).then(j=>j.json()),new Promise((j,P)=>setTimeout(()=>P(new Error("DLMM timeout (15s)")),15e3))]),[S,k,w]=await Promise.allSettled([y,Hi(be.METEORA_DAMM_V2).then(j=>j.json()),Hi(be.RAYDIUM_CLMM).then(j=>j.json())]);if(S.status==="rejected"&&console.warn("[DataService] DLMM fetch failed:",((n=S.reason)==null?void 0:n.message)||S.reason),k.status==="rejected"&&console.warn("[DataService] DAMM fetch failed:",((r=k.reason)==null?void 0:r.message)||k.reason),w.status==="rejected"&&console.warn("[DataService] Raydium fetch failed:",((o=w.reason)==null?void 0:o.message)||w.reason),S.status==="fulfilled"&&Array.isArray(S.value)){const j=S.value.filter(P=>P.name&&P.address&&!P.hide&&!P.is_blacklisted&&parseFloat(P.liquidity||0)>100).slice(0,be.POOL_LIMIT).map(P=>this.processDLMM(P,s.verifiedTokens));for(const P of j)m.has(P.address)||(m.add(P.address),f.push(P));v.push(`DLMM:${j.length}`),s.setApiStatus("meteora",!0)}else{console.log("[DataService] DLMM unavailable, trying DexScreener for Meteora pools...");try{const j=await fetch("https://api.dexscreener.com/latest/dex/search?q=meteora");if(j.ok){const T=((await j.json()).pairs??[]).filter(L=>{var O;return L.dexId==="meteora"&&((O=L.liquidity)==null?void 0:O.usd)>100}).slice(0,200).map(L=>this.processDexScreener(L,s.verifiedTokens));for(const L of T)m.has(L.address)||(m.add(L.address),f.push(L));T.length&&(v.push(`DexScreener-DLMM:${T.length}`),s.setApiStatus("meteora",!0))}}catch{}}if(k.status==="fulfilled"&&((l=k.value)!=null&&l.data)){let j=0;const P=k.value.data.filter(T=>T.pool_address&&(T.tvl||0)>100).slice(0,be.POOL_LIMIT).map(T=>this.processDAMMv2(T,s.verifiedTokens));for(const T of P)m.has(T.address)||(m.add(T.address),f.push(T),j++);v.push(`DAMM:${j}`)}if(w.status==="fulfilled"&&((d=(u=w.value)==null?void 0:u.data)!=null&&d.data)){let j=0;const P=w.value.data.data.filter(T=>T.id&&(T.tvl||0)>100).slice(0,be.POOL_LIMIT).map(T=>this.processRaydiumCLMM(T,s.verifiedTokens));for(const T of P)m.has(T.address)||(m.add(T.address),f.push(T),j++);j>0&&v.push(`Raydium:${j}`),s.setApiStatus("raydium",!0)}if(f.length===0)try{const j=await fetch("https://api.dexscreener.com/latest/dex/search?q=meteora");j.ok&&(f=((await j.json()).pairs??[]).filter(T=>{var L;return T.dexId==="meteora"&&((L=T.liquidity)==null?void 0:L.usd)>100}).slice(0,150).map(T=>this.processDexScreener(T,s.verifiedTokens)),f.length&&v.push(`DexScreener:${f.length}`))}catch{}if(f.length===0)throw new Error("No pools from any source");s.setPools(f),s.setSources(v),s.setApiStatus("meteora",!0),console.log(`[DataService] Loaded ${f.length} pools from: ${v.join(", ")}`)}catch(f){console.error("[DataService] fetchPools error:",f),s.setApiStatus("meteora",!1)}},processDLMM(s,n){var Ee,et,ht,he,Me,He,Be,De,ye;const r=parseFloat(s.liquidity)||0,o=parseFloat(s.trade_volume_24h)||0,l=parseFloat(s.apr)||0,u=parseFloat(s.apy)||0,d=parseFloat(s.fees_24h)||0,f=parseFloat(s.today_fees)||0,m=s.mint_x||"",v=s.mint_y||"",y=s.is_verified===!0,S=Wi(m,v,r,n,y,s.is_blacklisted),k=parseFloat(s.farm_apr)||0,w=parseFloat(s.farm_apy)||0,j=k>0||w>0||!!s.reward_mint_x||!!s.reward_mint_y,P=k>0,T=((Ee=s.fee_tvl_ratio)==null?void 0:Ee.hour_24)||0,L=((et=s.fee_tvl_ratio)==null?void 0:et.hour_1)||0,O=parseFloat((ht=s.fees)==null?void 0:ht.hour_1)||0,b=parseFloat((he=s.fees)==null?void 0:he.hour_4)||0,I=parseFloat((Me=s.fees)==null?void 0:Me.hour_12)||0,G=Vi(r,o,l,S,j,P,0,y),H=parseFloat(s.current_price)||1,Z=parseInt(s.bin_step)||1,de={id:s.address,address:s.address,name:s.name||"Unknown",protocol:"Meteora DLMM",mintX:m,mintY:v,tvl:r,volume:o,apr:l.toFixed(2),apy:u.toFixed(2),fees:d,feeBps:parseFloat(s.base_fee_percentage)||0,binStep:Z,currentPrice:H,safety:S,score:G,bins:[],activeBin:0,icon1:((Be=(He=s.name)==null?void 0:He.split("/")[0])==null?void 0:Be.trim().slice(0,4))||"?",icon2:((ye=(De=s.name)==null?void 0:De.split("/")[1])==null?void 0:ye.trim().slice(0,4))||"?",volumeToTvl:r>0?o/r:0,feeTvlRatio:T,feeTvlRatio1h:L,fees1h:O,fees4h:b,fees12h:I,fees24h:d,todayFees:f,projectedFees24h:O>0?O*24:void 0,hasFarm:j,farmActive:P,farmApr:k,farmApy:w,tags:s.tags||[],isVerified:y,cumulativeFeeVolume:parseFloat(s.cumulative_fee_volume||0),cumulativeTradeVolume:parseFloat(s.cumulative_trade_volume||0)};return de.isHot=Vv(de),de},processDAMMv2(s,n){const r=parseFloat(s.tvl)||0,o=parseFloat(s.volume24h)||0,l=parseFloat(s.apr)||0,u=parseFloat(s.fee24h)||0,d=s.token_a_mint||"",f=s.token_b_mint||"",m=Wi(d,f,r,n,s.tokens_verified),v=!!s.has_farm,y=!!s.farm_active,S=Vi(r,o,l,m,v,y,parseFloat(s.permanent_lock_liquidity||0)),k=parseFloat(s.pool_price)||1,w=s.pool_name||`${s.token_a_symbol||"?"}/${s.token_b_symbol||"?"}`;return{id:s.pool_address,address:s.pool_address,name:w,protocol:"Meteora DAMM v2",mintX:d,mintY:f,tvl:r,volume:o,apr:l.toFixed(2),fees:u,feeBps:parseFloat(s.base_fee)||0,feeTvlRatio:parseFloat(s.fee_tvl_ratio)||0,binStep:1,currentPrice:k,safety:m,score:S,bins:[],activeBin:0,icon1:(s.token_a_symbol||w.split(/[-\/]/)[0]||"?").trim().slice(0,4),icon2:(s.token_b_symbol||w.split(/[-\/]/)[1]||"?").trim().slice(0,4),volumeToTvl:r>0?o/r:0,hasFarm:v,farmActive:y,permanentLockLiquidity:parseFloat(s.permanent_lock_liquidity||0),creator:s.creator,createdAt:s.created_at,updatedAt:s.updated_at,tokenAmountA:parseFloat(s.token_a_amount||0),tokenAmountB:parseFloat(s.token_b_amount||0),tokenAmountAUsd:parseFloat(s.token_a_amount_usd||0),tokenAmountBUsd:parseFloat(s.token_b_amount_usd||0),virtualPrice:parseFloat(s.virtual_price||0),minPrice:parseFloat(s.min_price||0),maxPrice:parseFloat(s.max_price||0),isHot:!1}},processRaydiumCLMM(s,n){var j,P,T,L,O,b,I;const r=parseFloat(s.tvl)||0,o=parseFloat((j=s.day)==null?void 0:j.volume)||0,l=parseFloat((P=s.day)==null?void 0:P.volumeFee)||0,u=parseFloat((T=s.day)==null?void 0:T.apr)||(r>0?l/r*365*100:0),d=((L=s.mintA)==null?void 0:L.address)||"",f=((O=s.mintB)==null?void 0:O.address)||"",m=Wi(d,f,r,n),v=Vi(r,o,u,m),y=parseFloat(s.price)||1,S=((b=s.mintA)==null?void 0:b.symbol)||"?",k=((I=s.mintB)==null?void 0:I.symbol)||"?",w=r>0?l/r:0;return{id:s.id,address:s.id,name:`${S}/${k}`,protocol:"Raydium CLMM",mintX:d,mintY:f,tvl:r,volume:o,apr:u.toFixed(2),fees:l,feeBps:parseFloat(s.feeRate)||.25,binStep:1,currentPrice:y,safety:m,score:v,bins:[],activeBin:0,icon1:S.slice(0,4),icon2:k.slice(0,4),volumeToTvl:r>0?o/r:0,feeTvlRatio:w,feeTvlRatio1h:0,fees1h:0,hasFarm:!!s.farmCount,farmActive:(s.farmCount||0)>0,isHot:!1}},processDexScreener(s,n){var f,m,v,y,S,k,w,j,P,T,L,O,b,I;const r=((f=s.liquidity)==null?void 0:f.usd)||0,o=((m=s.volume)==null?void 0:m.h24)||0,l=Wi(((v=s.baseToken)==null?void 0:v.address)||"",((y=s.quoteToken)==null?void 0:y.address)||"",r,n),u=r>0?o/r*365*.003*100:0,d=Vi(r,o,u,l);return{id:s.pairAddress,address:s.pairAddress,name:`${((S=s.baseToken)==null?void 0:S.symbol)||"?"}/${((k=s.quoteToken)==null?void 0:k.symbol)||"?"}`,protocol:"Meteora DLMM",mintX:((w=s.baseToken)==null?void 0:w.address)||"",mintY:((j=s.quoteToken)==null?void 0:j.address)||"",tvl:r,volume:o,apr:u.toFixed(2),fees:o*.003,feeBps:.3,binStep:1,currentPrice:parseFloat(s.priceUsd)||1,safety:l,score:d,bins:[],activeBin:0,icon1:(((P=s.baseToken)==null?void 0:P.symbol)||"?").slice(0,4),icon2:(((T=s.quoteToken)==null?void 0:T.symbol)||"?").slice(0,4),icon1Url:(O=(L=s.baseToken)==null?void 0:L.info)==null?void 0:O.imageUrl,icon2Url:(I=(b=s.quoteToken)==null?void 0:b.info)==null?void 0:I.imageUrl,volumeToTvl:r>0?o/r:0,isHot:!1}},applyFilters(){const s=z.getState(),{pools:n,filters:r,jupshieldEnabled:o}=s;let l=[...n];if(l=l.filter(d=>d.volume>0),o&&(l=l.filter(d=>d.safety!=="danger")),r.minTvl>0&&(l=l.filter(d=>d.tvl>=r.minTvl)),r.minVolume>0&&(l=l.filter(d=>d.volume>=r.minVolume)),r.safeOnly&&(l=l.filter(d=>d.safety==="safe")),r.farmOnly&&(l=l.filter(d=>d.farmActive)),r.poolType!=="all"){const d={dlmm:"Meteora DLMM",damm:"Meteora DAMM v2",raydium:"Raydium CLMM"};l=l.filter(f=>f.protocol===d[r.poolType])}const u={score:(d,f)=>f.score-d.score,tvl:(d,f)=>f.tvl-d.tvl,volume:(d,f)=>f.volume-d.volume,apr:(d,f)=>parseFloat(f.apr)-parseFloat(d.apr),fees:(d,f)=>f.fees-d.fees,fees1h:(d,f)=>(f.fees1h||0)-(d.fees1h||0),feeTvl1h:(d,f)=>(f.feeTvlRatio1h||0)-(d.feeTvlRatio1h||0),feeTvl:(d,f)=>(f.feeTvlRatio||0)-(d.feeTvlRatio||0)};l.sort(u[r.sortBy]||u.score),s.setFilteredPools(l)},searchPools(s){const n=z.getState();if(!s.trim())return[];const r=s.toLowerCase().trim();return n.pools.filter(o=>{var l,u;return o.name.toLowerCase().includes(r)||o.address.toLowerCase().includes(r)||((l=o.mintX)==null?void 0:l.toLowerCase().includes(r))||((u=o.mintY)==null?void 0:u.toLowerCase().includes(r))}).slice(0,50)}},Jv=4e3,Qv=2e3,Yv=5,Xv=150;class Zv{constructor(){lt(this,"ws",null);lt(this,"state","disconnected");lt(this,"messageQueue",[]);lt(this,"activePool",null);lt(this,"pollInterval",null);lt(this,"lastFetchTime",0);lt(this,"seenSignatures",new Set);lt(this,"reconnectAttempts",0);lt(this,"errorCount",0)}connect(){if(this.state==="disconnected"){if(be.IS_MOBILE){z.getState().setWsConnected(!0);return}this.connectWebSocket()}}subscribeToPool(n){n&&(this.activePool=n,this.seenSignatures.clear(),this.errorCount=0,this.safeSend(JSON.stringify({type:"subscribe",address:n})),this.lastFetchTime=0,this.fetchPoolTransactions(n),this.fetchPoolBins(n),this.startPolling())}unsubscribeFromPool(n){n&&(this.safeSend(JSON.stringify({type:"unsubscribe",address:n})),this.activePool===n&&(this.activePool=null,this.stopPolling(),this.seenSignatures.clear(),this.lastFetchTime=0))}disconnect(){this.stopPolling(),this.activePool=null,this.messageQueue=[],this.seenSignatures.clear(),this.lastFetchTime=0,this.reconnectAttempts=0,this.errorCount=0,this.state="disconnected",this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onclose=null,this.ws.onerror=null,this.ws.close(),this.ws=null),z.getState().setWsConnected(!1)}connectWebSocket(){if(!(this.state==="connecting"||this.state==="connected")){this.state="connecting",console.log("[WS] Connecting...");try{this.ws=new WebSocket(be.WS_URL)}catch{console.warn("[WS] Failed to create WebSocket, using polling only"),this.state="disconnected";return}this.ws.onopen=()=>{console.log("[WS] Connected"),this.state="connected",this.reconnectAttempts=0;const n=z.getState();n.setApiStatus("helius",!0),n.setWsConnected(!0),this.flushQueue(),this.activePool&&this.safeSend(JSON.stringify({type:"subscribe",address:this.activePool}))},this.ws.onmessage=n=>{try{const r=JSON.parse(n.data);this.handleMessage(r)}catch{}},this.ws.onclose=()=>{if(console.log("[WS] Disconnected"),this.state="disconnected",this.ws=null,z.getState().setWsConnected(!1),this.reconnectAttempts<Yv){this.reconnectAttempts++;const r=Math.min(1e3*Math.pow(2,this.reconnectAttempts-1),8e3);console.log(`[WS] Reconnecting in ${r}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>this.connectWebSocket(),r)}else console.log("[WS] Max reconnect attempts reached, polling only")},this.ws.onerror=()=>{console.warn("[WS] Error")}}}safeSend(n){if(!this.ws){this.state==="connecting"&&this.messageQueue.push(n);return}if(this.ws.readyState===WebSocket.OPEN)try{this.ws.send(n)}catch(r){console.warn("[WS] Send failed:",r)}else this.ws.readyState===WebSocket.CONNECTING&&this.messageQueue.push(n)}flushQueue(){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)return;const n=this.messageQueue.splice(0);for(const r of n)try{this.ws.send(r)}catch(o){console.warn("[WS] Queue flush send failed:",o)}}handleMessage(n){var r,o;if(n.type==="connected"){console.log(`[WS] Server mode: ${n.mode||"standard"}`);return}if(n.type==="subscribed"){console.log("[WS] Subscribed to:",n.address),n.address===this.activePool&&(this.lastFetchTime=0,this.fetchPoolTransactions(n.address));return}if(n.type==="transaction"||n.type==="transaction_notification"){if(this.activePool){const l=z.getState(),u=l.expandedPoolId||l.expandedOppId;if(u){if((r=n.data)!=null&&r.transaction){const f=this.parseEnhancedTransaction(n.data);f&&!this.seenSignatures.has(f.signature)&&(this.seenSignatures.add(f.signature),l.addPoolTransaction(u,f))}const d=l.pools.find(f=>f.id===u);d!=null&&d.address&&this.fetchPoolTransactions(d.address)}}return}(n.type==="log_notification"||(o=n.params)!=null&&o.result)&&this.activePool&&this.fetchPoolTransactions(this.activePool)}parseEnhancedTransaction(n){var r,o;try{const l=n.transaction;return(o=(r=l==null?void 0:l.transaction)==null?void 0:r.signatures)!=null&&o[0]?this.parseTransactionInner(l,l.transaction.signatures[0]):null}catch{return null}}async fetchPoolTransactions(n){var l,u,d;if(!n||n!==this.activePool)return;const r=Date.now(),o=this.errorCount>5?Math.min(1e4*Math.pow(2,this.errorCount-6),6e4):Qv;if(!(r-this.lastFetchTime<o)){this.lastFetchTime=r;try{const f=await fetch(be.HELIUS_RPC,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"getSignaturesForAddress",params:[n,{limit:10}]})});if(!f.ok){this.errorCount++;return}const m=await f.json();if(m.error){this.errorCount++;return}const v=m.result||[];if(v.length===0)return;const y=v.filter(T=>!this.seenSignatures.has(T.signature));if(y.length===0)return;const S=y.slice(0,8),k=await fetch(be.HELIUS_BATCH,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:S.map(T=>({method:"getTransaction",params:[T.signature,{maxSupportedTransactionVersion:0,encoding:"jsonParsed"}]}))})});if(!k.ok){this.errorCount++;return}const w=await k.json(),j=(Array.isArray(w)?w:[]).filter(T=>T.result);for(const T of j){const L=(d=(u=(l=T.result)==null?void 0:l.transaction)==null?void 0:u.signatures)==null?void 0:d[0];L&&this.seenSignatures.add(L)}const P=j.map(T=>this.parseTransaction(T.result)).filter(T=>T!==null);if(this.seenSignatures.size>Xv){const T=[...this.seenSignatures];this.seenSignatures=new Set(T.slice(-100))}if(n!==this.activePool)return;if(P.length>0){const T=z.getState(),L=T.pools.find(O=>O.address===n);if(L){const O=T.poolTransactions[L.id]||[],b=new Set(O.map(H=>H.signature)),G=[...P.filter(H=>!b.has(H.signature)),...O].sort((H,Z)=>Z.timestamp-H.timestamp).slice(0,15);T.setPoolTransactions(L.id,G)}}this.errorCount=0}catch(f){this.errorCount++,console.warn("[WS] fetchPoolTransactions error:",f)}}}parseTransaction(n){var r,o;return(o=(r=n==null?void 0:n.transaction)==null?void 0:r.signatures)!=null&&o[0]?this.parseTransactionInner(n,n.transaction.signatures[0]):null}parseTransactionInner(n,r){var y,S,k,w,j,P,T,L;const o=(n.blockTime||Math.floor(Date.now()/1e3))*1e3,l=((y=n.meta)==null?void 0:y.logMessages)||[];let u="swap";for(const O of l){if(O.includes("AddLiquidity")||O.includes("Deposit")){u="add";break}if(O.includes("RemoveLiquidity")||O.includes("Withdraw")){u="remove";break}if(O.includes("Swap")){u="swap";break}}let d="0";const f=((S=n.meta)==null?void 0:S.preTokenBalances)||[],m=((k=n.meta)==null?void 0:k.postTokenBalances)||[];let v=0;for(const O of m){const b=f.find(Z=>Z.accountIndex===O.accountIndex&&Z.mint===O.mint),I=b?parseFloat(((w=b.uiTokenAmount)==null?void 0:w.uiAmountString)||"0"):0,G=parseFloat(((j=O.uiTokenAmount)==null?void 0:j.uiAmountString)||"0"),H=Math.abs(G-I);H>v&&(v=H)}for(const O of f)if(!m.find(I=>I.accountIndex===O.accountIndex&&I.mint===O.mint)){const I=parseFloat(((P=O.uiTokenAmount)==null?void 0:P.uiAmountString)||"0");I>v&&(v=I)}if(v>.001&&(d=v.toFixed(4)),d==="0"){const O=((T=n.meta)==null?void 0:T.preBalances)||[],b=((L=n.meta)==null?void 0:L.postBalances)||[];if(O.length>1&&b.length>1)for(let I=1;I<Math.min(O.length,b.length);I++){const G=Math.abs(b[I]-O[I])/1e9;G>.001&&G>parseFloat(d||"0")&&(d=G.toFixed(4))}if(d==="0"&&O.length>0&&b.length>0){const I=Math.abs(b[0]-O[0])/1e9;I>.01&&(d=I.toFixed(4))}}return d==="0"||parseFloat(d)<.01?null:{signature:r,type:u,amount:d,timestamp:o}}async fetchPoolBins(n,r=0){if(!(!n||n!==this.activePool))try{const o=await fetch(be.POOL_BINS(n));if(!o.ok){if(o.status===400)return;r<2?(console.warn(`[WS] SDK bins HTTP ${o.status}, retrying in ${(r+1)*3}s...`),setTimeout(()=>this.fetchPoolBins(n,r+1),(r+1)*3e3)):console.warn("[WS] SDK bins failed after retries:",o.status);return}const l=await o.json();if(n!==this.activePool)return;if(l.bins&&l.bins.length>0&&l.activeBin){const u=z.getState(),d=u.pools.find(y=>y.address===n);if(!d)return;const f=l.activeBin.binId,m=l.bins.filter(y=>y.liquidity>0).map(y=>({id:y.id,price:y.price,liquidity:y.liquidity,isActive:y.isActive||y.id===f}));if(m.length===0)return;const v=m.findIndex(y=>y.isActive);u.setPoolBins(d.id,m,v>=0?v:Math.floor(m.length/2),l.activeBin.price)}}catch(o){r<2?(console.warn(`[WS] fetchPoolBins error, retrying in ${(r+1)*3}s:`,o),setTimeout(()=>this.fetchPoolBins(n,r+1),(r+1)*3e3)):console.warn("[WS] fetchPoolBins failed after retries:",o)}}startPolling(){this.pollInterval||(this.pollInterval=setInterval(()=>{this.activePool&&this.fetchPoolTransactions(this.activePool)},Jv))}stopPolling(){this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null)}}const Qi=new Zv;class ey{show(n,r,o){const l=document.getElementById("toastContainer");if(!l)return;const u=document.createElement("div");u.className=`toast ${n}`,u.innerHTML=`
      <div class="toast-icon">${n==="success"?"":n==="error"?"":""}</div>
      <div class="toast-content">
        <div class="toast-title">${r}</div>
        <div class="toast-message">${o}</div>
      </div>
      <button class="toast-close" onclick="this.parentElement.remove()"></button>
    `,l.appendChild(u),setTimeout(()=>u.remove(),5e3)}success(n,r){this.show("success",n,r)}error(n,r){this.show("error",n,r)}info(n,r){this.show("info",n,r)}}const qi=new ey;class ty{async connect(n){var u,d,f;const r=z.getState(),o=be.WALLETS[n];if(!o)return!1;const l=o.getProvider();if(!l)return window.open(o.downloadUrl,"_blank"),qi.error("Not Found",`Install ${o.name}`),!1;try{const v=((u=(await l.connect()).publicKey)==null?void 0:u.toString())||((d=l.publicKey)==null?void 0:d.toString());if(v)return r.setWallet({connected:!0,publicKey:v,provider:o,name:o.name}),(f=l.on)==null||f.call(l,"disconnect",()=>this.handleDisconnect()),await this.fetchBalance(),localStorage.setItem("lp_wallet_provider",n),ct.hydrate(),qi.success("Connected",Tl(v)),!0}catch(m){console.error("[Wallet] Connect error:",m),qi.error("Failed",m.message||"Rejected")}return!1}async disconnect(){var r,o;const n=z.getState();try{const l=(o=(r=n.wallet.provider)==null?void 0:r.getProvider)==null?void 0:o.call(r);l&&l.disconnect&&await l.disconnect()}catch{}this.handleDisconnect()}handleDisconnect(){z.getState().setWallet({connected:!1,publicKey:null,provider:null,name:null,balance:0}),localStorage.removeItem("lp_wallet_provider"),qi.success("Disconnected","Wallet disconnected")}async fetchBalance(){var r;const n=z.getState();if(n.wallet.publicKey)try{const o=await fetch(be.HELIUS_RPC,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"getBalance",params:[n.wallet.publicKey]})});if(o.ok){const u=(((r=(await o.json()).result)==null?void 0:r.value)||0)/1e9;n.setWallet({balance:u})}}catch(o){console.warn("[Wallet] Balance fetch error:",o)}}async autoConnect(){var r;const n=(r=window.phantom)==null?void 0:r.solana;if(n!=null&&n.isConnected)try{const o=await n.connect({onlyIfTrusted:!0});o.publicKey&&(z.getState().setWallet({connected:!0,publicKey:o.publicKey.toString(),provider:be.WALLETS.phantom,name:"Phantom"}),await this.fetchBalance(),ct.hydrate())}catch{}}}const hs=new ty;class ny{constructor(){lt(this,"sessionStart",Date.now());lt(this,"pageViews",0);lt(this,"poolClicks",0);lt(this,"executionAttempts",0)}init(){this.pageViews=parseInt(localStorage.getItem("lp_total_views")||"0")+1,localStorage.setItem("lp_total_views",String(this.pageViews))}track(n,r={}){n==="pool_clicked"&&this.poolClicks++,n.includes("execution")&&this.executionAttempts++}getReport(){return{sessionStart:this.sessionStart,sessionDuration:Date.now()-this.sessionStart,pageViews:this.pageViews,poolClicks:this.poolClicks,executionAttempts:this.executionAttempts}}}const dh=new ny;function hh(){const s=oe.useRef(null);return oe.useEffect(()=>{const n=s.current;if(!n)return;const r=n.getContext("2d");if(!r)return;let o;const l=[],u=["129,140,248","34,211,238","16,185,129","167,139,250"],d=window.innerWidth<768?30:60,f=()=>{n.width=window.innerWidth,n.height=window.innerHeight};f(),window.addEventListener("resize",f);for(let v=0;v<d;v++)l.push({x:Math.random()*n.width,y:Math.random()*n.height,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,size:Math.random()*2+.5,alpha:Math.random()*.4+.1,color:u[Math.floor(Math.random()*u.length)]});const m=()=>{r.clearRect(0,0,n.width,n.height);for(const v of l)v.x+=v.vx,v.y+=v.vy,(v.x<0||v.x>n.width)&&(v.vx*=-1),(v.y<0||v.y>n.height)&&(v.vy*=-1),r.beginPath(),r.arc(v.x,v.y,v.size,0,Math.PI*2),r.fillStyle=`rgba(${v.color},${v.alpha})`,r.fill();for(let v=0;v<l.length;v++)for(let y=v+1;y<l.length;y++){const S=l[v].x-l[y].x,k=l[v].y-l[y].y,w=Math.sqrt(S*S+k*k);w<150&&(r.beginPath(),r.moveTo(l[v].x,l[v].y),r.lineTo(l[y].x,l[y].y),r.strokeStyle=`rgba(129,140,248,${.05*(1-w/150)})`,r.lineWidth=.5,r.stroke())}o=requestAnimationFrame(m)};return m(),()=>{cancelAnimationFrame(o),window.removeEventListener("resize",f)}},[]),p.jsx("canvas",{ref:s,id:"bgCanvas"})}const ry=[{key:"meteora",label:"Meteora"},{key:"jupiter",label:"Jupiter"},{key:"helius",label:"Helius"},{key:"raydium",label:"Raydium"}],sy=[{id:"opportunities",label:"Opportunities",hasBadge:!0},{id:"search-alerts",label:"Search & Alerts",hasBadge:!1},{id:"guide",label:"Guide",hasBadge:!1}];function iy({onRefresh:s}){const n=z(b=>b.wallet),r=z(b=>b.apiStatus),o=z(b=>b.activeTab),l=z(b=>b.setActiveTab),u=z(b=>b.triggeredAlerts),d=z(b=>b.markTriggeredAlertsRead),f=z(b=>b.opportunities),m=z(b=>b.jupshieldEnabled),v=z(b=>b.lastRefresh),y=z(b=>b.setShowWalletModal),[S,k]=oe.useState(!1),w=u.filter(b=>!b.read).length,j=oe.useCallback(()=>{if(!v)return"Never";const b=Math.floor((Date.now()-v)/1e3);return b<60?`${b}s ago`:`${Math.floor(b/60)}m ago`},[v]),P=()=>{n.connected?hs.disconnect():y(!0)},T=b=>{b.stopPropagation(),d()},L=()=>{k(b=>!b)},O=r.jupiter;return p.jsxs("header",{className:"header",children:[p.jsxs("div",{className:"logo",children:[p.jsx("div",{className:"logo-mark",children:"LP"}),p.jsxs("div",{className:"logo-text",children:["Liquidity",p.jsx("span",{children:"Pro"})]})]}),p.jsx("nav",{className:"nav-tabs",children:sy.map(b=>p.jsxs("button",{className:`nav-tab ${o===b.id?"active":""}`,"data-tab":b.id,onClick:()=>l(b.id),children:[b.label,b.hasBadge&&p.jsx("span",{className:"tab-badge",children:f.length})]},b.id))}),p.jsx("div",{className:"header-status",children:p.jsx("div",{className:"api-badges",children:ry.map(({key:b,label:I})=>p.jsx("span",{className:`api-badge ${r[b]?"active":"error"}`,children:I},b))})}),p.jsxs("div",{className:"header-actions",children:[p.jsxs("div",{className:"alert-bell-wrapper",style:{position:"relative"},children:[p.jsxs("button",{className:"alert-bell",title:"Alert Notifications",onClick:L,children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"}),p.jsx("path",{d:"M13.73 21a2 2 0 01-3.46 0"})]}),w>0&&p.jsx("span",{className:"alert-bell-count",children:w})]}),S&&p.jsxs("div",{className:"alert-dropdown",children:[p.jsxs("div",{className:"alert-dropdown-header",children:[p.jsx("span",{children:"Notifications"}),w>0&&p.jsx("button",{className:"btn btn--sm btn--ghost",onClick:T,children:"Mark all read"})]}),p.jsx("div",{className:"alert-dropdown-list",children:u.length===0?p.jsx("div",{className:"alert-dropdown-empty",children:"No alerts yet"}):u.map(b=>p.jsxs("div",{className:`alert-dropdown-item ${b.read?"":"unread"}`,children:[p.jsx("div",{className:"alert-dropdown-item-title",children:b.poolName}),p.jsxs("div",{className:"alert-dropdown-item-detail",children:[b.metric.toUpperCase()," ",b.condition," ",b.value," (current: ",b.currentValue.toFixed(2),")"]}),p.jsx("div",{className:"alert-dropdown-item-time",children:new Date(b.triggeredAt).toLocaleTimeString()})]},`${b.id}-${b.triggeredAt}`))})]})]}),p.jsxs("div",{className:`jupshield-indicator ${O?"connected":"disconnected"}`,title:`JupShield: Jupiter API ${O?"Connected":"Disconnected"}  Token safety verification ${m?"active":"inactive"}`,children:[p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:14,height:14},children:p.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),"JupShield"]}),p.jsx("button",{className:`btn btn--wallet ${n.connected?"connected":""}`,onClick:P,children:n.connected?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"wallet-dot",style:{width:8,height:8,borderRadius:"50%",backgroundColor:"#00e676",display:"inline-block",marginRight:6}}),Tl(n.publicKey)]}):p.jsxs(p.Fragment,{children:[p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:14,height:14},children:p.jsx("path",{d:"M19 7V4a1 1 0 00-1-1H5a2 2 0 000 4h15a1 1 0 011 1v4h-3a2 2 0 000 4h3a1 1 0 001-1v-3"})}),"Connect Wallet"]})}),p.jsxs("button",{className:"btn btn--secondary btn--sm",onClick:s,title:`Last refresh: ${j()}`,children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:14,height:14},children:[p.jsx("polyline",{points:"23 4 23 10 17 10"}),p.jsx("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"})]}),p.jsx("span",{className:"refresh-time",children:j()})]})]})]})}function oy(){const s=z(o=>o.pools),n=z(o=>o.opportunities),r=n.filter(o=>o.oppType==="hot").length;return p.jsx("div",{className:"hero-section",children:p.jsxs("div",{className:"hero-stats",children:[p.jsxs("div",{className:"hero-stat",children:[p.jsx("div",{className:"hero-stat-value",id:"heroPoolCount",children:s.length.toLocaleString()}),p.jsx("div",{className:"hero-stat-label",children:"Live Pools"})]}),p.jsxs("div",{className:"hero-stat",children:[p.jsx("div",{className:"hero-stat-value hero-stat-accent",id:"heroOppCount",children:n.length}),p.jsx("div",{className:"hero-stat-label",children:"Opportunities"})]}),p.jsxs("div",{className:"hero-stat",children:[p.jsx("div",{className:"hero-stat-value hero-stat-hot",id:"heroHotCount",children:r}),p.jsx("div",{className:"hero-stat-label",children:"Hot Pools"})]})]})})}function jl({pool:s,rank:n,isOpp:r=!1}){var C,D,le,ue;const[o,l]=oe.useState(!1),[u,d]=oe.useState(!1),[f,m]=oe.useState(!1),v=oe.useRef(!1),y=z(M=>M.expandedPoolId),S=z(M=>M.expandedOppId),k=z(M=>M.poolTransactions[s.id]??[]),w=z(M=>M.wsConnected),j=z(M=>M.togglePool),P=z(M=>M.toggleOpp),T=r?s:null,L=r?S===s.id:y===s.id,O=s.address||s.id,b=s.score>=75?"high":s.score>=55?"medium":"low",I=Gv(s),G=qv(s),H=Kv(s),Z=`https://solscan.io/account/${O}`,de=s.farmActive?{label:" Active",cls:"farm"}:s.hasFarm?{label:" Farm",cls:"farm"}:null;oe.useEffect(()=>(L&&O&&Qi.subscribeToPool(O),()=>{O&&Qi.unsubscribeFromPool(O)}),[L,O]),oe.useEffect(()=>{if(!L||k.length>0){m(!1);return}const M=setTimeout(()=>m(!0),1e4);return()=>clearTimeout(M)},[L,k.length]);const Ee=oe.useCallback(()=>{v.current||(v.current=!0,setTimeout(()=>{v.current=!1},200),r?P(s.id):j(s.id))},[r,s.id,j,P]),et=oe.useCallback(M=>{var ae,ge,pe,we;M.stopPropagation(),(ge=(ae=z.getState()).setShowExecModal)==null||ge.call(ae,!0),(we=(pe=z.getState()).setExecPool)==null||we.call(pe,s)},[s]),ht=oe.useCallback(M=>{M.stopPropagation(),navigator.clipboard.writeText(O).then(()=>{l(!0),setTimeout(()=>l(!1),1500)})},[O]),he=s.bins&&s.bins.length>0?s.bins:[],Me=he.length>0?Math.max(...he.map(M=>M.liquidity)):1,He=he.length>0?he.reduce((M,ae)=>M+ae.liquidity,0):1;he.length>0;const Be=s.activeBin>=0&&s.activeBin<he.length?s.activeBin:Math.floor(he.length/2),De=s.protocol==="Meteora DLMM",ye=L&&he.length===0&&De,V=T?T.oppType==="hot"?"opp-hot":T.oppType==="active"?"opp-active":"opp-standard":"",ee={add:"+",remove:"-",swap:""},W=[];if((s.fees1h??0)>0&&W.push({label:"Fees 1h:",value:Oe(s.fees1h),highlight:!0}),(s.fees1h??0)>0&&s.fees>0){const M=(s.fees1h??0)*24,ae=((M/s.fees-1)*100).toFixed(0);W.push({label:"Projected 24h:",value:`${Oe(M)} (${Number(ae)>0?"+":""}${ae}%)`,highlight:Number(ae)>0})}return(s.feeTvlRatio1h??0)>0&&W.push({label:"Fee/TVL 1h:",value:`${((s.feeTvlRatio1h??0)*100).toFixed(4)}%`,highlight:!0}),s.fees>0&&W.push({label:"Fees 24h:",value:Oe(s.fees),highlight:!1}),s.feeBps&&W.push({label:"Base Fee:",value:`${s.feeBps}%`,highlight:!1}),s.binStep>1&&W.push({label:"Bin Step:",value:`${s.binStep}`,highlight:!1}),s.farmApr&&s.farmApr>0&&W.push({label:"Farm APR:",value:`+${s.farmApr}%`,highlight:!1}),(s.feeTvlRatio??0)>0&&W.push({label:"Fee/TVL 24h:",value:`${((s.feeTvlRatio??0)*100).toFixed(3)}%`,highlight:!1}),s.volumeToTvl>0&&W.push({label:"Vol/TVL:",value:`${(s.volumeToTvl*100).toFixed(0)}%`,highlight:!1}),(s.cumulativeTradeVolume??0)>0&&W.push({label:"All-time Vol:",value:Oe(s.cumulativeTradeVolume),highlight:!1}),r&&T?p.jsxs("div",{className:`opp-card ${V} ${L?"expanded":""}`,"data-opp-id":s.id,children:[n>0&&p.jsx("div",{className:`opp-rank ${n<=3?"top3":""}`,children:n}),p.jsxs("div",{className:"opp-card-main",onClick:Ee,children:[p.jsxs("div",{className:"opp-header",children:[p.jsxs("div",{className:"opp-pool",children:[p.jsxs("div",{className:"opp-pool-icons",children:[p.jsx("div",{className:"opp-pool-icon",children:s.icon1}),p.jsx("div",{className:"opp-pool-icon",children:s.icon2})]}),p.jsx("div",{className:"opp-pool-info",children:p.jsxs("h3",{children:[s.name,p.jsx("span",{className:"pool-type-badge",children:I})]})})]}),p.jsxs("div",{className:"opp-score",children:[p.jsx("div",{className:"opp-score-value",children:s.score}),p.jsx("div",{className:"opp-score-label",children:"Score"})]})]}),p.jsxs("div",{className:"opp-metrics",children:[p.jsxs("div",{className:"opp-metric",children:[p.jsx("div",{className:"opp-metric-value",children:Oe(s.tvl)}),p.jsx("div",{className:"opp-metric-label",children:"TVL"})]}),p.jsxs("div",{className:"opp-metric",children:[p.jsx("div",{className:"opp-metric-value",children:Oe(s.volume)}),p.jsx("div",{className:"opp-metric-label",children:"Volume"})]}),p.jsxs("div",{className:"opp-metric",children:[p.jsxs("div",{className:"opp-metric-value positive",children:[s.apr,"%"]}),p.jsx("div",{className:"opp-metric-label",children:"APR"})]}),p.jsxs("div",{className:"opp-metric",children:[p.jsxs("div",{className:"opp-metric-value",children:[(s.volumeToTvl*100).toFixed(0),"%"]}),p.jsx("div",{className:"opp-metric-label",children:"Vol/TVL"})]})]}),p.jsxs("div",{className:"opp-reason",children:[p.jsxs("div",{className:"opp-reason-title",children:[T.oppType==="hot"?"":T.oppType==="active"?"":""," Opportunity"]}),p.jsx("div",{className:"opp-reason-text",children:T.reason}),T.suggestion&&p.jsx("div",{className:"opp-suggestion",children:T.suggestion}),T.suggestionDetail&&p.jsx("button",{className:"opp-detail-toggle",onClick:M=>{M.stopPropagation(),d(!u)},children:u?"Hide details":"Strategy details"}),u&&T.suggestionDetail&&p.jsx("div",{className:"opp-suggestion-detail",children:T.suggestionDetail})]}),p.jsx("div",{className:"opp-expand-hint",children:"Click to expand"})]}),p.jsx("div",{className:"opp-expanded",children:p.jsxs("div",{className:"opp-expanded-inner",children:[p.jsxs("div",{className:"pool-actions",children:[p.jsxs("button",{className:"pool-action-btn primary",onClick:et,children:[p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("path",{d:"M12 2v20M2 12h20"})}),"Quick Deposit"]}),p.jsxs("a",{href:`https://jup.ag/swap/SOL-${s.mintX}`,target:"_blank",rel:"noopener noreferrer",className:"pool-action-btn",onClick:M=>M.stopPropagation(),children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("polyline",{points:"17 1 21 5 17 9"}),p.jsx("path",{d:"M3 11V9a4 4 0 014-4h14"}),p.jsx("polyline",{points:"7 23 3 19 7 15"}),p.jsx("path",{d:"M21 13v2a4 4 0 01-4 4H3"})]}),"Swap"]}),p.jsxs("a",{href:G,target:"_blank",rel:"noopener noreferrer",className:"pool-action-btn",onClick:M=>M.stopPropagation(),children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),p.jsx("polyline",{points:"15,3 21,3 21,9"}),p.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),H]}),p.jsxs("a",{href:Z,target:"_blank",rel:"noopener noreferrer",className:"pool-action-btn",onClick:M=>M.stopPropagation(),children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("circle",{cx:"11",cy:"11",r:"8"}),p.jsx("path",{d:"m21 21-4.3-4.3"})]}),"Solscan"]}),p.jsxs("button",{className:"pool-action-btn",onClick:ht,children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2"}),p.jsx("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})]}),o?"Copied!":"Copy"]})]}),he.length>0?p.jsxs("div",{className:"chart-section",children:[p.jsxs("div",{className:"chart-header",children:[p.jsxs("span",{className:"chart-title",children:["Liquidity Distribution (",he.length," Bins)"]}),p.jsxs("div",{className:"chart-legend",children:[p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot liquidity"}),"Liquidity"]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot active"}),"Active Bin"]}),p.jsx("div",{className:"legend-item",style:{fontSize:9,opacity:.7},children:"On-chain"})]})]}),p.jsx("div",{className:"bins-container",children:he.map((M,ae)=>p.jsx("div",{className:`bin ${ae===Be?"active-bin":""}`,style:{height:`${M.liquidity/Me*100}%`},children:p.jsxs("div",{className:"bin-tooltip",children:[p.jsxs("div",{className:"bin-tooltip-row",children:[p.jsx("span",{className:"bin-tooltip-label",children:"Price"}),p.jsxs("span",{className:"bin-tooltip-value",children:["$",wn(M.price)]})]}),p.jsxs("div",{className:"bin-tooltip-row",children:[p.jsx("span",{className:"bin-tooltip-label",children:"Liq"}),p.jsxs("span",{className:"bin-tooltip-value",children:[(M.liquidity/He*100).toFixed(1),"%"]})]}),p.jsxs("div",{className:"bin-tooltip-row",children:[p.jsx("span",{className:"bin-tooltip-label",children:"Bin"}),p.jsxs("span",{className:"bin-tooltip-value",children:["#",M.id]})]})]})},M.id))}),p.jsxs("div",{className:"chart-axis",children:[p.jsxs("span",{className:"axis-label",children:["$",wn(he[0].price)]}),p.jsxs("span",{className:"axis-label active",children:["$",wn(((C=he[Be])==null?void 0:C.price)??s.currentPrice)]}),p.jsxs("span",{className:"axis-label",children:["$",wn((D=he[he.length-1])==null?void 0:D.price)]})]})]}):ye?p.jsxs("div",{className:"chart-section",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:120},children:[p.jsx("div",{className:"loading-spinner",style:{marginRight:8}}),p.jsx("span",{style:{fontSize:12,color:"var(--text-dim)"},children:"Loading on-chain bin data..."})]}):null,p.jsxs("div",{className:"pool-tx-section",children:[p.jsxs("div",{className:"pool-tx-header",children:[p.jsxs("span",{className:"pool-tx-title",children:[p.jsx("span",{className:`status-dot ${w?"live":""}`}),"Live Transactions"]}),p.jsx("span",{className:"pool-tx-status",style:{fontSize:10,color:"var(--text-dim)"},children:k.length>0?`${k.length} txs`:w?"Listening...":"Connecting..."})]}),p.jsx("div",{className:"pool-tx-list",children:k.length>0?k.map(M=>p.jsxs("div",{className:"pool-tx-item",children:[p.jsx("div",{className:`pool-tx-type ${M.type}`,children:ee[M.type]}),p.jsx("div",{className:"pool-tx-info",children:p.jsx("a",{href:`https://solscan.io/tx/${M.signature}`,target:"_blank",rel:"noopener noreferrer",children:ch(M.signature)})}),p.jsx("div",{className:`pool-tx-amount ${M.type==="add"?"positive":M.type==="remove"?"negative":""}`,children:Oe(parseFloat(M.amount))}),p.jsx("div",{className:"pool-tx-time",children:uh(M.timestamp)})]},M.signature)):p.jsx("div",{className:"pool-tx-empty",children:f?p.jsx(p.Fragment,{children:p.jsx("span",{style:{color:"var(--text-dim)",fontSize:12},children:"RPC connection issues  retrying automatically..."})}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"loading-spinner",style:{marginBottom:8}}),p.jsx("span",{children:"Loading transactions..."})]})})})]})]})})]}):p.jsxs("div",{className:`pool-card score-${b} ${L?"expanded":""} ${s.isHot?"is-hot":""}`,"data-pool-id":s.id,children:[p.jsx("div",{className:`pool-rank ${n<=3?"top3":""}`,children:n}),s.isHot&&p.jsx("div",{className:"hot-indicator",children:""}),p.jsxs("div",{className:"pool-card-main",onClick:Ee,children:[p.jsxs("div",{className:"pool-header",children:[p.jsxs("div",{className:"pool-pair",children:[p.jsxs("div",{className:"pool-icons",children:[p.jsx("div",{className:"pool-icon",children:s.icon1}),p.jsx("div",{className:"pool-icon",children:s.icon2})]}),p.jsx("div",{className:"pool-info",children:p.jsxs("h3",{children:[s.name,p.jsx("span",{className:"pool-type-badge",children:I})]})})]}),p.jsxs("div",{className:"pool-badges",children:[p.jsx("span",{className:`score-badge ${b}`,children:s.score}),p.jsx("span",{className:`safety-dot ${s.safety}`,title:s.safety})]})]}),p.jsxs("div",{className:"pool-stats",children:[p.jsxs("div",{className:"pool-stat",children:[p.jsx("div",{className:"pool-stat-label",children:"TVL"}),p.jsx("div",{className:"pool-stat-value",children:Oe(s.tvl)})]}),p.jsxs("div",{className:"pool-stat",children:[p.jsx("div",{className:"pool-stat-label",children:"Vol 24h"}),p.jsx("div",{className:"pool-stat-value",children:Oe(s.volume)})]}),p.jsxs("div",{className:"pool-stat",children:[p.jsx("div",{className:"pool-stat-label",children:"APR"}),p.jsxs("div",{className:"pool-stat-value accent",children:[s.apr,"%"]})]}),p.jsxs("div",{className:`pool-stat ${(s.fees1h??0)>0?"has-1h":""}`,children:[p.jsx("div",{className:"pool-stat-label",children:(s.fees1h??0)>0?"Fees 1h":"Fees 24h"}),p.jsx("div",{className:"pool-stat-value",children:(s.fees1h??0)>0?Oe(s.fees1h):Oe(s.fees)})]})]}),(s.isHot||de)&&p.jsxs("div",{className:"pool-badges-row",children:[s.isHot&&p.jsx("span",{className:"mini-badge hot",children:" Hot"}),de&&p.jsx("span",{className:`mini-badge ${de.cls}`,children:de.label})]}),p.jsx("div",{className:"pool-expand-hint",children:"Click to expand"})]}),p.jsx("div",{className:"pool-expanded",children:p.jsxs("div",{className:"pool-expanded-inner",children:[p.jsxs("div",{className:"pool-actions",children:[p.jsxs("button",{className:"pool-action-btn primary",onClick:et,children:[p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("path",{d:"M12 2v20M2 12h20"})}),"Quick Deposit"]}),p.jsxs("a",{href:G,target:"_blank",rel:"noopener noreferrer",className:"pool-action-btn",onClick:M=>M.stopPropagation(),children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),p.jsx("polyline",{points:"15,3 21,3 21,9"}),p.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),H]}),p.jsxs("a",{href:Z,target:"_blank",rel:"noopener noreferrer",className:"pool-action-btn",onClick:M=>M.stopPropagation(),children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("circle",{cx:"11",cy:"11",r:"8"}),p.jsx("path",{d:"m21 21-4.3-4.3"})]}),"Solscan"]}),p.jsxs("button",{className:"pool-action-btn",onClick:ht,children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2"}),p.jsx("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})]}),o?"Copied!":"Copy"]})]}),he.length>0?p.jsxs("div",{className:"chart-section",children:[p.jsxs("div",{className:"chart-header",children:[p.jsxs("span",{className:"chart-title",children:["Liquidity Distribution (",he.length," Bins)"]}),p.jsxs("div",{className:"chart-legend",children:[p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot liquidity"}),"Liquidity"]}),p.jsxs("div",{className:"legend-item",children:[p.jsx("div",{className:"legend-dot active"}),"Active Bin"]}),p.jsx("div",{className:"legend-item",style:{fontSize:9,opacity:.7},children:"On-chain"})]})]}),p.jsx("div",{className:"bins-container",children:he.map((M,ae)=>p.jsx("div",{className:`bin ${ae===Be?"active-bin":""}`,style:{height:`${M.liquidity/Me*100}%`},children:p.jsxs("div",{className:"bin-tooltip",children:[p.jsxs("div",{className:"bin-tooltip-row",children:[p.jsx("span",{className:"bin-tooltip-label",children:"Price"}),p.jsxs("span",{className:"bin-tooltip-value",children:["$",wn(M.price)]})]}),p.jsxs("div",{className:"bin-tooltip-row",children:[p.jsx("span",{className:"bin-tooltip-label",children:"Liq"}),p.jsxs("span",{className:"bin-tooltip-value",children:[(M.liquidity/He*100).toFixed(1),"%"]})]}),p.jsxs("div",{className:"bin-tooltip-row",children:[p.jsx("span",{className:"bin-tooltip-label",children:"Bin"}),p.jsxs("span",{className:"bin-tooltip-value",children:["#",M.id]})]})]})},M.id))}),p.jsxs("div",{className:"chart-axis",children:[p.jsxs("span",{className:"axis-label",children:["$",wn(he[0].price)]}),p.jsxs("span",{className:"axis-label active",children:["$",wn(((le=he[Be])==null?void 0:le.price)??s.currentPrice)]}),p.jsxs("span",{className:"axis-label",children:["$",wn((ue=he[he.length-1])==null?void 0:ue.price)]})]})]}):ye?p.jsxs("div",{className:"chart-section",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:120},children:[p.jsx("div",{className:"loading-spinner",style:{marginRight:8}}),p.jsx("span",{style:{fontSize:12,color:"var(--text-dim)"},children:"Loading on-chain bin data..."})]}):null,p.jsxs("div",{className:"pool-tx-section",children:[p.jsxs("div",{className:"pool-tx-header",children:[p.jsxs("span",{className:"pool-tx-title",children:[p.jsx("span",{className:`status-dot ${w?"live":""}`}),"Live Transactions"]}),p.jsx("span",{className:"pool-tx-status",style:{fontSize:10,color:"var(--text-dim)"},children:k.length>0?`${k.length} txs`:w?"Listening...":"Connecting..."})]}),p.jsx("div",{className:"pool-tx-list",children:k.length>0?k.map(M=>p.jsxs("div",{className:"pool-tx-item",children:[p.jsx("div",{className:`pool-tx-type ${M.type}`,children:ee[M.type]}),p.jsx("div",{className:"pool-tx-info",children:p.jsx("a",{href:`https://solscan.io/tx/${M.signature}`,target:"_blank",rel:"noopener noreferrer",children:ch(M.signature)})}),p.jsx("div",{className:`pool-tx-amount ${M.type==="add"?"positive":M.type==="remove"?"negative":""}`,children:Oe(parseFloat(M.amount))}),p.jsx("div",{className:"pool-tx-time",children:uh(M.timestamp)})]},M.signature)):p.jsx("div",{className:"pool-tx-empty",children:f?p.jsx("span",{style:{color:"var(--text-dim)",fontSize:12},children:"No recent activity on this pool  watching for new transactions..."}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"loading-spinner",style:{marginBottom:8}}),p.jsx("span",{children:"Loading transactions..."})]})})})]}),W.length>0&&p.jsxs("div",{className:"pool-advanced-info",children:[p.jsx("h4",{children:"Details"}),p.jsx("div",{className:"advanced-grid",children:W.map(M=>p.jsxs("div",{className:`adv-item ${M.highlight?"highlight":""}`,children:[p.jsx("span",{children:M.label})," ",M.value]},M.label))})]})]})})]})}function ay(){const s=z(r=>r.opportunities),n=oe.useMemo(()=>{const r=window.innerWidth>=1200?3:window.innerWidth>=768?2:1,o=Array.from({length:r},()=>[]);return s.forEach((l,u)=>{o[u%r].push(l)}),o},[s]);return s.length===0?p.jsxs("div",{className:"alert-empty",style:{textAlign:"center",padding:40},children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{style:{marginTop:12},children:"Analyzing pools for opportunities..."})]}):p.jsx("div",{id:"opportunitiesList",style:{display:"flex",gap:20,alignItems:"flex-start"},children:n.map((r,o)=>p.jsx("div",{className:"opp-column",children:r.map((l,u)=>p.jsx(jl,{pool:l,rank:u*n.length+o+1,isOpp:!0},l.id))},o))})}function ly(){const[s,n]=oe.useState(""),[r,o]=oe.useState([]),[l,u]=oe.useState(!1);z(y=>y.expandedPoolId),z(y=>y.togglePool);const d=oe.useCallback(()=>{if(!s.trim()){o([]),u(!1);return}const y=Lt.searchPools(s);o(y),u(!0)},[s]),f=oe.useCallback(y=>{y.key==="Enter"&&d()},[d]),m=oe.useCallback(()=>{n(""),o([]),u(!1)},[]),v=oe.useMemo(()=>{const y=window.innerWidth>=1200?3:window.innerWidth>=768?2:1,S=Array.from({length:y},()=>[]);return r.forEach((k,w)=>S[w%y].push(k)),S},[r]);return p.jsxs("div",{className:"panel",children:[p.jsx("div",{className:"panel-header",children:p.jsxs("div",{className:"panel-title",children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("circle",{cx:"11",cy:"11",r:"8"}),p.jsx("path",{d:"m21 21-4.3-4.3"})]}),"Search Pools"]})}),p.jsx("div",{className:"panel-body",children:p.jsxs("div",{style:{display:"flex",gap:8},children:[p.jsx("input",{type:"text",className:"form-input",placeholder:"Search by name, ticker, or address...",value:s,onChange:y=>n(y.target.value),onKeyDown:f,style:{flex:1}}),p.jsx("button",{className:"btn btn--primary btn--sm",onClick:d,children:"Search"}),l&&p.jsx("button",{className:"btn btn--ghost btn--sm",onClick:m,children:"Clear"})]})}),l&&p.jsxs("div",{className:"search-results-section",children:[p.jsx("div",{className:"search-results-header",children:p.jsx("div",{className:"search-results-title",children:p.jsxs("span",{children:[r.length," Results"]})})}),p.jsx("div",{className:"pools-container",id:"searchResultsContainer",children:r.length===0?p.jsx("div",{className:"alert-empty",style:{textAlign:"center",padding:40,width:"100%"},children:p.jsx("p",{children:"No pools found matching your search."})}):v.map((y,S)=>p.jsx("div",{className:"pool-column",children:y.map((k,w)=>p.jsx(jl,{pool:k,rank:S*Math.ceil(r.length/v.length)+w+1},k.id))},S))})]})]})}function uy(){const s=z(y=>y.filters),n=z(y=>y.setFilters),r=z(y=>y.filteredPools);z(y=>y.expandedPoolId),z(y=>y.togglePool);const[o,l]=oe.useState(!1),[u,d]=oe.useState(s),f=oe.useCallback(()=>{n(u),Lt.applyFilters(),l(!0)},[u,n]),m=oe.useCallback(()=>{const y={minTvl:0,minVolume:0,safeOnly:!1,farmOnly:!1,poolType:"all",sortBy:"score"};d(S=>({...S,...y})),n(y),Lt.applyFilters(),l(!1)},[n]),v=oe.useMemo(()=>{if(!o)return[];const y=window.innerWidth>=1200?3:window.innerWidth>=768?2:1,S=Array.from({length:y},()=>[]);return r.slice(0,60).forEach((k,w)=>S[w%y].push(k)),S},[r,o]);return p.jsxs("div",{className:"panel",children:[p.jsx("div",{className:"panel-header",children:p.jsxs("div",{className:"panel-title",children:[p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),"Pool Filters"]})}),p.jsx("div",{className:"panel-body",children:p.jsxs("div",{className:"alert-form",style:{gridTemplateColumns:"1fr 1fr 1fr 1fr auto auto"},children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Min TVL"}),p.jsxs("select",{className:"form-select",value:u.minTvl,onChange:y=>d(S=>({...S,minTvl:Number(y.target.value)})),children:[p.jsx("option",{value:0,children:"Any"}),p.jsx("option",{value:1e3,children:"$1K+"}),p.jsx("option",{value:1e4,children:"$10K+"}),p.jsx("option",{value:1e5,children:"$100K+"}),p.jsx("option",{value:1e6,children:"$1M+"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Pool Type"}),p.jsxs("select",{className:"form-select",value:u.poolType,onChange:y=>d(S=>({...S,poolType:y.target.value})),children:[p.jsx("option",{value:"all",children:"All"}),p.jsx("option",{value:"dlmm",children:"DLMM"}),p.jsx("option",{value:"damm",children:"DAMM v2"}),p.jsx("option",{value:"raydium",children:"Raydium CLMM"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Sort By"}),p.jsxs("select",{className:"form-select",value:u.sortBy,onChange:y=>d(S=>({...S,sortBy:y.target.value})),children:[p.jsx("option",{value:"score",children:"Score"}),p.jsx("option",{value:"tvl",children:"TVL"}),p.jsx("option",{value:"volume",children:"Volume"}),p.jsx("option",{value:"apr",children:"APR"}),p.jsx("option",{value:"fees",children:"Fees 24h"}),p.jsx("option",{value:"fees1h",children:"Fees 1h"}),p.jsx("option",{value:"feeTvl",children:"Fee/TVL 24h"}),p.jsx("option",{value:"feeTvl1h",children:"Fee/TVL 1h"})]})]}),p.jsxs("div",{className:"form-group",style:{display:"flex",flexDirection:"column",gap:4},children:[p.jsxs("label",{className:"form-label",children:[p.jsx("input",{type:"checkbox",checked:u.safeOnly,onChange:y=>d(S=>({...S,safeOnly:y.target.checked}))})," ","Safe Only"]}),p.jsxs("label",{className:"form-label",children:[p.jsx("input",{type:"checkbox",checked:u.farmOnly,onChange:y=>d(S=>({...S,farmOnly:y.target.checked}))})," ","Farm Only"]})]}),p.jsx("button",{className:"btn btn--primary btn--sm",onClick:f,children:"Apply"}),p.jsx("button",{className:"btn btn--ghost btn--sm",onClick:m,children:"Reset"})]})}),o&&p.jsxs("div",{className:"filter-results-section",children:[p.jsx("div",{className:"filter-results-header",children:p.jsx("div",{className:"filter-results-title",children:p.jsxs("span",{children:[r.length," Filtered Pools"]})})}),p.jsx("div",{className:"pools-container",id:"filterResultsContainer",children:v.map((y,S)=>p.jsx("div",{className:"pool-column",children:y.map((k,w)=>p.jsx(jl,{pool:k,rank:S*Math.ceil(r.length/v.length)+w+1},k.id))},S))})]})]})}function cy(){const s=z(w=>w.alerts),n=z(w=>w.pools),r=z(w=>w.addAlert),o=z(w=>w.removeAlert),[l,u]=oe.useState(""),[d,f]=oe.useState("apr"),[m,v]=oe.useState("above"),[y,S]=oe.useState(""),k=oe.useCallback(()=>{if(!l||!y)return;const w=n.find(P=>P.id===l);if(!w)return;const j={id:`alert-${Date.now()}`,poolId:w.id,poolName:w.name,metric:d,condition:m,value:parseFloat(y),enabled:!0,createdAt:Date.now()};r(j),S("")},[l,d,m,y,n,r]);return p.jsxs("div",{className:"panel",children:[p.jsx("div",{className:"panel-header",children:p.jsxs("div",{className:"panel-title",children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"}),p.jsx("path",{d:"M13.73 21a2 2 0 01-3.46 0"})]}),"Price Alerts"]})}),p.jsxs("div",{className:"panel-body",children:[p.jsxs("div",{className:"alert-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Pool"}),p.jsxs("select",{className:"form-select",value:l,onChange:w=>u(w.target.value),children:[p.jsx("option",{value:"",children:"Select pool..."}),n.filter(w=>w.safety==="safe").slice(0,50).map(w=>p.jsx("option",{value:w.id,children:w.name},w.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Metric"}),p.jsxs("select",{className:"form-select",value:d,onChange:w=>f(w.target.value),children:[p.jsx("option",{value:"apr",children:"APR"}),p.jsx("option",{value:"tvl",children:"TVL"}),p.jsx("option",{value:"volume",children:"Volume"}),p.jsx("option",{value:"score",children:"Score"}),p.jsx("option",{value:"fees",children:"Fees 24h"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Value"}),p.jsx("input",{type:"number",className:"form-input",placeholder:"Threshold",value:y,onChange:w=>S(w.target.value)})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Condition"}),p.jsxs("select",{className:"form-select",value:m,onChange:w=>v(w.target.value),children:[p.jsx("option",{value:"above",children:"Above"}),p.jsx("option",{value:"below",children:"Below"})]})]}),p.jsx("button",{className:"btn btn--success btn--sm",onClick:k,children:"Add Alert"})]}),p.jsxs("div",{className:"alert-list",children:[s.length===0&&p.jsx("div",{className:"alert-empty",children:p.jsx("p",{children:"No alerts set. Create one above to get notified of pool changes."})}),s.map(w=>p.jsxs("div",{className:`alert-item ${w.enabled?"":"alert-disabled"}`,children:[p.jsxs("div",{className:"alert-item-info",children:[p.jsx("strong",{children:w.poolName}),p.jsxs("span",{children:[w.metric.toUpperCase()," ",w.condition," ",Oe(w.value)]})]}),p.jsxs("div",{style:{display:"flex",gap:4},children:[p.jsx("button",{className:`btn btn--sm ${w.enabled?"btn--secondary":"btn--ghost"}`,onClick:()=>{const j=s.map(P=>P.id===w.id?{...P,enabled:!P.enabled}:P);z.getState().setAlerts(j),ct.toggleAlert(w.id,!w.enabled)},title:w.enabled?"Pause alert":"Resume alert",children:w.enabled?"Pause":"Resume"}),p.jsx("button",{className:"btn btn--ghost btn--sm",onClick:()=>o(w.id),children:"Remove"})]})]},w.id))]})]})]})}function dy(){const n=z(r=>r.opportunities).slice(0,5);return n.length===0?null:p.jsxs("div",{className:"ai-alerts-section",children:[p.jsx("div",{className:"ai-alerts-header",children:p.jsx("div",{className:"ai-alerts-title",children:"AI Suggestions"})}),n.map(r=>p.jsxs("div",{className:"ai-suggestion",children:[p.jsxs("div",{className:"ai-suggestion-info",children:[p.jsx("div",{className:"ai-suggestion-pool",children:r.name}),p.jsx("div",{className:"ai-suggestion-reason",children:r.reason})]}),p.jsx("div",{className:"ai-suggestion-actions",children:p.jsx("button",{className:"btn btn--sm btn--success",onClick:()=>z.getState().togglePool(r.id),children:"View"})})]},r.id))]})}function hy(){return p.jsxs("div",{children:[p.jsx(dy,{}),p.jsx(ly,{}),p.jsx(uy,{}),p.jsx(cy,{})]})}const fy=[{title:"Understanding Pool Scores",content:"Each pool is scored 10-99 based on TVL, volume, APR, token safety, farm status, and locked liquidity. Scores above 75 are considered excellent. The algorithm weighs TVL heavily as it indicates pool stability, while high volume and APR boost the score further."},{title:"Safety Levels Explained",content:"Safe (green): Both tokens verified by Jupiter. Warning (amber): Partial verification or high TVL. Danger (red): Unverified tokens with low TVL, or blacklisted. JupShield filters dangerous pools by default  disable it to see all pools."},{title:"AI Opportunity Detection",content:"The AI engine detects 7 opportunity types: Hot pools (fee velocity spikes), High Fee Velocity, High Volume/TVL ratio, High APR + Safe, Elite Score, Active Farms, and Outstanding Fee/TVL ratio. Hot pools are the most time-sensitive opportunities."},{title:"Live Transaction Feed",content:"When you expand a pool card, the app connects to Helius RPC to show real-time transactions. Swaps (purple), deposits (green), and withdrawals (red) are shown with amounts and Solscan links. The connection is on-demand to save resources."},{title:"Pool Types: DLMM vs DAMM vs CLMM",content:"DLMM (Dynamic Liquidity Market Maker): Meteora's concentrated liquidity with dynamic fees. DAMM v2: Meteora's automated market maker pools. CLMM (Concentrated Liquidity Market Maker): Raydium's concentrated liquidity pools. Each has different fee structures and strategies."},{title:"Using Alerts",content:"Set alerts on any safe pool to get notified when APR, TVL, volume, score, or fees cross your threshold. Alerts check every background refresh cycle (60 seconds). Triggered alerts appear in the bell notification dropdown."},{title:"Quick Deposit",content:"Connect your Phantom, Solflare, or Backpack wallet to use Quick Deposit. The app fetches quotes from Jupiter Ultra API for optimal routing, then redirects you to the pool's DEX page to complete the deposit."}];function py({item:s,isOpen:n,onToggle:r}){return p.jsxs("div",{className:`guide-item ${n?"open":""}`,children:[p.jsxs("button",{className:"guide-item-header",onClick:r,children:[p.jsx("span",{children:s.title}),p.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{width:16,height:16,transform:n?"rotate(180deg)":"none",transition:"transform 0.2s ease"},children:p.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),n&&p.jsx("div",{className:"guide-item-content",children:p.jsx("p",{children:s.content})})]})}function my(){const[s,n]=oe.useState(null),r=oe.useCallback(o=>{n(s===o?null:o)},[s]);return p.jsxs("div",{className:"panel",children:[p.jsx("div",{className:"panel-header",children:p.jsxs("div",{className:"panel-title",children:[p.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("path",{d:"M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"}),p.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"Guide & Documentation"]})}),p.jsx("div",{className:"panel-body",children:fy.map((o,l)=>p.jsx(py,{item:o,isOpen:s===l,onToggle:()=>r(l)},l))})]})}function gy(){const s=z(b=>b.activeTab),n=z(b=>b.isInitializing),r=z(b=>b.loadProgress),o=z(b=>b.loadMessage);z(b=>b.filteredPools);const l=z(b=>b.showWalletModal),u=z(b=>b.showExecModal),d=z(b=>b.execPool),f=z(b=>b.wallet),[m,v]=oe.useState(""),[y,S]=oe.useState(null),[k,w]=oe.useState(!1);oe.useEffect(()=>{const b=async()=>{const I=z.getState();try{I.setLoadProgress(20,"Fetching data...");const[,,]=await Promise.all([hs.autoConnect().catch(()=>{}),Lt.fetchJupiterTokens(),Lt.fetchPools()]);I.setLoadProgress(80,"Analyzing..."),Lt.applyFilters();const G=z.getState().filteredPools.length>0?z.getState().filteredPools:z.getState().pools;I.setOpportunities(fl(G)),I.setLoadProgress(100,"Ready"),I.setIsInitializing(!1),I.setLastRefresh(Date.now()),Qi.connect(),dh.init(),ct.isEnabled()&&ct.hydrate().then(()=>Lt.applyFilters()).catch(()=>{})}catch(G){console.error("[App] Init failed:",G);const H=z.getState();H.pools.length>0?(H.setIsInitializing(!1),H.setLastRefresh(Date.now())):(H.setLoadProgress(100,"Retrying..."),setTimeout(b,3e3))}};return b(),()=>{Qi.disconnect()}},[]),oe.useEffect(()=>{if(n)return;const b=setInterval(async()=>{const I=z.getState();if(!(I.expandedPoolId||I.expandedOppId||document.hidden)&&!(Date.now()-I.lastRefresh<3e4))try{await Lt.fetchPools(),Lt.applyFilters();const G=z.getState().filteredPools.length>0?z.getState().filteredPools:z.getState().pools,H=fl(G);if(I.setOpportunities(H),I.checkAlerts(),I.setLastRefresh(Date.now()),z.getState().wallet.connected){await hs.fetchBalance();const de=z.getState().wallet.balance;de>0&&ct.saveWalletBalance(de)}const Z=z.getState().filteredPools;Z.length>0&&ct.savePoolSnapshots(Z)}catch(G){console.warn("[App] Background refresh failed:",G)}},be.REFRESH_INTERVAL);return()=>clearInterval(b)},[n]),oe.useEffect(()=>{const b=I=>{if(I.key==="Escape"){const G=z.getState();G.expandedPoolId&&G.setExpandedPoolId(null),G.expandedOppId&&G.setExpandedOppId(null)}};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[]);const j=oe.useCallback(async()=>{const b=z.getState();try{await Lt.fetchPools(),Lt.applyFilters();const I=z.getState().filteredPools.length>0?z.getState().filteredPools:z.getState().pools,G=fl(I);b.setOpportunities(G),b.checkAlerts(),b.setLastRefresh(Date.now())}catch(I){console.error("[App] Refresh failed:",I)}},[]),P=oe.useCallback(async b=>{await hs.connect(b)&&z.getState().setShowWalletModal(!1)},[]),T=oe.useCallback(async()=>{await hs.disconnect(),z.getState().setShowWalletModal(!1)},[]),L=oe.useCallback(async()=>{if(!(!d||!m||parseFloat(m)<=0)){w(!0);try{const b=Math.floor(parseFloat(m)*1e9),I=await fetch(`${be.JUPITER_ULTRA_API}/order`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"59819a46-e0b4-46c3-9d1d-1654cf850419"},body:JSON.stringify({inputMint:be.MINTS.SOL,outputMint:d.mintX,amount:b})});if(I.ok){const G=await I.json();S(`Output: ${G.outAmount?(G.outAmount/1e6).toFixed(4):"N/A"} | Price impact: ${G.priceImpactPct?(G.priceImpactPct*100).toFixed(3)+"%":"N/A"}`)}else S("Quote unavailable")}catch{S("Quote failed")}finally{w(!1)}}},[d,m]),O=oe.useCallback(()=>{z.getState().setShowExecModal(!1),z.getState().setExecPool(null),v(""),S(null)},[]);return n?p.jsxs("div",{className:"loader-overlay",children:[p.jsx(hh,{}),p.jsx("div",{className:"bg-overlay"}),p.jsx("div",{id:"toastContainer",className:"toast-container"}),p.jsxs("div",{className:"loader-content",children:[p.jsx("div",{className:"loader-logo",children:p.jsx("div",{className:"logo-mark",style:{width:60,height:60,fontSize:22},children:"LP"})}),p.jsx("div",{className:"loader-title",children:"LiquidityPro"}),p.jsx("div",{className:"loader-subtitle",children:"Institutional-Grade DeFi Analytics"}),p.jsx("div",{className:"loader-progress",children:p.jsx("div",{className:"loader-progress-bar",style:{width:`${r}%`}})}),p.jsx("div",{className:"loader-status",children:o})]})]}):p.jsxs("div",{className:"app",children:[p.jsx("div",{id:"toastContainer",className:"toast-container"}),p.jsx(hh,{}),p.jsx("div",{className:"bg-overlay"}),p.jsx(iy,{onRefresh:j}),s==="opportunities"&&p.jsxs(p.Fragment,{children:[p.jsx(oy,{}),p.jsx(ay,{})]}),s==="search-alerts"&&p.jsx(hy,{}),s==="guide"&&p.jsx(my,{}),l&&p.jsx("div",{className:"modal-overlay",onClick:()=>z.getState().setShowWalletModal(!1),children:p.jsxs("div",{className:"modal-content wallet-modal",onClick:b=>b.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:f.connected?"Wallet Connected":"Connect Wallet"}),p.jsx("button",{className:"modal-close",onClick:()=>z.getState().setShowWalletModal(!1),children:""})]}),f.connected?p.jsxs("div",{className:"wallet-connected-info",children:[p.jsxs("div",{className:"wallet-address",children:[p.jsx("span",{className:"wallet-label",children:"Address"}),p.jsx("span",{className:"wallet-value",children:Tl(f.publicKey)})]}),p.jsxs("div",{className:"wallet-balance-row",children:[p.jsx("span",{className:"wallet-label",children:"Balance"}),p.jsxs("span",{className:"wallet-value",children:[f.balance.toFixed(4)," SOL"]})]}),p.jsxs("div",{className:"wallet-provider-row",children:[p.jsx("span",{className:"wallet-label",children:"Provider"}),p.jsx("span",{className:"wallet-value",children:f.name})]}),p.jsx("button",{className:"btn btn-danger wallet-disconnect",onClick:T,children:"Disconnect"})]}):p.jsx("div",{className:"wallet-list",children:Object.entries(be.WALLETS).map(([b,I])=>p.jsxs("button",{className:"wallet-option",onClick:()=>P(b),children:[p.jsx("img",{src:I.icon,alt:I.name,width:32,height:32}),p.jsx("span",{children:I.name})]},b))})]})}),u&&d&&p.jsx("div",{className:"modal-overlay",onClick:O,children:p.jsxs("div",{className:"modal-content exec-modal",onClick:b=>b.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsxs("h3",{children:["Execute  ",d.name]}),p.jsx("button",{className:"modal-close",onClick:O,children:""})]}),p.jsxs("div",{className:"exec-pool-info",children:[p.jsxs("div",{className:"exec-row",children:[p.jsx("span",{children:"Protocol"}),p.jsx("span",{children:d.protocol})]}),p.jsxs("div",{className:"exec-row",children:[p.jsx("span",{children:"TVL"}),p.jsx("span",{children:Oe(d.tvl)})]}),p.jsxs("div",{className:"exec-row",children:[p.jsx("span",{children:"APR"}),p.jsxs("span",{children:[d.apr,"%"]})]}),p.jsxs("div",{className:"exec-row",children:[p.jsx("span",{children:"24h Fees"}),p.jsx("span",{children:Oe(d.fees)})]})]}),p.jsxs("div",{className:"exec-input-group",children:[p.jsx("label",{children:"Amount (SOL)"}),p.jsx("input",{type:"number",className:"exec-input",placeholder:"0.00",value:m,onChange:b=>{v(b.target.value),S(null)},min:"0",step:"0.01"}),f.connected&&p.jsxs("div",{className:"exec-balance",children:["Balance: ",f.balance.toFixed(4)," SOL",p.jsx("button",{className:"exec-max-btn",onClick:()=>v(String(Math.max(0,f.balance-.01).toFixed(4))),children:"MAX"})]})]}),y&&p.jsx("div",{className:"exec-quote",children:y}),p.jsxs("div",{className:"exec-actions",children:[p.jsx("button",{className:"btn btn-secondary",onClick:L,disabled:k||!m,children:k?"Getting Quote...":"Get Quote"}),p.jsx("button",{className:"btn btn-primary",disabled:!f.connected||!y,onClick:()=>{dh.track("execution_attempt",{pool:d.id,amount:m}),window.open(d.protocol==="Raydium CLMM"?`https://raydium.io/clmm/create-position/?pool_id=${d.address||d.id}`:d.protocol==="Meteora DLMM"?`https://app.meteora.ag/dlmm/${d.address||d.id}`:`https://app.meteora.ag/dammv2/${d.address||d.id}`,"_blank")},children:f.connected?"Execute on DEX":"Connect Wallet First"})]})]})})]})}Wp.createRoot(document.getElementById("root")).render(p.jsx(oe.StrictMode,{children:p.jsx(gy,{})}));
